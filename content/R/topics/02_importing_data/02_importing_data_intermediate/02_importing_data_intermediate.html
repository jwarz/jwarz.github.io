<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Joschka Schwarz">

<title>Joschka Schwarz - Intermediate Importing Data in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../../">
<link href="../../../../../content/R/topics/02_importing_data/03_working_with_web_data/03_working_with_web_data.html" rel="next">
<link href="../../../../../content/R/topics/02_importing_data/01_importing_data_beginner/01_importing_data_beginner.html" rel="prev">
<script src="../../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../../../site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../../../../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../../../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../../../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>

<link href="../../../../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../../../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>


</head>

<body class="nav-sidebar docked nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../../../index.html">
    <span class="navbar-title">Joschka Schwarz</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-science" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Data Science</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-science">    
        <li>
    <a class="dropdown-item" href="../../../../../content/R/index.html">
 <span class="dropdown-text">R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../../../content/python/index.html">
 <span class="dropdown-text">Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../../../content/sql/index.html">
 <span class="dropdown-text">SQL</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../../../../slides/index.html">
 <span class="menu-text">Presentations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../resumes/index.html">
 <span class="menu-text">Resumes</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../../index.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jwarz/"><i class="bi bi-github" role="img" aria-label="Quarto GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/j-schwarz"><i class="bi bi-linkedin" role="img" aria-label="Quarto LinkedIn">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
                  <a href="" class="quarto-reader-toggle nav-link" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Intermediate Importing Data in R</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/index.html" class="sidebar-item-text sidebar-link">Overview</a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Topics</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <b><i>1 Programming Basics</i></b>
  </li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/01_basics/01_programming_beginner/01_programming_beginner.html" class="sidebar-item-text sidebar-link">1.1: Introduction to R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/01_basics/02_programming_intermediate/02_programming_intermediate.html" class="sidebar-item-text sidebar-link">1.2: Intermediate R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/01_basics/03_programming_tidyverse/03_programming_tidyverse.html" class="sidebar-item-text sidebar-link">1.3: Introduction to the tidyverse</a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <b><i>2 Importing Data</i></b>
  </li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/02_importing_data/01_importing_data_beginner/01_importing_data_beginner.html" class="sidebar-item-text sidebar-link">2.1: Introduction to Importing Data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/02_importing_data/02_importing_data_intermediate/02_importing_data_intermediate.html" class="sidebar-item-text sidebar-link active">2.2: Intermediate Importing Data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/02_importing_data/03_working_with_web_data/03_working_with_web_data.html" class="sidebar-item-text sidebar-link">2.3: Working with web data</a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <b><i>3 Data Wrangling</i></b>
  </li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/03_data_wrangling/01_data_manipulation_with_dplyr/01_data_manipulation_with_dplyr.html" class="sidebar-item-text sidebar-link">3.1: Data Manipulation with dplyr</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/03_data_wrangling/02_joining_data_with_dplyr/02_joining_data_with_dplyr.html" class="sidebar-item-text sidebar-link">3.2: Joining data with dplyr</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/03_data_wrangling/exploratory_data_analysis_in_r/exploratory_data_analysis_in_r.html" class="sidebar-item-text sidebar-link">3.3: Exploratory Data Analysis</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/03_data_wrangling/case_study_exploratory_data_analysis_in_r/case_study_exploratory_data_analysis_in_r.html" class="sidebar-item-text sidebar-link">3.4: Case Study: EDA</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/03_data_wrangling/cleaning_data_in_r/cleaning_data_in_r.html" class="sidebar-item-text sidebar-link">3.5: Cleaning Data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/03_data_wrangling/data_manipulation_with_datatable/data_manipulation_with_datatable.html" class="sidebar-item-text sidebar-link">3.6: Data Manipulation with data.table</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/03_data_wrangling/joining_data_with_datatable/joining_data_with_datatable.html" class="sidebar-item-text sidebar-link">3.7: Joining Data with data.table</a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <b><i>4 Data Visualization</i></b>
  </li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/04_data_visualization/introduction_to_data_visualization_with_ggplot2/ggplot2_intro.html" class="sidebar-item-text sidebar-link">4.1: Introduction to Data Visualization with ggplot2</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/04_data_visualization/data_visualization_with_ggplot2_intermediate/ggplot2_intermediate.html" class="sidebar-item-text sidebar-link">4.2: Intermediate Data Visualization with ggplot2</a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <b><i>5 Statistics</i></b>
  </li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/01_statistics_beginner/01_statistics_beginner.html" class="sidebar-item-text sidebar-link">5.1: Introduction to Statistics</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/02_foundations_of_probability_in_r/02_foundations_of_probability_in_r.html" class="sidebar-item-text sidebar-link">5.2: Foundations of Probability</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/03_regression_beginner/03_regression_beginner.html" class="sidebar-item-text sidebar-link">5.3: Introduction to Regression</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/04_regression_intermediate/04_regression_intermediate.html" class="sidebar-item-text sidebar-link">5.4: Intermediate Regression</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/06_modeling_with_data_in_the_tidyverse/06_modeling_with_data_in_the_tidyverse.html" class="sidebar-item-text sidebar-link">5.5: Modeling with Data in the Tidyverse</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/09_experimental_design/09_experimental_design.html" class="sidebar-item-text sidebar-link">5.6: Experimental Design</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/10_ab_testing_in_r/10_ab_testing_in_r.html" class="sidebar-item-text sidebar-link">5.7: A/B Testing</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/19_fundamentals_of_bayesian_data_analysis/19_fundamentals_of_bayesian_data_analysis.html" class="sidebar-item-text sidebar-link">5.8: Fundamentals of Bayesian Data Analysis</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/21_factor_analysis_in_r/21_factor_analysis_in_r.html" class="sidebar-item-text sidebar-link">5.9: Factor Analysis</a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <b><i>7 Machine Learning</i></b>
  </li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/01_supervised_learning_classification/01_supervised_learning_classification.html" class="sidebar-item-text sidebar-link">7.1: Supervised Learning: Classification</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/02_supervised_learning_regression/02_supervised_learning_regression.html" class="sidebar-item-text sidebar-link">7.2: Supervised Learning: Regression</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/03_unsupervised_learning/03_unsupervised_learning.html" class="sidebar-item-text sidebar-link">7.3: Unsupervised Learning</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/04_machine_learning_in_the_tidyverse/04_machine_learning_in_the_tidyverse.html" class="sidebar-item-text sidebar-link">7.4: Machine Learning in the tidyverse</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/05_cluster_analysis/05_cluster_analysis.html" class="sidebar-item-text sidebar-link">7.5: Cluster Analysis</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/06_machine_learning_with_caret/06_machine_learning_with_caret.html" class="sidebar-item-text sidebar-link">7.6: Machine Learning with caret</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/07_modeling_with_tidymodels/07_modeling_with_tidymodels.html" class="sidebar-item-text sidebar-link">7.7: Modeling with tidymodels</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/08_machine_learning_with_tree-based_models/08_machine_learning_with_tree-based_models.html" class="sidebar-item-text sidebar-link">7.8: Machine Learning with tree-based Models</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/09_support_vector_machines/09_support_vector_machines.html" class="sidebar-item-text sidebar-link">7.9: Support Vector Machines</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/10_topic_modeling/10_topic_modeling.html" class="sidebar-item-text sidebar-link">7.10: Topic Modeling</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/11_hyperparameter_tuning/11_hyperparameter_tuning.html" class="sidebar-item-text sidebar-link">7.11: Hyperparameter Tuning</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/12_bayesian_regression_modeling_with_rstanarm/12_bayesian_regression_modeling_with_rstanarm.html" class="sidebar-item-text sidebar-link">7.12: Bayesian Regression Modeling</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/13_spark_with_sparklyr_in_R/13_spark_with_sparklyr_in_R.html" class="sidebar-item-text sidebar-link">7.13: Introduction to Spark</a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">R Manuals</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/r-manuals/test.html" class="sidebar-item-text sidebar-link">1: An Introduction to R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/r-manuals/02-content.html" class="sidebar-item-text sidebar-link">2: R Data Import/Export</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/r-manuals/03-content.html" class="sidebar-item-text sidebar-link">3: R Installation and Administration</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/r-manuals/04-content.html" class="sidebar-item-text sidebar-link">4: Writing R Extensions</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/r-manuals/05-content.html" class="sidebar-item-text sidebar-link">5: R Language Definition</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/r-manuals/06-content.html" class="sidebar-item-text sidebar-link">6: R Internals</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul class="collapse">
  <li><a href="#importing-data-from-databases-part-1" id="toc-importing-data-from-databases-part-1" class="nav-link active" data-scroll-target="#importing-data-from-databases-part-1"><span class="toc-section-number">1</span>  1. Importing data from databases (Part 1)</a>
  <ul class="collapse">
  <li><a href="#connect-to-a-database" id="toc-connect-to-a-database" class="nav-link" data-scroll-target="#connect-to-a-database"><span class="toc-section-number">1.1</span>  Connect to a database</a></li>
  <li><a href="#establish-a-connection" id="toc-establish-a-connection" class="nav-link" data-scroll-target="#establish-a-connection"><span class="toc-section-number">1.2</span>  Establish a connection</a></li>
  <li><a href="#inspect-the-connection" id="toc-inspect-the-connection" class="nav-link" data-scroll-target="#inspect-the-connection"><span class="toc-section-number">1.3</span>  Inspect the connection</a></li>
  <li><a href="#import-table-data" id="toc-import-table-data" class="nav-link" data-scroll-target="#import-table-data"><span class="toc-section-number">1.5</span>  Import table data</a></li>
  <li><a href="#list-the-database-tables" id="toc-list-the-database-tables" class="nav-link" data-scroll-target="#list-the-database-tables"><span class="toc-section-number">1.6</span>  List the database tables</a></li>
  <li><a href="#import-users" id="toc-import-users" class="nav-link" data-scroll-target="#import-users"><span class="toc-section-number">1.7</span>  Import users</a></li>
  <li><a href="#import-all-tables" id="toc-import-all-tables" class="nav-link" data-scroll-target="#import-all-tables"><span class="toc-section-number">1.8</span>  Import all tables</a></li>
  <li><a href="#how-do-the-tables-relate" id="toc-how-do-the-tables-relate" class="nav-link" data-scroll-target="#how-do-the-tables-relate"><span class="toc-section-number">1.9</span>  How do the tables relate?</a></li>
  </ul></li>
  <li><a href="#importing-data-from-databases-part-2" id="toc-importing-data-from-databases-part-2" class="nav-link" data-scroll-target="#importing-data-from-databases-part-2"><span class="toc-section-number">2</span>  2. Importing data from databases (Part 2)</a>
  <ul class="collapse">
  <li><a href="#sql-queries-from-inside-r" id="toc-sql-queries-from-inside-r" class="nav-link" data-scroll-target="#sql-queries-from-inside-r"><span class="toc-section-number">2.1</span>  SQL Queries from inside R</a></li>
  <li><a href="#query-tweater-1" id="toc-query-tweater-1" class="nav-link" data-scroll-target="#query-tweater-1"><span class="toc-section-number">2.2</span>  Query tweater (1)</a></li>
  <li><a href="#query-tweater-2" id="toc-query-tweater-2" class="nav-link" data-scroll-target="#query-tweater-2"><span class="toc-section-number">2.3</span>  Query tweater (2)</a></li>
  <li><a href="#query-tweater-3" id="toc-query-tweater-3" class="nav-link" data-scroll-target="#query-tweater-3"><span class="toc-section-number">2.4</span>  Query tweater (3)</a></li>
  <li><a href="#query-tweater-4" id="toc-query-tweater-4" class="nav-link" data-scroll-target="#query-tweater-4"><span class="toc-section-number">2.5</span>  Query tweater (4)</a></li>
  <li><a href="#join-the-query-madness" id="toc-join-the-query-madness" class="nav-link" data-scroll-target="#join-the-query-madness"><span class="toc-section-number">2.6</span>  Join the query madness!</a></li>
  <li><a href="#dbi-internals" id="toc-dbi-internals" class="nav-link" data-scroll-target="#dbi-internals"><span class="toc-section-number">2.8</span>  DBI internals</a></li>
  <li><a href="#send---fetch---clear" id="toc-send---fetch---clear" class="nav-link" data-scroll-target="#send---fetch---clear"><span class="toc-section-number">2.9</span>  Send - Fetch - Clear</a></li>
  <li><a href="#be-polite-and" id="toc-be-polite-and" class="nav-link" data-scroll-target="#be-polite-and"><span class="toc-section-number">2.10</span>  Be polite and …</a></li>
  </ul></li>
  <li><a href="#importing-data-from-the-web-part-1" id="toc-importing-data-from-the-web-part-1" class="nav-link" data-scroll-target="#importing-data-from-the-web-part-1"><span class="toc-section-number">3</span>  3. Importing data from the web (Part 1)</a>
  <ul class="collapse">
  <li><a href="#http" id="toc-http" class="nav-link" data-scroll-target="#http"><span class="toc-section-number">3.1</span>  HTTP</a></li>
  <li><a href="#import-flat-files-from-the-web" id="toc-import-flat-files-from-the-web" class="nav-link" data-scroll-target="#import-flat-files-from-the-web"><span class="toc-section-number">3.2</span>  Import flat files from the web</a></li>
  <li><a href="#secure-importing" id="toc-secure-importing" class="nav-link" data-scroll-target="#secure-importing"><span class="toc-section-number">3.3</span>  Secure importing</a></li>
  <li><a href="#downloading-files" id="toc-downloading-files" class="nav-link" data-scroll-target="#downloading-files"><span class="toc-section-number">3.4</span>  Downloading files</a></li>
  <li><a href="#import-excel-files-from-the-web" id="toc-import-excel-files-from-the-web" class="nav-link" data-scroll-target="#import-excel-files-from-the-web"><span class="toc-section-number">3.5</span>  Import Excel files from the web</a></li>
  <li><a href="#downloading-any-file-secure-or-not" id="toc-downloading-any-file-secure-or-not" class="nav-link" data-scroll-target="#downloading-any-file-secure-or-not"><span class="toc-section-number">3.6</span>  Downloading any file, secure or not</a></li>
  <li><a href="#reading-a-text-file-from-the-web" id="toc-reading-a-text-file-from-the-web" class="nav-link" data-scroll-target="#reading-a-text-file-from-the-web"><span class="toc-section-number">3.7</span>  Reading a text file from the web</a></li>
  <li><a href="#http-httr-1" id="toc-http-httr-1" class="nav-link" data-scroll-target="#http-httr-1"><span class="toc-section-number">3.9</span>  HTTP? httr! (1)</a></li>
  <li><a href="#http-httr-2" id="toc-http-httr-2" class="nav-link" data-scroll-target="#http-httr-2"><span class="toc-section-number">3.10</span>  HTTP? httr! (2)</a></li>
  </ul></li>
  <li><a href="#importing-data-from-the-web-part-2" id="toc-importing-data-from-the-web-part-2" class="nav-link" data-scroll-target="#importing-data-from-the-web-part-2"><span class="toc-section-number">4</span>  4. Importing data from the web (Part 2)</a>
  <ul class="collapse">
  <li><a href="#apis-json" id="toc-apis-json" class="nav-link" data-scroll-target="#apis-json"><span class="toc-section-number">4.1</span>  APIs &amp; JSON</a></li>
  <li><a href="#from-json-to-r" id="toc-from-json-to-r" class="nav-link" data-scroll-target="#from-json-to-r"><span class="toc-section-number">4.2</span>  From JSON to R</a></li>
  <li><a href="#quandl-api" id="toc-quandl-api" class="nav-link" data-scroll-target="#quandl-api"><span class="toc-section-number">4.3</span>  Quandl API</a></li>
  <li><a href="#omdb-api" id="toc-omdb-api" class="nav-link" data-scroll-target="#omdb-api"><span class="toc-section-number">4.4</span>  OMDb API</a></li>
  <li><a href="#json-jsonlite" id="toc-json-jsonlite" class="nav-link" data-scroll-target="#json-jsonlite"><span class="toc-section-number">4.5</span>  JSON &amp; jsonlite</a></li>
  <li><a href="#json-practice-1" id="toc-json-practice-1" class="nav-link" data-scroll-target="#json-practice-1"><span class="toc-section-number">4.6</span>  JSON practice (1)</a></li>
  <li><a href="#json-practice-2" id="toc-json-practice-2" class="nav-link" data-scroll-target="#json-practice-2"><span class="toc-section-number">4.7</span>  JSON practice (2)</a></li>
  <li><a href="#tojson" id="toc-tojson" class="nav-link" data-scroll-target="#tojson"><span class="toc-section-number">4.8</span>  toJSON()</a></li>
  <li><a href="#minify-and-prettify" id="toc-minify-and-prettify" class="nav-link" data-scroll-target="#minify-and-prettify"><span class="toc-section-number">4.9</span>  Minify and prettify</a></li>
  </ul></li>
  <li><a href="#importing-data-from-statistical-software-packages" id="toc-importing-data-from-statistical-software-packages" class="nav-link" data-scroll-target="#importing-data-from-statistical-software-packages"><span class="toc-section-number">5</span>  5. Importing data from statistical software packages</a>
  <ul class="collapse">
  <li><a href="#haven" id="toc-haven" class="nav-link" data-scroll-target="#haven"><span class="toc-section-number">5.1</span>  haven</a></li>
  <li><a href="#import-sas-data-with-haven" id="toc-import-sas-data-with-haven" class="nav-link" data-scroll-target="#import-sas-data-with-haven"><span class="toc-section-number">5.2</span>  Import SAS data with haven</a></li>
  <li><a href="#import-stata-data-with-haven" id="toc-import-stata-data-with-haven" class="nav-link" data-scroll-target="#import-stata-data-with-haven"><span class="toc-section-number">5.3</span>  Import STATA data with haven</a></li>
  <li><a href="#what-does-the-graphic-tell" id="toc-what-does-the-graphic-tell" class="nav-link" data-scroll-target="#what-does-the-graphic-tell"><span class="toc-section-number">5.4</span>  What does the graphic tell?</a></li>
  <li><a href="#import-spss-data-with-haven" id="toc-import-spss-data-with-haven" class="nav-link" data-scroll-target="#import-spss-data-with-haven"><span class="toc-section-number">5.6</span>  Import SPSS data with haven</a></li>
  <li><a href="#factorize-round-two" id="toc-factorize-round-two" class="nav-link" data-scroll-target="#factorize-round-two"><span class="toc-section-number">5.7</span>  Factorize, round two</a></li>
  <li><a href="#foreign" id="toc-foreign" class="nav-link" data-scroll-target="#foreign"><span class="toc-section-number">5.8</span>  foreign</a></li>
  <li><a href="#import-stata-data-with-foreign-1" id="toc-import-stata-data-with-foreign-1" class="nav-link" data-scroll-target="#import-stata-data-with-foreign-1"><span class="toc-section-number">5.9</span>  Import STATA data with foreign (1)</a></li>
  <li><a href="#import-stata-data-with-foreign-2" id="toc-import-stata-data-with-foreign-2" class="nav-link" data-scroll-target="#import-stata-data-with-foreign-2"><span class="toc-section-number">5.10</span>  Import STATA data with foreign (2)</a></li>
  <li><a href="#do-you-know-your-data" id="toc-do-you-know-your-data" class="nav-link" data-scroll-target="#do-you-know-your-data"><span class="toc-section-number">5.11</span>  Do you know your data?</a></li>
  <li><a href="#import-spss-data-with-foreign-1" id="toc-import-spss-data-with-foreign-1" class="nav-link" data-scroll-target="#import-spss-data-with-foreign-1"><span class="toc-section-number">5.13</span>  Import SPSS data with foreign (1)</a></li>
  <li><a href="#excursion-correlation" id="toc-excursion-correlation" class="nav-link" data-scroll-target="#excursion-correlation"><span class="toc-section-number">5.14</span>  Excursion: Correlation</a></li>
  <li><a href="#import-spss-data-with-foreign-2" id="toc-import-spss-data-with-foreign-2" class="nav-link" data-scroll-target="#import-spss-data-with-foreign-2"><span class="toc-section-number">5.16</span>  Import SPSS data with foreign (2)</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/jwarz/jwarz.github.io/edit/main/content/R/topics/02_importing_data/02_importing_data_intermediate/02_importing_data_intermediate.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/jwarz/jwarz.github.io/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Intermediate Importing Data in R</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Joschka Schwarz </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<p>In this course, you will take a deeper dive into the wide range of data formats out there. More specifically, you’ll learn how to import data from relational databases and how to import and work with data coming from the web. Finally, you’ll get hands-on experience with importing data from statistical software packages such as SAS, STATA, and SPSS.</p>
<section id="importing-data-from-databases-part-1" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> 1. Importing data from databases (Part 1)</h1>
<p>Many companies store their information in relational databases. The R community has also developed R packages to get data from these architectures. You’ll learn how to connect to a database and how to retrieve data from it.</p>
<section id="connect-to-a-database" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="connect-to-a-database"><span class="header-section-number">1.1</span> Connect to a database</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. Connect to a database</strong></p>
<p>Welcome to part two of importing data in R!</p>
<p><strong>2. Up to now</strong></p>
<p>The previous course dealt with accessing data stored in flat files or Excel files. In a professional setting, you’ll also encounter data stored in relational databases.</p>
<p><strong>3. Relational Databases</strong></p>
<p>In this video, I’ll briefly talk about what a relational database is, and then I’ll explain how you can connect to it. In the next video, I’ll explain how you can import data from it!So, what’s a relational database? There’s no better way to show this than with an example.</p>
<p><strong>4. company</strong></p>
<p>Take this database, called company. It contains three tables,</p>
<p><strong>5. company</strong></p>
<p>employees,</p>
<p><strong>6. company</strong></p>
<p>products and</p>
<p><strong>7. company</strong></p>
<p>sales.Like a flat file, information is displayed in a table format. The employees table has 5 records and three fields, namely id, name and started_at. The id here serves as a unique key for each row or record. Next, the products table contains the details on four products. We’re dealing with data from a telecom company that’s selling both with and without a contract. Also here, each product has an identifier. Finally, there’s the sales table. It lists what products were sold by who, when, and for what price. Notice here that the ids in</p>
<p><strong>8. company</strong></p>
<p>employee_id and</p>
<p><strong>9. company</strong></p>
<p>product_id correspond to the ids that you can find in the employees and products table respectively.</p>
<p><strong>10. company</strong></p>
<p>The third sale for example, was done by the employee with id 6, so Julie. She sold the product with id 9, so the Biz Unlimited contract.</p>
<p><strong>11. company</strong></p>
<p>These relations make this database very powerful. You only store all necessary information once in nicely separated tables, but can connect the dots between different records to model what’s happening.</p>
<p><strong>12. Database Management System</strong></p>
<p>How the data in a relational database is stored and shuffled around when you make adaptations, depends on the so-called database management system, or DBMS you’re using. Open-source implementations such as MySQL, postgreSQL and SQLite are very popular, but there are also proprietary implementations such as Oracle Database and Microsoft SQL server. Practically all of these implementations use SQL, or sequel, as the language for querying and maintaining the database. SQL stands for Structured Query Language.</p>
<p><strong>13. Databases in R</strong></p>
<p>Depending on the type of database you want to connect to, you’ll have to use different packages. Suppose the company database I introduced before is a MySQL database. This means you’ll need the RMySQL package. For postgreSQL you’ll need RpostgreSQL, for Oracle, you’ll use ROracle and so on. How you interact with the database, so which R functions you use to access and manipulate the database, is specified in another R package called DBI. In more technical terms, DBI is an interface, and RMySQL is the implementation. Let’s install the RMySQL package, which automatically installs the DBI package as well. Loading only the DBI package will be enough to get started.</p>
<p><strong>14. Connect to database</strong></p>
<p>The first step is creating a connection to the remote MySQL database. You do this with dbConnect, as follows.The first argument specifies the driver that you will use to connect to the MySQL database. It sure looks a bit strange, but the MySQL function from the RMySQL package simply constructs a driver for us that dbConnect can use. Next, you have to specify the database name, where the database is hosted, through which port you want to connect, and finally the credentials to authenticate yourself. This is an actual database that we’re hosting, so you can try these commands yourself!The result of the dbConnect call, con, is a DBI connection object. You’ll need to pass this object to whatever function you’re using to interact with the database.</p>
</section>
<section id="establish-a-connection" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="establish-a-connection"><span class="header-section-number">1.2</span> Establish a connection</h2>
<p>The first step to import data from a SQL database is creating a connection to it. As Filip explained, you need different packages depending on the database you want to connect to. All of these packages do this in a uniform way, as specified in the <code>DBI</code> package.</p>
<p><a href="http://www.rdocumentation.org/packages/DBI/functions/dbConnect" target="_blank" rel="noopener noreferrer"><code>dbConnect()</code></a> creates a connection between your R session and a SQL database. The first argument has to be a <code>DBIdriver</code> object, that specifies how connections are made and how data is mapped between R and the database. Specifically for MySQL databases, you can build such a driver with <a href="http://www.rdocumentation.org/packages/RMySQL/functions/MySQLDriver-class" target="_blank" rel="noopener noreferrer"><code>RMySQL::MySQL()</code></a>.</p>
<p>If the MySQL database is a remote database hosted on a server, you’ll also have to specify the following arguments in <a href="http://www.rdocumentation.org/packages/DBI/functions/dbConnect" target="_blank" rel="noopener noreferrer"><code>dbConnect()</code></a>: <code>dbname</code>, <code>host</code>, <code>port</code>, <code>user</code> and <code>password</code>. Most of these details have already been provided.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Load the <code>DBI</code> library, which is already installed on DataCamp’s servers.</li>
<li>Edit the <a href="http://www.rdocumentation.org/packages/DBI/functions/dbConnect" target="_blank" rel="noopener noreferrer"><code>dbConnect()</code></a> call to connect to the MySQL database. Change the <code>port</code> argument (<code>3306</code>) and <code>user</code> argument (<code>"student"</code>).</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Load the DBI package</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(DBI)</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># Edit dbConnect() call</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RMySQL<span class="sc">::</span><span class="fu">MySQL</span>(), </span>
<span id="cb1-6"><a href="#cb1-6"></a>                 <span class="at">dbname =</span> <span class="st">"tweater"</span>, </span>
<span id="cb1-7"><a href="#cb1-7"></a>                 <span class="at">host =</span> <span class="st">"courses.csrrinzqubik.us-east-1.rds.amazonaws.com"</span>, </span>
<span id="cb1-8"><a href="#cb1-8"></a>                 <span class="at">port =</span> <span class="dv">3306</span>,</span>
<span id="cb1-9"><a href="#cb1-9"></a>                 <span class="at">user =</span> <span class="st">"student"</span>,</span>
<span id="cb1-10"><a href="#cb1-10"></a>                 <span class="at">password =</span> <span class="st">"datacamp"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="inspect-the-connection" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="inspect-the-connection"><span class="header-section-number">1.3</span> Inspect the connection</h2>
<p>Now that you’ve successfully created the database connection, let’s have a closer look at it.</p>
<blockquote class="blockquote">
<h2 id="question" data-number="1.4" class="anchored"><span class="header-section-number">1.4</span> <em>Question</em></h2>
<p>With the object <code>con</code> available in your workspace, can you tell which of the following statements is true?<br> <br> ⬜ <code>con</code> is an <code>SQLConnection</code> object.<br> ⬜ <code>con</code> is a <code>PostgreSQLConnection</code> object.<br> ✅ <code>con</code> is an <code>MySQLConnection</code> object.<br> ⬜ <code>con</code> is an <code>NoSQLConnection</code> object.<br></p>
</blockquote>
</section>
<section id="import-table-data" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="import-table-data"><span class="header-section-number">1.5</span> Import table data</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. Import table data</strong></p>
<p>After successfully connecting to a database,</p>
<p><strong>2. con</strong></p>
<p>like this, you’ll probably want to see what’s in there.</p>
<p><strong>3. List and import tables</strong></p>
<p>The first step is listing all the table in the database. You can do this with the dbListTables function. Simply pass the con variable.As expected, we get a character vector of length three, corresponding to the table names I’ve introduced earlier. Next, you can choose to actually read the data from one of these tables, for example from the employees table. You use the dbReadTable function for this. Again, you specify the connection to use, con, but this time you also specify which table data you want to import:The result is a data frame, with exactly the same contents as in the original database table.DBI also specifies functions to create new tables, store new data in tables and to remove tables, but this is not really related to importing data so I won’t talk about that here. The functions we’ve covered up to now already provide a pretty good starting point. Oh no, wait, there’s one last thing!It’s always polite to explicitly disconnect your database after you’re done. You do this with dbDisconnect, as follows.If you now try to print con, you’ll see that it is no longer available. Good riddance,</p>
</section>
<section id="list-the-database-tables" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="list-the-database-tables"><span class="header-section-number">1.6</span> List the database tables</h2>
<p>After you’ve successfully connected to a remote MySQL database, the next step is to see what tables the database contains. You can do this with the <a href="http://www.rdocumentation.org/packages/DBI/functions/dbListTables" target="_blank" rel="noopener noreferrer"><code>dbListTables()</code></a> function. As you might remember from the video, this function requires the connection object as an input, and outputs a character vector with the table names.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Add code to create a vector <code>tables</code>, that contains the tables in the tweater database. You can connect to this database through the <code>con</code> object.</li>
<li>Display the structure of <code>tables</code>; what’s the class of this vector?</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># Build a vector of table names: tables</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>tables <span class="ot">&lt;-</span> <span class="fu">dbListTables</span>(con)</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># Display structure of tables</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="fu">str</span>(tables)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;  chr [1:3] "comments" "tweats" "users"</code></pre>
</div>
</div>
<p>Good! <a href="http://www.rdocumentation.org/packages/DBI/functions/dbListTables"><code>dbListTables()</code></a> can be very useful to get a first idea about the contents of your database. Can you guess what kind of information this database contains?</p>
</section>
<section id="import-users" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="import-users"><span class="header-section-number">1.7</span> Import users</h2>
<p>As you might have guessed by now, the database contains data on a more tasty version of Twitter, namely Tweater. Users can post tweats with short recipes for delicious snacks. People can comment on these tweats. There are three tables: <strong>users</strong>, <strong>tweats</strong>, and <strong>comments</strong> that have relations among them. Which ones, you ask? You’ll discover in a moment!</p>
<p>Let’s start by importing the data on the users into your R session. You do this with the <a href="http://www.rdocumentation.org/packages/DBI/functions/dbReadTable" target="_blank" rel="noopener noreferrer"><code>dbReadTable()</code></a> function. Simply pass it the connection object (<code>con</code>), followed by the name of the table you want to import. The resulting object is a standard R data frame.</p>
<p><strong>Steps</strong></p>
<p>1 Add code that imports the <code>"users"</code> table from the tweater database and store the resulting data frame as <code>users</code>. 2. Print the <code>users</code> data frame.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># Import the users table from tweater: users</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>users <span class="ot">&lt;-</span> <span class="fu">dbReadTable</span>(con, <span class="st">"users"</span>)</span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co"># Print users</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>users</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["id"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["login"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"elisabeth","3":"elismith"},{"1":"2","2":"mike","3":"mikey"},{"1":"3","2":"thea","3":"teatime"},{"1":"4","2":"thomas","3":"tomatotom"},{"1":"5","2":"oliver","3":"olivander"},{"1":"6","2":"kate","3":"katebenn"},{"1":"7","2":"anjali","3":"lianja"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="import-all-tables" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="import-all-tables"><span class="header-section-number">1.8</span> Import all tables</h2>
<p>Next to the <code>users</code>, we’re also interested in the <code>tweats</code> and <code>comments</code> tables. However, separate <code>dbReadTable()</code> calls for each and every one of the tables in your database would mean a lot of code duplication. Remember about the <code>lapply()</code> function? You can use it again here! A connection is already coded for you, as well as a vector <code>table_names</code>, containing the names of all the tables in the database.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Finish the <code>lapply()</code> function to import the <code>users</code>, <code>tweats</code> and <code>comments</code> tables in a single call. The result, a list of data frames, will be stored in the variable <code>tables</code>.</li>
<li>Print <code>tables</code> to check if you got it right.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># Get table names</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>table_names <span class="ot">&lt;-</span> <span class="fu">dbListTables</span>(con)</span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co"># Import all tables</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>tables <span class="ot">&lt;-</span> <span class="fu">lapply</span>(table_names, dbReadTable, <span class="at">conn =</span> con)</span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co"># Print out tables</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>tables</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [[1]]
#&gt;      id tweat_id user_id            message
#&gt; 1  1022       87       7              nice!
#&gt; 2  1000       77       7             great!
#&gt; 3  1011       49       5            love it
#&gt; 4  1012       87       1   awesome! thanks!
#&gt; 5  1010       88       6              yuck!
#&gt; 6  1026       77       4      not my thing!
#&gt; 7  1004       49       1  this is fabulous!
#&gt; 8  1030       75       6           so easy!
#&gt; 9  1025       88       2             oh yes
#&gt; 10 1007       49       3           serious?
#&gt; 11 1020       77       1 couldn't be better
#&gt; 12 1014       77       1       saved my day
#&gt; 
#&gt; [[2]]
#&gt;   id user_id
#&gt; 1 75       3
#&gt; 2 88       4
#&gt; 3 77       6
#&gt; 4 87       5
#&gt; 5 49       1
#&gt; 6 24       7
#&gt;                                                                  post
#&gt; 1                                       break egg. bake egg. eat egg.
#&gt; 2                           wash strawberries. add ice. blend. enjoy.
#&gt; 3                       2 slices of bread. add cheese. grill. heaven.
#&gt; 4               open and crush avocado. add shrimps. perfect starter.
#&gt; 5 nachos. add tomato sauce, minced meat and cheese. oven for 10 mins.
#&gt; 6                              just eat an apple. simply and healthy.
#&gt;         date
#&gt; 1 2015-09-05
#&gt; 2 2015-09-14
#&gt; 3 2015-09-21
#&gt; 4 2015-09-22
#&gt; 5 2015-09-22
#&gt; 6 2015-09-24
#&gt; 
#&gt; [[3]]
#&gt;   id      name     login
#&gt; 1  1 elisabeth  elismith
#&gt; 2  2      mike     mikey
#&gt; 3  3      thea   teatime
#&gt; 4  4    thomas tomatotom
#&gt; 5  5    oliver olivander
#&gt; 6  6      kate  katebenn
#&gt; 7  7    anjali    lianja</code></pre>
</div>
</div>
<p>Wonderful! Now that you have an R version of all data that is contained in the database, you can dive a little deeper into the relations between the different data frames.</p>
</section>
<section id="how-do-the-tables-relate" class="level2" data-number="1.9">
<h2 data-number="1.9" class="anchored" data-anchor-id="how-do-the-tables-relate"><span class="header-section-number">1.9</span> How do the tables relate?</h2>
<p>The connection to the MySQL database <code>con</code> has already been created for you. <code>tables</code>, a list containing the three tables as data frames that you’ve created in the previous exercise, is also available.</p>
<p>If you have a closer look at these tables, you’ll see that the <code>tweats</code> table, for example, contains a column <code>user_id</code>. The ids in the column refer to the users that have posted the tweat. Similarly, the <code>comments</code> contain both a <code>user_id</code> and a <code>tweat_id</code> column. It specifies which user posted a comment on which tweat.</p>
<blockquote class="blockquote">
<h2 id="question-1" data-number="1.10" class="anchored"><span class="header-section-number">1.10</span> <em>Question</em></h2>
<p>With this new knowledge, can you tell <strong>who</strong> posted the <strong>tweat</strong> on which somebody <strong>commented</strong> “awesome! thanks!” (comment 1012)?<br> <br> ⬜ The user with id 1, so Kate.<br> ⬜ There is not enough information to solve this.<br> ⬜ The user with id 4, so Thomas.<br> ✅ The user with user_id 5, so Oliver.<br></p>
</blockquote>
</section>
</section>
<section id="importing-data-from-databases-part-2" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> 2. Importing data from databases (Part 2)</h1>
<p>Importing an entire table from a database while you might only need a tiny bit of information seems like a lot of unncessary work. In this chapter, you’ll learn about SQL queries, which will help you make things more efficient by performing some computations on the database side.</p>
<section id="sql-queries-from-inside-r" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="sql-queries-from-inside-r"><span class="header-section-number">2.1</span> SQL Queries from inside R</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. SQL Queries from inside R</strong></p>
<p>So, connecting to and importing from a database is something you’re familiar with by now.</p>
<p><strong>2. dbReadTable()</strong></p>
<p>However, with dbReadTable,</p>
<p><strong>3. dbReadTable()</strong></p>
<p>you’re importing an entire table. For the company example that had little data, that’s not a problem, but what if you’re dealing with a database that contains tables with millions of records? You’d have to import the entire table into R before you can do an analysis that might only need a fraction of this data.</p>
<p><strong>4. dbReadTable()</strong></p>
<p>If there was a way to perform a lot of the data selection work</p>
<p><strong>5. dbReadTable()</strong></p>
<p>on the database side,</p>
<p><strong>6. dbReadTable()</strong></p>
<p>you only have to import those elements that you actually need inside R. This makes much more sense, doesn’t it?</p>
<p><strong>7. Selective importing</strong></p>
<p>I am glad to tell you that this is possible, all from inside R! Remember that relational databases typically use SQL as the language for querying? Well, you’ll be writing so called SQL Queries to retrieve data based on specific criteria. You can send these queries through R functions specified by the DBI package and implemented by an R package that depends on the database you’re using. As we’re working with MySQL databases, that’s RMySQL here. Writing SQL queries is a entire topic of its own, so I will only treat some basic examples so that you got the idea.</p>
<p><strong>8. company</strong></p>
<p>Let’s have a look at the company database again, that contained informations on sales of telecom products made by different employees.</p>
<p><strong>9. company</strong></p>
<p>Suppose that we want to have the names of the employees that started after the first of september in 2012. How to go about this?</p>
<p><strong>10. Load package and connect</strong></p>
<p>In any case, we have to start with loading the DBI package, and creating a connection to the company database. This is an actual database, so you can try the code in this video yourself!</p>
<p><strong>11. Example 1</strong></p>
<p>To solve the task at hand, you can read the entire employees table, and then subset it using the subset function.But there is another way. Have a look at this call of the dbGetQuery function.The result is exactly the same. The strange syntax inside the string here, is actually a very common SQL query, that uses three SQL keywords: SELECT, FROM, and WHERE. The SELECT keyword specifies which column to select, and corresponds to the select argument in the subset function. The FROM keyword specifies which table you want to get data from, and corresponds to the first argument in the subset function. Finally, the WHERE keyword specifies a condition that a record in the table has to meet. If you read this sentence out loud with some additions here and there, it sounds pretty natural: “Select the name column from the employees table, where the started_at field is greater than the first of september in 2012.”The first approach and the second approach might seem similar, but the conceptual difference is huge.</p>
<p><strong>12. Example 1</strong></p>
<p>In the first case,</p>
<p><strong>13. Example 1</strong></p>
<p>you’re importing the entire employees table,</p>
<p><strong>14. Example 1</strong></p>
<p>and then do some subsetting in R. In the second case,</p>
<p><strong>15. Example 1</strong></p>
<p>you’re sending a SQL query to the database,</p>
<p><strong>16. Example 1</strong></p>
<p>this query is run on the database side, and</p>
<p><strong>17. Example 1</strong></p>
<p>only the results are imported into R. If you’re dealing with huge tables, the second approach is way more efficient.Let’s try another example.</p>
<p><strong>18. company</strong></p>
<p>Suppose you want to select the products that imply a contract,</p>
<p><strong>19. company</strong></p>
<p>so where contract is one. For these products, we’re interested in all variables. The old approach of reading the entire table and then subsetting</p>
<p><strong>20. Example 2</strong></p>
<p>would look like this.The new approach of sending an SQL query to the database and fetching the result, looks like this.The results are again exactly the same. Notice how the star after the SELECT keyword specifies to keep all columns from the products table. Also notice that in the SQL query, you have to use a single equals sign to specify a condition for the WHERE keyword, instead of a double equals sign, like you’re used to in R.</p>
<p><strong>21. Let’s practice!</strong></p>
<p>After this crash course on SQL syntax, let’s see how you perform in some exercises. Good luck!</p>
</section>
<section id="query-tweater-1" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="query-tweater-1"><span class="header-section-number">2.2</span> Query tweater (1)</h2>
<p>In your life as a data scientist, you’ll often be working with huge databases that contain tables with millions of rows. If you want to do some analyses on this data, it’s possible that you only need a fraction of this data. In this case, it’s a good idea to send SQL queries to your database, and only import the data you actually need into R.</p>
<p><a href="http://www.rdocumentation.org/packages/DBI/functions/dbGetQuery" target="_blank" rel="noopener noreferrer"><code>dbGetQuery()</code></a> is what you need. As usual, you first pass the connection object to it. The second argument is an SQL query in the form of a character string. This example selects the <code>age</code> variable from the <code>people</code> dataset where <code>gender</code> equals <code>"male"</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">dbGetQuery</span>(con, <span class="st">"SELECT age FROM people WHERE gender = 'male'"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Use <a href="http://www.rdocumentation.org/packages/DBI/functions/dbGetQuery" target="_blank" rel="noopener noreferrer"><code>dbGetQuery()</code></a> to create a data frame, <code>elisabeth</code>, that <strong>selects</strong> the <code>tweat_id</code> column <strong>from</strong> the <code>comments</code> table <strong>where</strong> elisabeth is the commenter, her <code>user_id</code> is 1</li>
<li>Print out <code>elisabeth</code> so you can see if you queried the database correctly.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># Connect to the database</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="fu">library</span>(DBI)</span>
<span id="cb8-3"><a href="#cb8-3"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RMySQL<span class="sc">::</span><span class="fu">MySQL</span>(),</span>
<span id="cb8-4"><a href="#cb8-4"></a>                 <span class="at">dbname =</span> <span class="st">"tweater"</span>,</span>
<span id="cb8-5"><a href="#cb8-5"></a>                 <span class="at">host =</span> <span class="st">"courses.csrrinzqubik.us-east-1.rds.amazonaws.com"</span>,</span>
<span id="cb8-6"><a href="#cb8-6"></a>                 <span class="at">port =</span> <span class="dv">3306</span>,</span>
<span id="cb8-7"><a href="#cb8-7"></a>                 <span class="at">user =</span> <span class="st">"student"</span>,</span>
<span id="cb8-8"><a href="#cb8-8"></a>                 <span class="at">password =</span> <span class="st">"datacamp"</span>)</span>
<span id="cb8-9"><a href="#cb8-9"></a></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="co"># Import tweat_id column of comments where user_id is 1: elisabeth</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>elisabeth <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="st">"SELECT tweat_id FROM comments WHERE user_id = 1"</span>)</span>
<span id="cb8-12"><a href="#cb8-12"></a></span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="co"># Print elisabeth</span></span>
<span id="cb8-14"><a href="#cb8-14"></a>elisabeth</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["tweat_id"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"87"},{"1":"49"},{"1":"77"},{"1":"77"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Nice! To make sure you understood SQL’s <code>SELECT</code> - <code>FROM</code> - <code>WHERE</code> syntax, let’s practice some more.</p>
</section>
<section id="query-tweater-2" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="query-tweater-2"><span class="header-section-number">2.3</span> Query tweater (2)</h2>
<p>Apart from checking equality, you can also check for <em>less than</em> and <em>greater than</em> relationships, with <code>&lt;</code> and <code>&gt;</code>, just like in R.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Create a data frame, <code>latest</code>, that <strong>selects</strong> the <code>post</code> column <strong>from</strong> the <code>tweats</code> table observations <strong>where</strong> the <code>date</code> is higher than <code>'2015-09-21'</code>.</li>
<li>Print out <code>latest</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># Import post column of tweats where date is higher than '2015-09-21': latest</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co"># Import post column of tweats where date is higher than '2015-09-21': latest</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>latest <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="st">"SELECT post </span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="st">                           FROM tweats </span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="st">                           WHERE date &gt; '2015-09-21'"</span>)</span>
<span id="cb9-6"><a href="#cb9-6"></a></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co"># Print latest</span></span>
<span id="cb9-8"><a href="#cb9-8"></a>latest</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["post"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"open and crush avocado. add shrimps. perfect starter."},{"1":"nachos. add tomato sauce, minced meat and cheese. oven for 10 mins."},{"1":"just eat an apple. simply and healthy."}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Nice! To make sure you understood SQL’s <code>SELECT</code> - <code>FROM</code> - <code>WHERE</code> syntax, let’s practice some more.</p>
</section>
<section id="query-tweater-3" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="query-tweater-3"><span class="header-section-number">2.4</span> Query tweater (3)</h2>
<p>Suppose that you have a <code>people</code> table, with a bunch of information. This time, you want to find out the <code>age</code> and <code>country</code> of married males. Provided that there is a <code>married</code> column that’s 1 when the person in question is married, the following query would work.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">SELECT</span> age, country</span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="kw">FROM</span> people</span>
<span id="cb10-3"><a href="#cb10-3"></a>    <span class="kw">WHERE</span> gender <span class="op">=</span> <span class="ot">"male"</span> <span class="kw">AND</span> married <span class="op">=</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Can you use a similar approach for a more specialized query on the <code>tweater</code> database?</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Create an R data frame, <code>specific</code>, that <strong>selects</strong> the <code>message</code> column <strong>from</strong> the <code>comments</code> table <strong>where</strong> the <code>tweat_id</code> is 77 <strong>and</strong> the <code>user_id</code> is greater than 4.</li>
<li>Print <code>specific</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># Create data frame specific</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>specific <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="st">"SELECT message</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="st">                             FROM comments</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="st">                             WHERE tweat_id = 77 AND user_id &gt; 4"</span>)</span>
<span id="cb11-5"><a href="#cb11-5"></a></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co"># Print specific</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>specific</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["message"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"great!"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="query-tweater-4" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="query-tweater-4"><span class="header-section-number">2.5</span> Query tweater (4)</h2>
<p>There are also dedicated SQL functions that you can use in the <code>WHERE</code> clause of an SQL query. For example, <code>CHAR_LENGTH()</code> returns the number of characters in a string.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Create a data frame, <code>short</code>, that <strong>selects</strong> the <code>id</code> and <code>name</code> columns <strong>from</strong> the <code>users</code> table <strong>where</strong> the number of characters in the <code>name</code> is strictly less than 5.</li>
<li>Print <code>short</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># Create data frame short</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>short <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="st">"SELECT id, name</span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="st">                          FROM users</span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="st">                          WHERE CHAR_LENGTH(name) &lt; 5"</span>)</span>
<span id="cb12-5"><a href="#cb12-5"></a></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="co"># Print short</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>short</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["id"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"2","2":"mike"},{"1":"3","2":"thea"},{"1":"6","2":"kate"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="join-the-query-madness" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="join-the-query-madness"><span class="header-section-number">2.6</span> Join the query madness!</h2>
<p>Of course, SQL does not stop with the the three keywords <code>SELECT</code>, <code>FROM</code> and <code>WHERE</code>. Another very often used keyword is <code>JOIN</code>, and more specifically <code>INNER JOIN</code>. Take this call for example:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">SELECT</span> name, post</span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="kw">FROM</span> users <span class="kw">INNER</span> <span class="kw">JOIN</span> tweats <span class="kw">on</span> users.<span class="kw">id</span> <span class="op">=</span> user_id</span>
<span id="cb13-3"><a href="#cb13-3"></a>    <span class="kw">WHERE</span> <span class="dt">date</span> <span class="op">&gt;</span> <span class="ot">"2015-09-19"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here, the <code>users</code> table is joined with the <code>tweats</code> table. This is possible because the <code>id</code> column in the <code>users</code> table corresponds to the <code>user_id</code> column in the <code>tweats</code> table. Also notice how <code>name</code>, from the <code>users</code> table, and <code>post</code> and <code>date</code>, from the <code>tweats</code> table, can be referenced to without problems.</p>
<blockquote class="blockquote">
<h2 id="question-2" data-number="2.7" class="anchored"><span class="header-section-number">2.7</span> <em>Question</em></h2>
<p>Can you predict the outcome of the following query?<br> <br> ⬜ Trying to get the results of this SQL query throws an error.<br> ✅ A table with four observations, containing two columns: <code>post</code> and <code>message</code>.<br> ⬜ A table with six observations, containing all columns in the <code>tweats</code> table.<br> ⬜ A table with six observations, containing the columns <code>post</code> and <code>message</code>.<br></p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb14-1"><a href="#cb14-1"></a><span class="kw">SELECT</span> post, message</span>
<span id="cb14-2"><a href="#cb14-2"></a>  <span class="kw">FROM</span> tweats <span class="kw">INNER</span> <span class="kw">JOIN</span> comments <span class="kw">on</span> tweats.<span class="kw">id</span> <span class="op">=</span> tweat_id</span>
<span id="cb14-3"><a href="#cb14-3"></a>    <span class="kw">WHERE</span> tweat_id <span class="op">=</span> <span class="dv">77</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="dbi-internals" class="level2" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="dbi-internals"><span class="header-section-number">2.8</span> DBI internals</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. DBI internals</strong></p>
<p>Let’s turn back to a dbGetQuery function call from before.</p>
<p><strong>2. dbGetQuery()</strong></p>
<p>It was incredibly easy to use. Simply pass the connection object and an SQL query, and you get a result.What it actually does behind the scenes is sending a query, with dbSendQuery, like this. This function returns a result, but this does not actually contain any records you wanted to import. For that, you need to use the function dbFetch. Finally, you have to manually clear the result.The combination of dbSendQuery, dbFetch and, dbClearResult gives the exact same result as dbGetQuery did before, so why do this? Well, the dbFetch query calls allow you to specify a maximum number of records to retrieve per fetch. This can be useful when you need to load in tons of records, but want to do this chunk by chunk.Suppose, for example,</p>
<p><strong>3. dbFetch() one by one</strong></p>
<p>you want to get the result of the previous query, record by record. You can use this construction for that, with the same SQL query as before.This code first sends a query to the database, and then goes into a while loop that checks whether the query result still has data that has not yet been fetched. If there is still data available, the chunks are fetched record by record, and this chunk is printed at each iteration. The output indeed shows the two records, printed separately, one after the other.In this toy example, this approach is not really useful, but if you’re working on a super complicated algorithm that involves millions of database records, you might want to consider a treatment of data in chunks, right?After all your hard work on the database,</p>
<p><strong>4. Disconnect</strong></p>
<p>don’t forget to disconnect from it.Give these more low-level DBI functions a try in the exercises.</p>
<p><strong>5. Let’s practice!</strong></p>
<p>In the next chapter, I’ll be back to tell you more about importing data from the web. See you there!</p>
</section>
<section id="send---fetch---clear" class="level2" data-number="2.9">
<h2 data-number="2.9" class="anchored" data-anchor-id="send---fetch---clear"><span class="header-section-number">2.9</span> Send - Fetch - Clear</h2>
<p>You’ve used <a href="http://www.rdocumentation.org/packages/DBI/functions/dbGetQuery" target="_blank" rel="noopener noreferrer"><code>dbGetQuery()</code></a> multiple times now. This is a virtual function from the <code>DBI</code> package, but is actually implemented by the <code>RMySQL</code> package. Behind the scenes, the following steps are performed:</p>
<ul>
<li>Sending the specified query with <a href="http://www.rdocumentation.org/packages/DBI/functions/dbSendQuery" target="_blank" rel="noopener noreferrer"><code>dbSendQuery()</code></a>;</li>
<li>Fetching the result of executing the query on the database with <a href="http://www.rdocumentation.org/packages/DBI/functions/dbFetch" target="_blank" rel="noopener noreferrer"><code>dbFetch()</code></a>;</li>
<li>Clearing the result with <a href="http://www.rdocumentation.org/packages/DBI/functions/dbClearResult" target="_blank" rel="noopener noreferrer"><code>dbClearResult()</code></a>.</li>
</ul>
<p>Let’s not use <a href="http://www.rdocumentation.org/packages/DBI/functions/dbGetQuery" target="_blank" rel="noopener noreferrer"><code>dbGetQuery()</code></a> this time and implement the steps above. This is tedious to write, but it gives you the ability to fetch the query’s result in chunks rather than all at once. You can do this by specifying the <code>n</code> argument inside <a href="http://www.rdocumentation.org/packages/DBI/functions/dbFetch" target="_blank" rel="noopener noreferrer"><code>dbFetch()</code></a>.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Inspect the <a href="http://www.rdocumentation.org/packages/DBI/functions/dbSendQuery" target="_blank" rel="noopener noreferrer"><code>dbSendQuery()</code></a> call that has already been coded for you. It selects the comments for the users with an id above 4.</li>
<li>Use <a href="http://www.rdocumentation.org/packages/DBI/functions/dbFetch" target="_blank" rel="noopener noreferrer"><code>dbFetch()</code></a> twice. In the first call, import only two records of the query result by setting the <code>n</code> argument to <code>2</code>. In the second call, import all remaining queries (don’t specify <code>n</code>). In both calls, simply print the resulting data frames.</li>
<li>Clear <code>res</code> with <a href="http://www.rdocumentation.org/packages/DBI/functions/dbClearResult" target="_blank" rel="noopener noreferrer"><code>dbClearResult()</code></a>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># Send query to the database</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>res <span class="ot">&lt;-</span> <span class="fu">dbSendQuery</span>(con, <span class="st">"SELECT * FROM comments WHERE user_id &gt; 4"</span>)</span>
<span id="cb15-3"><a href="#cb15-3"></a></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="co"># Use dbFetch() twice</span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="fu">dbFetch</span>(res, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["id"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["tweat_id"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["user_id"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["message"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"1022","2":"87","3":"7","4":"nice!"},{"1":"1000","2":"77","3":"7","4":"great!"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">dbFetch</span>(res)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["id"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["tweat_id"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["user_id"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["message"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"1011","2":"49","3":"5","4":"love it"},{"1":"1010","2":"88","3":"6","4":"yuck!"},{"1":"1030","2":"75","3":"6","4":"so easy!"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co"># Clear res</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="fu">dbClearResult</span>(res)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] TRUE</code></pre>
</div>
</div>
<p>Perfect! In our toy example, chopping up the fetches doesn’t make a lot of sense, but make sure to remember this technique when you’re struggling with huge databases!</p>
</section>
<section id="be-polite-and" class="level2" data-number="2.10">
<h2 data-number="2.10" class="anchored" data-anchor-id="be-polite-and"><span class="header-section-number">2.10</span> Be polite and …</h2>
<p>Every time you connect to a database using <a href="http://www.rdocumentation.org/packages/DBI/functions/dbConnect" target="_blank" rel="noopener noreferrer"><code>dbConnect()</code></a>, you’re creating a new connection to the database you’re referencing. <code>RMySQL</code> automatically specifies a maximum of open connections and closes some of the connections for you, but still: it’s always polite to manually disconnect from the database afterwards. You do this with the <a href="http://www.rdocumentation.org/packages/DBI/functions/dbDisconnect" target="_blank" rel="noopener noreferrer"><code>dbDisconnect()</code></a> function.</p>
<p>The code that connects you to the database is already available, can you finish the script?</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Using the technique you prefer, build a data frame <code>long_tweats</code>. It <strong>selects</strong> the <code>post</code> and <code>date</code> columns <strong>from</strong> the observations in <code>tweats</code> <strong>where</strong> the character length of the <code>post</code> variable exceeds <code>40</code>.</li>
<li>Print <code>long_tweats</code>.</li>
<li>Disconnect from the database by using <a href="http://www.rdocumentation.org/packages/DBI/functions/dbDisconnect" target="_blank" rel="noopener noreferrer"><code>dbDisconnect()</code></a>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="co"># Create the data frame  long_tweats</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>long_tweats <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="st">"SELECT post, date</span></span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="st">                                FROM tweats</span></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="st">                                WHERE CHAR_LENGTH(post) &gt; 40"</span>)</span>
<span id="cb19-5"><a href="#cb19-5"></a></span>
<span id="cb19-6"><a href="#cb19-6"></a><span class="co"># Print long_tweats</span></span>
<span id="cb19-7"><a href="#cb19-7"></a><span class="fu">print</span>(long_tweats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;                                                                  post
#&gt; 1                           wash strawberries. add ice. blend. enjoy.
#&gt; 2                       2 slices of bread. add cheese. grill. heaven.
#&gt; 3               open and crush avocado. add shrimps. perfect starter.
#&gt; 4 nachos. add tomato sauce, minced meat and cheese. oven for 10 mins.
#&gt;         date
#&gt; 1 2015-09-14
#&gt; 2 2015-09-21
#&gt; 3 2015-09-22
#&gt; 4 2015-09-22</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># Disconnect from the database</span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="fu">dbDisconnect</span>(con)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] TRUE</code></pre>
</div>
</div>
<p>Wonderful! This concludes the chapter on databases. Of course, there is tons more to learn about interfacing to databases and working with them as efficiently as possible, but that’s something for more advanced courses.</p>
</section>
</section>
<section id="importing-data-from-the-web-part-1" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> 3. Importing data from the web (Part 1)</h1>
<p>More and more of the information that data scientists are using resides on the web. Importing this data into R requires an understanding of the protocols used on the web. In this chapter, you’ll get a crash course in HTTP and learn to perform your own HTTP requests from inside R.</p>
<section id="http" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="http"><span class="header-section-number">3.1</span> HTTP</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. HTTP</strong></p>
<p>More and more of the information you’ll be working with as a data scientist resides on the web.</p>
<p><strong>2. Data on the web</strong></p>
<p>In fact, you’ve already worked with such data. Remember how you connected to a remote relational database to get the exact information you needed? The DBI package abstracted the fact that the data was in some remote location and fixed everything for you. In this chapter, you’ll look at file formats that are specifically useful when used for web technology, like the JSON file. I’m first going to discuss what actually happens behind the scenes when you’re importing data that’s on the web.To understand what happens in the examples that follow, I’m going to give you a crash course on the basics of HTTP,</p>
<p><strong>3. HTTP</strong></p>
<p>short for HyperText Transfer Protocol. It’s basically a system of rules for how data should be exchanged between computers. In short, HTTP is the language of the web. If you browse to a webpage for example, your computer, the client, is actually sending an</p>
<p><strong>4. HTTP</strong></p>
<p>HTTP request to the</p>
<p><strong>5. HTTP</strong></p>
<p>server. The server then sends back</p>
<p><strong>6. HTTP</strong></p>
<p>data representing the webpage, so it sends a response, and the webpage pops up on your screen. There are several HTTP Methods, as they are called. To simply get a webpage from a server,</p>
<p><strong>7. HTTP</strong></p>
<p>you use the GET Method, for example. Apart from GET, there are also other HTTP methods, but let’s not dive into those here.Instead, let’s have a look at some examples you might remember from the previous chapters, but this time all of the data will be residing on the web.</p>
<p><strong>8. Example: CSV</strong></p>
<p>Let’s start with the states-dot-csv file for example, that’s located at this link. The typical workflow would be to manually download the file through your favorite web browser, and then point to the path inside read dot csv.However,</p>
<p><strong>9. Example: CSV</strong></p>
<p>it can be done much easier! Have a look at this line, where we simply pass the URL as a character string.The result is exactly the same: a data frame with 5 observations and 4 variables. How could this be so easy? Well, behind the scenes, R figures out that you referred to a URL, and requests it using an HTTP GET request. The server responds with the csv file, that R can then read in just like it did before. Pretty nice, huh?Nowadays, there are many websites that only accept secure connections. You can only visit these websites, or download their files with the http_S_ prefix. Does R also know how to handle that? Well, let’s find out with the same CSV file, but this time</p>
<p><strong>10. Example: CSV</strong></p>
<p>with the HTTPS prefix.This works just the same, awesome. HTTPS support is baked in to R since R version 3 point 2 point 2.Experiment with importing data from the web</p>
</section>
<section id="import-flat-files-from-the-web" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="import-flat-files-from-the-web"><span class="header-section-number">3.2</span> Import flat files from the web</h2>
<p>In the video, you saw that the <code>utils</code> functions to import flat file data, such as <a href="http://www.rdocumentation.org/packages/utils/functions/read.table" target="_blank" rel="noopener noreferrer"><code>read.csv()</code></a> and <a href="http://www.rdocumentation.org/packages/utils/functions/read.table" target="_blank" rel="noopener noreferrer"><code>read.delim()</code></a>, are capable of automatically importing from URLs that point to flat files on the web.</p>
<p>You must be wondering whether Hadley Wickham’s alternative package, <code>readr</code>, is equally potent. Well, figure it out in this exercise! The URLs for both a <code>.csv</code> file as well as a <code>.delim</code> file are already coded for you. It’s up to you to actually import the data. If it works, that is…</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Load the <code>readr</code> package. It’s already installed on DataCamp’s servers.</li>
<li>Use <code>url_csv</code> to read in the <code>.csv</code> file it is pointing to. Use the <a href="https://cran.r-project.org/web/packages/readr/readr.pdf" target="_blank" rel="noopener noreferrer"><code>read_csv()</code></a> function. The <code>.csv</code> contains column names in the first row. Save the resulting data frame as <code>pools</code>.</li>
<li>Similarly, use <code>url_delim</code> to read in the online <code>.txt</code> file. Use the <a href="https://cran.r-project.org/web/packages/readr/readr.pdf" target="_blank" rel="noopener noreferrer"><code>read_tsv()</code></a> function and store the result as <code>potatoes</code>.</li>
<li>Print <code>pools</code> and <code>potatoes</code>. Looks correct?</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="co"># Load the readr package</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="fu">library</span>(readr)</span>
<span id="cb23-3"><a href="#cb23-3"></a></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="co"># Import the csv file: pools</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>url_csv <span class="ot">&lt;-</span> <span class="st">"http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/swimming_pools.csv"</span></span>
<span id="cb23-6"><a href="#cb23-6"></a></span>
<span id="cb23-7"><a href="#cb23-7"></a>pools <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(url_csv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Rows: 20 Columns: 4
#&gt; ── Column specification ────────────────────────────────────────────────────────
#&gt; Delimiter: ","
#&gt; chr (2): Name, Address
#&gt; dbl (2): Latitude, Longitude
#&gt; 
#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.
#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="co"># Import the txt file: potatoes</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>url_delim <span class="ot">&lt;-</span> <span class="st">"http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/potatoes.txt"</span></span>
<span id="cb25-3"><a href="#cb25-3"></a></span>
<span id="cb25-4"><a href="#cb25-4"></a>potatoes <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(url_delim)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Rows: 160 Columns: 8
#&gt; ── Column specification ────────────────────────────────────────────────────────
#&gt; Delimiter: "\t"
#&gt; dbl (8): area, temp, size, storage, method, texture, flavor, moistness
#&gt; 
#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.
#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="co"># Print pools and potatoes</span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="fu">print</span>(pools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 20 × 4
#&gt;    Name                                      Address             Latit…¹ Longi…²
#&gt;    &lt;chr&gt;                                     &lt;chr&gt;                 &lt;dbl&gt;   &lt;dbl&gt;
#&gt;  1 Acacia Ridge Leisure Centre               1391 Beaudesert Ro…   -27.6    153.
#&gt;  2 Bellbowrie Pool                           Sugarwood Street, …   -27.6    153.
#&gt;  3 Carole Park                               Cnr Boundary Road …   -27.6    153.
#&gt;  4 Centenary Pool (inner City)               400 Gregory Terrac…   -27.5    153.
#&gt;  5 Chermside Pool                            375 Hamilton Road,…   -27.4    153.
#&gt;  6 Colmslie Pool (Morningside)               400 Lytton Road, M…   -27.5    153.
#&gt;  7 Spring Hill Baths (inner City)            14 Torrington Stre…   -27.5    153.
#&gt;  8 Dunlop Park Pool (Corinda)                794 Oxley Road, Co…   -27.5    153.
#&gt;  9 Fortitude Valley Pool                     432 Wickham Street…   -27.5    153.
#&gt; 10 Hibiscus Sports Complex (upper MtGravatt) 90 Klumpp Road, Up…   -27.6    153.
#&gt; 11 Ithaca Pool ( Paddington)                 131 Caxton Street,…   -27.5    153.
#&gt; 12 Jindalee Pool                             11 Yallambee Road,…   -27.5    153.
#&gt; 13 Manly Pool                                1 Fairlead Crescen…   -27.5    153.
#&gt; 14 Mt Gravatt East Aquatic Centre            Cnr wecker Road an…   -27.5    153.
#&gt; 15 Musgrave Park Pool (South Brisbane)       100 Edmonstone Str…   -27.5    153.
#&gt; 16 Newmarket Pool                            71 Alderson Stret,…   -27.4    153.
#&gt; 17 Runcorn Pool                              37 Bonemill Road, …   -27.6    153.
#&gt; 18 Sandgate Pool                             231 Flinders Parad…   -27.3    153.
#&gt; 19 Langlands Parks Pool (Stones Corner)      5 Panitya Street, …   -27.5    153.
#&gt; 20 Yeronga Park Pool                         81 School Road, Ye…   -27.5    153.
#&gt; # … with abbreviated variable names ¹​Latitude, ²​Longitude</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="fu">print</span>(potatoes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 160 × 8
#&gt;     area  temp  size storage method texture flavor moistness
#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;
#&gt;  1     1     1     1       1      1     2.9    3.2       3  
#&gt;  2     1     1     1       1      2     2.3    2.5       2.6
#&gt;  3     1     1     1       1      3     2.5    2.8       2.8
#&gt;  4     1     1     1       1      4     2.1    2.9       2.4
#&gt;  5     1     1     1       1      5     1.9    2.8       2.2
#&gt;  6     1     1     1       2      1     1.8    3         1.7
#&gt;  7     1     1     1       2      2     2.6    3.1       2.4
#&gt;  8     1     1     1       2      3     3      3         2.9
#&gt;  9     1     1     1       2      4     2.2    3.2       2.5
#&gt; 10     1     1     1       2      5     2      2.8       1.9
#&gt; # … with 150 more rows</code></pre>
</div>
</div>
<p>Great! It seems to work without any additional problems!</p>
</section>
<section id="secure-importing" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="secure-importing"><span class="header-section-number">3.3</span> Secure importing</h2>
<p>In the previous exercises, you have been working with URLs that all start with <code>http://</code>. There is, however, a safer alternative to HTTP, namely HTTPS, which stands for HypterText Transfer Protocol Secure. Just remember this: HTTPS is relatively safe, HTTP is not.</p>
<p>Luckily for us, you can use the standard importing functions with <code>https://</code> connections since R version 3.2.2.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Take a look at the URL in <code>url_csv</code>. It uses a secure connection, <code>https://</code>.</li>
<li>Use <a href="http://www.rdocumentation.org/packages/utils/functions/read.table" target="_blank" rel="noopener noreferrer"><code>read.csv()</code></a> to import the file at <code>url_csv</code>. The <code>.csv</code> file it is referring to contains column names in the first row. Call it <code>pools1</code>.</li>
<li>Use <a href="https://cran.r-project.org/web/packages/readr/readr.pdf" target="_blank" rel="noopener noreferrer"><code>read_csv()</code></a> to read in the same <code>.csv</code> file in <code>url_csv</code>. Call it <code>pools2</code>.</li>
<li>Print out the structure of <code>pools1</code> and <code>pools2</code>. Looks like the importing went equally well as with a normal <code>http</code> connection!</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="co"># https URL to the swimming_pools csv file.</span></span>
<span id="cb31-2"><a href="#cb31-2"></a>url_csv <span class="ot">&lt;-</span> <span class="st">"https://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/swimming_pools.csv"</span></span>
<span id="cb31-3"><a href="#cb31-3"></a></span>
<span id="cb31-4"><a href="#cb31-4"></a><span class="co"># Import the file using read.csv(): pools1</span></span>
<span id="cb31-5"><a href="#cb31-5"></a>pools1 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(url_csv)</span>
<span id="cb31-6"><a href="#cb31-6"></a></span>
<span id="cb31-7"><a href="#cb31-7"></a><span class="co"># Import the file using read_csv(): pools2</span></span>
<span id="cb31-8"><a href="#cb31-8"></a>pools2 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(url_csv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Rows: 20 Columns: 4
#&gt; ── Column specification ────────────────────────────────────────────────────────
#&gt; Delimiter: ","
#&gt; chr (2): Name, Address
#&gt; dbl (2): Latitude, Longitude
#&gt; 
#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.
#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="co"># Print the structure of pools1 and pools2</span></span>
<span id="cb33-2"><a href="#cb33-2"></a><span class="fu">str</span>(pools1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 'data.frame':    20 obs. of  4 variables:
#&gt;  $ Name     : chr  "Acacia Ridge Leisure Centre" "Bellbowrie Pool" "Carole Park" "Centenary Pool (inner City)" ...
#&gt;  $ Address  : chr  "1391 Beaudesert Road, Acacia Ridge" "Sugarwood Street, Bellbowrie" "Cnr Boundary Road and Waterford Road Wacol" "400 Gregory Terrace, Spring Hill" ...
#&gt;  $ Latitude : num  -27.6 -27.6 -27.6 -27.5 -27.4 ...
#&gt;  $ Longitude: num  153 153 153 153 153 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="fu">str</span>(pools2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; spc_tbl_ [20 × 4] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
#&gt;  $ Name     : chr [1:20] "Acacia Ridge Leisure Centre" "Bellbowrie Pool" "Carole Park" "Centenary Pool (inner City)" ...
#&gt;  $ Address  : chr [1:20] "1391 Beaudesert Road, Acacia Ridge" "Sugarwood Street, Bellbowrie" "Cnr Boundary Road and Waterford Road Wacol" "400 Gregory Terrace, Spring Hill" ...
#&gt;  $ Latitude : num [1:20] -27.6 -27.6 -27.6 -27.5 -27.4 ...
#&gt;  $ Longitude: num [1:20] 153 153 153 153 153 ...
#&gt;  - attr(*, "spec")=
#&gt;   .. cols(
#&gt;   ..   Name = col_character(),
#&gt;   ..   Address = col_character(),
#&gt;   ..   Latitude = col_double(),
#&gt;   ..   Longitude = col_double()
#&gt;   .. )
#&gt;  - attr(*, "problems")=&lt;externalptr&gt;</code></pre>
</div>
</div>
<p>Great! It seems to work without any additional problems!</p>
</section>
<section id="downloading-files" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="downloading-files"><span class="header-section-number">3.4</span> Downloading files</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. Downloading files</strong></p>
<p>Similar to what we did in the previous video,</p>
<p><strong>2. Example: Excel</strong></p>
<p>let’s now use the readxl package to import Excel data stored at this URL. Will the read_excel work out of the box here?Apparently, readxl does not know how to handle Excel files that are stored on the web, although I expect that Hadley Wickham will add this functionality in future releases. Does this mean we’ll have to manually download the file, and then point to the local file like you would do before? Not at all!</p>
<p><strong>3. download.file()</strong></p>
<p>You can use download dot file here, a function from the utils package. Let’s first define the URL and the destination path, so where we want to place the downloaded file on our system. I’m going to call the file local_cities dot xlsx and place it my home directory.If you now use download dot file with the url as the first argument and the destination path as the second argument you’re good to go.Perfect. What download dot file did is simple. It performed a GET request to the URL you specified and stored the contents of the response to the location you specified. The last step is to use the read_excel function from before to import the Excel data from the local file this time. We can again use the dest_path variable here.</p>
<p><strong>4. Why download.file()?</strong></p>
<p>You might wonder why using download dot file is useful. The answer is again: reproducibility. You can specify URLs in your R scripts and download them through R functions instead of manually browsing the web which requires several mouseclicks.There’s much more to learn about performing GET requests and other HTTP requests from inside R. In some cases, you’ll have to authenticate yourself before you can download files, and pass additional parameters to your GET request. If you want to learn more about this, I suggest you check out the httr package by Hadley Wickham.</p>
</section>
<section id="import-excel-files-from-the-web" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="import-excel-files-from-the-web"><span class="header-section-number">3.5</span> Import Excel files from the web</h2>
<p>When you learned about <code>gdata</code>, it was already mentioned that <code>gdata</code> can handle <code>.xls</code> files that are on the internet. <code>readxl</code> can’t, at least not yet. The URL with which you’ll be working is already available in the sample code. You will import it once using <code>gdata</code> and once with the <code>readxl</code> package via a workaround.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Load the <code>readxl</code> and <code>gdata</code> packages. They are already installed on DataCamp’s servers.</li>
<li>Import the <code>.xls</code> file located at the URL <code>url_xls</code> using <a href="http://www.rdocumentation.org/packages/gdata/functions/read.xls" target="_blank" rel="noopener noreferrer"><code>read.xls()</code></a> from <code>gdata</code>. Store the resulting data frame as <code>excel_gdata</code>.</li>
<li>You can not use <a href="https://cran.r-project.org/web/packages/readxl/readxl.pdf" target="_blank" rel="noopener noreferrer"><code>read_excel()</code></a> directly with a URL. Complete the following instructions to work around this problem:</li>
<li>Use <a href="http://www.rdocumentation.org/packages/utils/functions/download.file" target="_blank" rel="noopener noreferrer"><code>download.file()</code></a> to download the <code>.xls</code> file behind the URL and store it locally as <code>"local_latitude.xls"</code>.</li>
<li>Call <a href="https://cran.r-project.org/web/packages/readxl/readxl.pdf" target="_blank" rel="noopener noreferrer"><code>read_excel()</code></a> to import the local file, <code>"local_latitude.xls"</code>. Name the resulting data frame <code>excel_readxl</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="co"># Load the readxl and gdata package</span></span>
<span id="cb37-2"><a href="#cb37-2"></a><span class="fu">library</span>(readxl)</span>
<span id="cb37-3"><a href="#cb37-3"></a><span class="fu">library</span>(gdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; gdata: read.xls support for 'XLS' (Excel 97-2004) files ENABLED.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; gdata: read.xls support for 'XLSX' (Excel 2007+) files ENABLED.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; 
#&gt; Attache Paket: 'gdata'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Das folgende Objekt ist maskiert 'package:stats':
#&gt; 
#&gt;     nobs</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Das folgende Objekt ist maskiert 'package:utils':
#&gt; 
#&gt;     object.size</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Das folgende Objekt ist maskiert 'package:base':
#&gt; 
#&gt;     startsWith</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="co"># Specification of url: url_xls</span></span>
<span id="cb45-2"><a href="#cb45-2"></a>url_xls <span class="ot">&lt;-</span> <span class="st">"http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/latitude.xls"</span></span>
<span id="cb45-3"><a href="#cb45-3"></a></span>
<span id="cb45-4"><a href="#cb45-4"></a><span class="co"># Import the .xls file with gdata: excel_gdata</span></span>
<span id="cb45-5"><a href="#cb45-5"></a>excel_gdata <span class="ot">&lt;-</span> <span class="fu">read.xls</span>(url_xls)</span>
<span id="cb45-6"><a href="#cb45-6"></a></span>
<span id="cb45-7"><a href="#cb45-7"></a><span class="co"># Download file behind URL, name it local_latitude.xls</span></span>
<span id="cb45-8"><a href="#cb45-8"></a><span class="fu">download.file</span>(url_xls, <span class="st">"data//local_latitude.xls"</span>)</span>
<span id="cb45-9"><a href="#cb45-9"></a></span>
<span id="cb45-10"><a href="#cb45-10"></a><span class="co"># Import the local .xls file with readxl: excel_readxl</span></span>
<span id="cb45-11"><a href="#cb45-11"></a>excel_readxl <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data//local_latitude.xls"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nice! It appears that <code>readxl</code> is not (yet?) able to deal with Excel files that are on the web. However, a simply workaround with <a href="http://www.rdocumentation.org/packages/utils/functions/download.file"><code>download.file()</code></a> fixes this.</p>
</section>
<section id="downloading-any-file-secure-or-not" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="downloading-any-file-secure-or-not"><span class="header-section-number">3.6</span> Downloading any file, secure or not</h2>
<p>In the previous exercise you’ve seen how you can read excel files on the web using the <code>read_excel</code> package by first downloading the file with the <a href="http://www.rdocumentation.org/packages/utils/functions/download.file" target="_blank" rel="noopener noreferrer"><code>download.file()</code></a> function.</p>
<p>There’s more: with <a href="http://www.rdocumentation.org/packages/utils/functions/download.file" target="_blank" rel="noopener noreferrer"><code>download.file()</code></a> you can download any kind of file from the web, using HTTP and HTTPS: images, executable files, but also <code>.RData</code> files. An <code>RData</code> file is very efficient format to store R data.</p>
<p>You can load data from an <code>RData</code> file using the <a href="http://www.rdocumentation.org/packages/base/functions/load" target="_blank" rel="noopener noreferrer"><code>load()</code></a> function, but this function does not accept a URL string as an argument. In this exercise, you’ll first download the <code>RData</code> file securely, and then import the local data file.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Take a look at the URL in <code>url_rdata</code>. It uses a secure connection, <code>https://</code>. This URL points to an <code>RData</code> file containing a data frame with some metrics on different kinds of wine.</li>
<li>Download the file at <code>url_rdata</code> using <a href="http://www.rdocumentation.org/packages/utils/functions/download.file" target="_blank" rel="noopener noreferrer"><code>download.file()</code></a>. Call the file <code>"wine_local.RData"</code> in your working directory.</li>
<li>Load the file you created, <code>wine_local.RData</code>, using the <a href="http://www.rdocumentation.org/packages/base/functions/load" target="_blank" rel="noopener noreferrer"><code>load()</code></a> function. It takes one argument, the path to the file, which is just the filename in our case. After running this command, the variable <code>wine</code> will automatically be available in your workspace.</li>
<li>Print out the <a href="http://www.rdocumentation.org/packages/base/functions/summary" target="_blank" rel="noopener noreferrer"><code>summary()</code></a> of the <code>wine</code> dataset.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="co"># https URL to the wine RData file.</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>url_rdata <span class="ot">&lt;-</span> <span class="st">"https://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/wine.RData"</span></span>
<span id="cb46-3"><a href="#cb46-3"></a></span>
<span id="cb46-4"><a href="#cb46-4"></a><span class="co"># Download the wine file to your working directory</span></span>
<span id="cb46-5"><a href="#cb46-5"></a><span class="fu">download.file</span>(url_rdata, <span class="st">"data/wine_local.RData"</span>)</span>
<span id="cb46-6"><a href="#cb46-6"></a></span>
<span id="cb46-7"><a href="#cb46-7"></a><span class="co"># Load the wine data into your workspace using load()</span></span>
<span id="cb46-8"><a href="#cb46-8"></a><span class="fu">load</span>(<span class="st">"data/wine_local.RData"</span>)</span>
<span id="cb46-9"><a href="#cb46-9"></a></span>
<span id="cb46-10"><a href="#cb46-10"></a><span class="co"># Print out the summary of the wine data</span></span>
<span id="cb46-11"><a href="#cb46-11"></a><span class="fu">summary</span>(wine)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;     Alcohol        Malic acid        Ash        Alcalinity of ash
#&gt;  Min.   :11.03   Min.   :0.74   Min.   :1.360   Min.   :10.60    
#&gt;  1st Qu.:12.36   1st Qu.:1.60   1st Qu.:2.210   1st Qu.:17.20    
#&gt;  Median :13.05   Median :1.87   Median :2.360   Median :19.50    
#&gt;  Mean   :12.99   Mean   :2.34   Mean   :2.366   Mean   :19.52    
#&gt;  3rd Qu.:13.67   3rd Qu.:3.10   3rd Qu.:2.560   3rd Qu.:21.50    
#&gt;  Max.   :14.83   Max.   :5.80   Max.   :3.230   Max.   :30.00    
#&gt;    Magnesium      Total phenols     Flavanoids    Nonflavanoid phenols
#&gt;  Min.   : 70.00   Min.   :0.980   Min.   :0.340   Min.   :0.1300      
#&gt;  1st Qu.: 88.00   1st Qu.:1.740   1st Qu.:1.200   1st Qu.:0.2700      
#&gt;  Median : 98.00   Median :2.350   Median :2.130   Median :0.3400      
#&gt;  Mean   : 99.59   Mean   :2.292   Mean   :2.023   Mean   :0.3623      
#&gt;  3rd Qu.:107.00   3rd Qu.:2.800   3rd Qu.:2.860   3rd Qu.:0.4400      
#&gt;  Max.   :162.00   Max.   :3.880   Max.   :5.080   Max.   :0.6600      
#&gt;  Proanthocyanins Color intensity       Hue           Proline      
#&gt;  Min.   :0.410   Min.   : 1.280   Min.   :1.270   Min.   : 278.0  
#&gt;  1st Qu.:1.250   1st Qu.: 3.210   1st Qu.:1.930   1st Qu.: 500.0  
#&gt;  Median :1.550   Median : 4.680   Median :2.780   Median : 672.0  
#&gt;  Mean   :1.587   Mean   : 5.055   Mean   :2.604   Mean   : 745.1  
#&gt;  3rd Qu.:1.950   3rd Qu.: 6.200   3rd Qu.:3.170   3rd Qu.: 985.0  
#&gt;  Max.   :3.580   Max.   :13.000   Max.   :4.000   Max.   :1680.0</code></pre>
</div>
</div>
<p>Great! Another way to load remote <code>RData</code> files is to use the <a href="http://www.rdocumentation.org/packages/base/functions/connections"><code>url()</code></a> function inside <a href="http://www.rdocumentation.org/packages/base/functions/load"><code>load()</code></a>. However, this will not save the <code>RData</code> file to a local file.</p>
</section>
<section id="reading-a-text-file-from-the-web" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="reading-a-text-file-from-the-web"><span class="header-section-number">3.7</span> Reading a text file from the web</h2>
<p>Wow, you’ve learned a lot of ways to import a data file from the web in the previous exercises. Let’s see if you can remember what’s possible and what’s not.</p>
<blockquote class="blockquote">
<h2 id="question-3" data-number="3.8" class="anchored"><span class="header-section-number">3.8</span> <em>Question</em></h2>
<p>Which way of importing data is <em>NOT</em> possible?<br> <br> ⬜ Importing a <code>.csv</code> file residing on the web using the URL with <a href="http://www.rdocumentation.org/packages/utils/functions/read.table"><code>read.csv()</code></a>: <code>read.csv("http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/swimming_pools.csv")</code><br> ⬜ Downloading a remote excel and saving it to your working directory using <a href="http://www.rdocumentation.org/packages/utils/functions/download.file"><code>download.file()</code></a>: <code>download.file("http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/latitude.xlsx", "lat.xlsx")</code><br> ⬜ Importing a <code>.txt</code> file residing on the web using the URL with <a href="https://cran.r-project.org/web/packages/readr/readr.pdf"><code>read_tsv()</code></a>: <code>read_tsv("http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/potatoes.txt")</code><br> ✅ Using the <a href="http://www.rdocumentation.org/packages/base/functions/load"><code>load()</code></a> function to load a remote <code>RData</code> file into the workspace with only the URL string: <code>load("https://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/wine.RData")</code><br></p>
</blockquote>
</section>
<section id="http-httr-1" class="level2" data-number="3.9">
<h2 data-number="3.9" class="anchored" data-anchor-id="http-httr-1"><span class="header-section-number">3.9</span> HTTP? httr! (1)</h2>
<p>Downloading a file from the Internet means sending a GET request and receiving the file you asked for. Internally, all the previously discussed functions use a GET request to download files.</p>
<p><code>httr</code> provides a convenient function, <a href="http://www.rdocumentation.org/packages/httr/functions/GET" target="_blank" rel="noopener noreferrer"><code>GET()</code></a> to execute this GET request. The result is a <code>response</code> object, that provides easy access to the status code, content-type and, of course, the actual content.</p>
<p>You can extract the content from the request using the <a href="http://www.rdocumentation.org/packages/httr/functions/content" target="_blank" rel="noopener noreferrer"><code>content()</code></a> function. At the time of writing, there are three ways to retrieve this content: as a raw object, as a character vector, or an R object, such as a list. If you don’t tell <a href="http://www.rdocumentation.org/packages/httr/functions/content" target="_blank" rel="noopener noreferrer"><code>content()</code></a> how to retrieve the content through the <code>as</code> argument, it’ll try its best to figure out which type is most appropriate based on the content-type.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Load the <code>httr</code> package. It’s already installed on DataCamp’s servers.</li>
<li>Use <a href="http://www.rdocumentation.org/packages/httr/functions/GET" target="_blank" rel="noopener noreferrer"><code>GET()</code></a> to get the URL stored in <code>url</code>. Store the result of this <code>GET()</code> call as <code>resp</code>.</li>
<li>Print the <code>resp</code> object. What information does it contain?</li>
<li>Get the content of <code>resp</code> using <a href="http://www.rdocumentation.org/packages/httr/functions/content" target="_blank" rel="noopener noreferrer"><code>content()</code></a> and set the <code>as</code> argument to <code>"raw"</code>. Assign the resulting vector to <code>raw_content</code>.</li>
<li>Print the first values in <code>raw_content</code> with <a href="http://www.rdocumentation.org/packages/utils/functions/head" target="_blank" rel="noopener noreferrer"><code>head()</code></a>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a><span class="co"># Load the httr package</span></span>
<span id="cb48-2"><a href="#cb48-2"></a><span class="fu">library</span>(httr)</span>
<span id="cb48-3"><a href="#cb48-3"></a></span>
<span id="cb48-4"><a href="#cb48-4"></a><span class="co"># Get the url, save response to resp</span></span>
<span id="cb48-5"><a href="#cb48-5"></a>url  <span class="ot">&lt;-</span> <span class="st">"http://www.example.com/"</span></span>
<span id="cb48-6"><a href="#cb48-6"></a>resp <span class="ot">&lt;-</span> <span class="fu">GET</span>(url) </span>
<span id="cb48-7"><a href="#cb48-7"></a></span>
<span id="cb48-8"><a href="#cb48-8"></a><span class="co"># Print resp</span></span>
<span id="cb48-9"><a href="#cb48-9"></a>resp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Response [http://www.example.com/]
#&gt;   Date: 2022-12-09 09:59
#&gt;   Status: 200
#&gt;   Content-Type: text/html; charset=UTF-8
#&gt;   Size: 1.26 kB
#&gt; &lt;!doctype html&gt;
#&gt; &lt;html&gt;
#&gt; &lt;head&gt;
#&gt;     &lt;title&gt;Example Domain&lt;/title&gt;
#&gt; 
#&gt;     &lt;meta charset="utf-8" /&gt;
#&gt;     &lt;meta http-equiv="Content-type" content="text/html; charset=utf-8" /&gt;
#&gt;     &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;
#&gt;     &lt;style type="text/css"&gt;
#&gt;     body {
#&gt; ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a><span class="co"># Get the raw content of resp: raw_content</span></span>
<span id="cb50-2"><a href="#cb50-2"></a>raw_content <span class="ot">&lt;-</span> <span class="fu">content</span>(resp, <span class="at">as =</span> <span class="st">"raw"</span>)</span>
<span id="cb50-3"><a href="#cb50-3"></a></span>
<span id="cb50-4"><a href="#cb50-4"></a><span class="co"># Print the head of raw_content</span></span>
<span id="cb50-5"><a href="#cb50-5"></a><span class="fu">head</span>(raw_content)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 3c 21 64 6f 63 74</code></pre>
</div>
</div>
<p>Great! The raw content of the response doesn’t make a lot of sense, does it? Luckily, the <a href="http://www.rdocumentation.org/packages/httr/functions/content"><code>content()</code></a> function by default, if you don’t specify the <code>as</code> argument, figures out what type of data you’re dealing with and parses it for you.</p>
</section>
<section id="http-httr-2" class="level2" data-number="3.10">
<h2 data-number="3.10" class="anchored" data-anchor-id="http-httr-2"><span class="header-section-number">3.10</span> HTTP? httr! (2)</h2>
<p>Web content does not limit itself to HTML pages and files stored on remote servers such as DataCamp’s Amazon S3 instances. There are many other data formats out there. A very common one is JSON. This format is very often used by so-called Web APIs, interfaces to web servers with which you as a client can communicate to get or store information in more complicated ways.</p>
<p>You’ll learn about Web APIs and JSON in the video and exercises that follow, but some experimentation never hurts, does it?</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Use <a href="http://www.rdocumentation.org/packages/httr/functions/GET" target="_blank" rel="noopener noreferrer"><code>GET()</code></a> to get the <code>url</code> that has already been specified in the sample code. Store the response as <code>resp</code>.</li>
<li>Print <code>resp</code>. What is the content-type?</li>
<li>Use <a href="http://www.rdocumentation.org/packages/httr/functions/content" target="_blank" rel="noopener noreferrer"><code>content()</code></a> to get the content of <code>resp</code>. Set the <code>as</code> argument to <code>"text"</code>. Simply print out the result. What do you see?</li>
<li>Use <a href="http://www.rdocumentation.org/packages/httr/functions/content" target="_blank" rel="noopener noreferrer"><code>content()</code></a> to get the content of <code>resp</code>, but this time do not specify a second argument. R figures out automatically that you’re dealing with a JSON, and converts the JSON to a named R list.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a><span class="co"># Get the url</span></span>
<span id="cb52-2"><a href="#cb52-2"></a>url <span class="ot">&lt;-</span> <span class="st">"http://www.omdbapi.com/?apikey=72bc447a&amp;t=Annie+Hall&amp;y=&amp;plot=short&amp;r=json"</span></span>
<span id="cb52-3"><a href="#cb52-3"></a></span>
<span id="cb52-4"><a href="#cb52-4"></a><span class="co"># Print resp</span></span>
<span id="cb52-5"><a href="#cb52-5"></a>resp <span class="ot">&lt;-</span> <span class="fu">GET</span>(url)</span>
<span id="cb52-6"><a href="#cb52-6"></a><span class="fu">print</span>(resp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Response [http://www.omdbapi.com/?apikey=72bc447a&amp;t=Annie+Hall&amp;y=&amp;plot=short&amp;r=json]
#&gt;   Date: 2022-12-09 09:59
#&gt;   Status: 200
#&gt;   Content-Type: application/json; charset=utf-8
#&gt;   Size: 1.02 kB</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a><span class="co"># Print content of resp as text</span></span>
<span id="cb54-2"><a href="#cb54-2"></a><span class="fu">print</span>(<span class="fu">content</span>(resp, <span class="at">as =</span> <span class="st">"text"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "{\"Title\":\"Annie Hall\",\"Year\":\"1977\",\"Rated\":\"PG\",\"Released\":\"20 Apr 1977\",\"Runtime\":\"93 min\",\"Genre\":\"Comedy, Romance\",\"Director\":\"Woody Allen\",\"Writer\":\"Woody Allen, Marshall Brickman\",\"Actors\":\"Woody Allen, Diane Keaton, Tony Roberts\",\"Plot\":\"Alvy Singer, a divorced Jewish comedian, reflects on his relationship with ex-lover Annie Hall, an aspiring nightclub singer, which ended abruptly just like his previous marriages.\",\"Language\":\"English, German\",\"Country\":\"United States\",\"Awards\":\"Won 4 Oscars. 31 wins &amp; 8 nominations total\",\"Poster\":\"https://m.media-amazon.com/images/M/MV5BZDg1OGQ4YzgtM2Y2NS00NjA3LWFjYTctMDRlMDI3NWE1OTUyXkEyXkFqcGdeQXVyMjUzOTY1NTc@._V1_SX300.jpg\",\"Ratings\":[{\"Source\":\"Internet Movie Database\",\"Value\":\"8.0/10\"},{\"Source\":\"Rotten Tomatoes\",\"Value\":\"97%\"},{\"Source\":\"Metacritic\",\"Value\":\"92/100\"}],\"Metascore\":\"92\",\"imdbRating\":\"8.0\",\"imdbVotes\":\"266,470\",\"imdbID\":\"tt0075686\",\"Type\":\"movie\",\"DVD\":\"05 Jul 2000\",\"BoxOffice\":\"$38,251,425\",\"Production\":\"N/A\",\"Website\":\"N/A\",\"Response\":\"True\"}"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a><span class="co"># Print content of resp</span></span>
<span id="cb56-2"><a href="#cb56-2"></a><span class="fu">print</span>(<span class="fu">content</span>(resp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; $Title
#&gt; [1] "Annie Hall"
#&gt; 
#&gt; $Year
#&gt; [1] "1977"
#&gt; 
#&gt; $Rated
#&gt; [1] "PG"
#&gt; 
#&gt; $Released
#&gt; [1] "20 Apr 1977"
#&gt; 
#&gt; $Runtime
#&gt; [1] "93 min"
#&gt; 
#&gt; $Genre
#&gt; [1] "Comedy, Romance"
#&gt; 
#&gt; $Director
#&gt; [1] "Woody Allen"
#&gt; 
#&gt; $Writer
#&gt; [1] "Woody Allen, Marshall Brickman"
#&gt; 
#&gt; $Actors
#&gt; [1] "Woody Allen, Diane Keaton, Tony Roberts"
#&gt; 
#&gt; $Plot
#&gt; [1] "Alvy Singer, a divorced Jewish comedian, reflects on his relationship with ex-lover Annie Hall, an aspiring nightclub singer, which ended abruptly just like his previous marriages."
#&gt; 
#&gt; $Language
#&gt; [1] "English, German"
#&gt; 
#&gt; $Country
#&gt; [1] "United States"
#&gt; 
#&gt; $Awards
#&gt; [1] "Won 4 Oscars. 31 wins &amp; 8 nominations total"
#&gt; 
#&gt; $Poster
#&gt; [1] "https://m.media-amazon.com/images/M/MV5BZDg1OGQ4YzgtM2Y2NS00NjA3LWFjYTctMDRlMDI3NWE1OTUyXkEyXkFqcGdeQXVyMjUzOTY1NTc@._V1_SX300.jpg"
#&gt; 
#&gt; $Ratings
#&gt; $Ratings[[1]]
#&gt; $Ratings[[1]]$Source
#&gt; [1] "Internet Movie Database"
#&gt; 
#&gt; $Ratings[[1]]$Value
#&gt; [1] "8.0/10"
#&gt; 
#&gt; 
#&gt; $Ratings[[2]]
#&gt; $Ratings[[2]]$Source
#&gt; [1] "Rotten Tomatoes"
#&gt; 
#&gt; $Ratings[[2]]$Value
#&gt; [1] "97%"
#&gt; 
#&gt; 
#&gt; $Ratings[[3]]
#&gt; $Ratings[[3]]$Source
#&gt; [1] "Metacritic"
#&gt; 
#&gt; $Ratings[[3]]$Value
#&gt; [1] "92/100"
#&gt; 
#&gt; 
#&gt; 
#&gt; $Metascore
#&gt; [1] "92"
#&gt; 
#&gt; $imdbRating
#&gt; [1] "8.0"
#&gt; 
#&gt; $imdbVotes
#&gt; [1] "266,470"
#&gt; 
#&gt; $imdbID
#&gt; [1] "tt0075686"
#&gt; 
#&gt; $Type
#&gt; [1] "movie"
#&gt; 
#&gt; $DVD
#&gt; [1] "05 Jul 2000"
#&gt; 
#&gt; $BoxOffice
#&gt; [1] "$38,251,425"
#&gt; 
#&gt; $Production
#&gt; [1] "N/A"
#&gt; 
#&gt; $Website
#&gt; [1] "N/A"
#&gt; 
#&gt; $Response
#&gt; [1] "True"</code></pre>
</div>
</div>
<p>Great! The fact that <code>httr</code> converts the JSON response body automatically to an R list is very convenient.</p>
</section>
</section>
<section id="importing-data-from-the-web-part-2" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> 4. Importing data from the web (Part 2)</h1>
<p>Importing data from the web is one thing; actually being able to extract useful information is another. Learn more about the JSON format to get one step closer to web domination.</p>
<section id="apis-json" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="apis-json"><span class="header-section-number">4.1</span> APIs &amp; JSON</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. APIs &amp; JSON</strong></p>
<p>In the previous video and exercises,</p>
<p><strong>2. Other data formats</strong></p>
<p>you’ve seen how you can get files from the web. In the last exercise, you also saw that there is also another format to represent data, namely JSON. The JSON format is very simple, concise and well-structured. On top of that, it is human-readable, but also easy to interpret and generate for machines. This makes it perfect to communicate with Web APIs.</p>
<p><strong>3. API</strong></p>
<p>What is an API, I hear you asking? Well, it’s short for Application Programming Interface. Very generally put, it is a set of routines and protocols for building software components. It is a way in which different software components interact. This can happen in thousands of ways, but we will only focus on the web API. Typically, this is an interface to get data and processed information from a server or to add data to a server, through the HTTP methods you learned about earlier.</p>
<p><strong>4. Twitter</strong></p>
<p>As an example, take Twitter. They also have an API, which you can check out here. After authentication, you can simply request particular URLs from twitter with the GET request, allowing you to get the tweets for a particular person for example. Twitter does all the work for you on their servers, and spits out the information you need. You can also use the API to programatically place comments on somebody’s tweets for example. The possible applications are endless. Say you’re an avid tweeter and want to find out which tweets had the most impact. Maybe some of your more controversial tweets caused a lot of retweets and reactions? With the raw data from Twitter’s API you can research this.But why are APIs and JSON useful in the first place? All the information is available on webpage already, right?</p>
<p><strong>5. Info on Rain Man (1988)</strong></p>
<p>Well, suppose you want to get some data on the movie Rain Man, from 1988. You could download the corresponding URL of IMDb, read it in, and then start programmatically searching your way through the HTML code, which is more than 4000 lines, to get the information you need. This is pretty error-prone and really slow.Luckily, there are alternatives. As it happens,</p>
<p><strong>6. Rain Man JSON (OMDb API)</strong></p>
<p>there’s an API called the OMDb API, able to give you information on pratically any movie you can think of. It simply takes a URL, with some additional parameters such as the id of the movie you want to get info about and what type the response should be, that the API understands.If you simply visit this web page, you will see something like this. This is a JSON, containing everything we need to know in a nicely structured format.To convert this JSON into an R data structure,</p>
<p><strong>7. jsonlite</strong></p>
<p>you can use the jsonlite package by Jeroen Ooms. The package is an improvement of earlier R packages to handle JSONs, where converting from and to JSONs is more consistent and robust, such that it works nicely in all use cases.</p>
<p><strong>8. Rain Man list in R</strong></p>
<p>Let’s install and load jsonlite, and then simply call fromJSON on the URL. This will download the JSON data for you and convert it to a named R list. We now have all the information in R, ready to do our analysis. This is way better than the messy HTML page where we would have to dig through to get the bits and pieces of interest, isn’t it?</p>
</section>
<section id="from-json-to-r" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="from-json-to-r"><span class="header-section-number">4.2</span> From JSON to R</h2>
<p>In the simplest setting, <a href="http://www.rdocumentation.org/packages/jsonlite/functions/fromJSON" target="_blank" rel="noopener noreferrer"><code>fromJSON()</code></a> can convert character strings that represent JSON data into a nicely structured R list. Give it a try!</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Load the <code>jsonlite</code> package. It’s already installed on DataCamp’s servers.</li>
<li><code>wine_json</code> represents a JSON. Use <code>fromJSON()</code> to convert it to a list, named <code>wine</code>.</li>
<li>Display the structure of <code>wine</code></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a><span class="co"># Load the jsonlite package</span></span>
<span id="cb58-2"><a href="#cb58-2"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb58-3"><a href="#cb58-3"></a></span>
<span id="cb58-4"><a href="#cb58-4"></a><span class="co"># wine_json is a JSON</span></span>
<span id="cb58-5"><a href="#cb58-5"></a>wine_json <span class="ot">&lt;-</span> <span class="st">'{"name":"Chateau Migraine", "year":1997, "alcohol_pct":12.4, "color":"red", "awarded":false}'</span></span>
<span id="cb58-6"><a href="#cb58-6"></a></span>
<span id="cb58-7"><a href="#cb58-7"></a><span class="co"># Convert wine_json into a list: wine</span></span>
<span id="cb58-8"><a href="#cb58-8"></a>wine <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(wine_json)</span>
<span id="cb58-9"><a href="#cb58-9"></a></span>
<span id="cb58-10"><a href="#cb58-10"></a><span class="co"># Print structure of wine</span></span>
<span id="cb58-11"><a href="#cb58-11"></a><span class="fu">str</span>(wine)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; List of 5
#&gt;  $ name       : chr "Chateau Migraine"
#&gt;  $ year       : int 1997
#&gt;  $ alcohol_pct: num 12.4
#&gt;  $ color      : chr "red"
#&gt;  $ awarded    : logi FALSE</code></pre>
</div>
</div>
</section>
<section id="quandl-api" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="quandl-api"><span class="header-section-number">4.3</span> Quandl API</h2>
<p>As Filip showed in the video, <a href="http://www.rdocumentation.org/packages/jsonlite/functions/fromJSON" target="_blank" rel="noopener noreferrer"><code>fromJSON()</code></a> also works if you pass a URL as a character string or the path to a local file that contains JSON data. Let’s try this out on the Quandl API, where you can fetch all sorts of financial and economical data.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li><code>quandl_url</code> represents a URL. Use <code>fromJSON()</code> directly on this URL and store the result in <code>quandl_data</code>.</li>
<li>Display the structure of <code>quandl_data</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a><span class="co"># Definition of quandl_url</span></span>
<span id="cb60-2"><a href="#cb60-2"></a>quandl_url <span class="ot">&lt;-</span> <span class="st">"https://www.quandl.com/api/v3/datasets/WIKI/FB/data.json?auth_token=i83asDsiWUUyfoypkgMz"</span></span>
<span id="cb60-3"><a href="#cb60-3"></a></span>
<span id="cb60-4"><a href="#cb60-4"></a><span class="co"># Import Quandl data: quandl_data</span></span>
<span id="cb60-5"><a href="#cb60-5"></a>quandl_data <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(quandl_url)</span>
<span id="cb60-6"><a href="#cb60-6"></a></span>
<span id="cb60-7"><a href="#cb60-7"></a><span class="co"># Print structure of quandl_data</span></span>
<span id="cb60-8"><a href="#cb60-8"></a><span class="fu">str</span>(quandl_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; List of 1
#&gt;  $ dataset_data:List of 10
#&gt;   ..$ limit       : NULL
#&gt;   ..$ transform   : NULL
#&gt;   ..$ column_index: NULL
#&gt;   ..$ column_names: chr [1:13] "Date" "Open" "High" "Low" ...
#&gt;   ..$ start_date  : chr "2012-05-18"
#&gt;   ..$ end_date    : chr "2018-03-27"
#&gt;   ..$ frequency   : chr "daily"
#&gt;   ..$ data        : chr [1:1472, 1:13] "2018-03-27" "2018-03-26" "2018-03-23" "2018-03-22" ...
#&gt;   ..$ collapse    : NULL
#&gt;   ..$ order       : NULL</code></pre>
</div>
</div>
<p>Great! You successfully imported JSON data directly from the web. If you have a close look at the structure of <code>quandl_data</code>, you’ll see that the <code>data</code> element is a matrix.</p>
</section>
<section id="omdb-api" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="omdb-api"><span class="header-section-number">4.4</span> OMDb API</h2>
<p>In the video, you saw how easy it is to interact with an API once you know how to formulate requests. You also saw how to fetch all information on Rain Man from OMDb. Simply perform a <a href="http://www.rdocumentation.org/packages/httr/functions/GET" target="_blank" rel="noopener noreferrer"><code>GET()</code></a> call, and next ask for the contents with the <a href="http://www.rdocumentation.org/packages/httr/functions/content" target="_blank" rel="noopener noreferrer"><code>content()</code></a> function. This <a href="http://www.rdocumentation.org/packages/httr/functions/content" target="_blank" rel="noopener noreferrer"><code>content()</code></a> function, which is part of the <code>httr</code> package, uses <code>jsonlite</code> behind the scenes to import the JSON data into R.</p>
<p>However, by now you also know that <code>jsonlite</code> can handle URLs itself. Simply passing the request URL to <a href="http://www.rdocumentation.org/packages/jsonlite/functions/fromJSON" target="_blank" rel="noopener noreferrer"><code>fromJSON()</code></a> will get your data into R. In this exercise, you will be using this technique to compare the release year of two movies in the Open Movie Database.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Two URLs are included in the sample code, as well as a <code>fromJSON()</code> call to build <code>sw4</code>. Add a similar call to build <code>sw3</code>.</li>
<li>Print out the element named <code>Title</code> of both <code>sw4</code> and <code>sw3</code>. You can use the <code>$</code> operator. What movies are we dealing with here?</li>
<li>Write an expression that evaluates to <code>TRUE</code> if <code>sw4</code> was released later than <code>sw3</code>. This information is stored in the <code>Year</code> element of the named lists.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a><span class="co"># Definition of the URLs</span></span>
<span id="cb62-2"><a href="#cb62-2"></a>url_sw4 <span class="ot">&lt;-</span> <span class="st">"http://www.omdbapi.com/?apikey=72bc447a&amp;i=tt0076759&amp;r=json"</span></span>
<span id="cb62-3"><a href="#cb62-3"></a>url_sw3 <span class="ot">&lt;-</span> <span class="st">"http://www.omdbapi.com/?apikey=72bc447a&amp;i=tt0121766&amp;r=json"</span></span>
<span id="cb62-4"><a href="#cb62-4"></a></span>
<span id="cb62-5"><a href="#cb62-5"></a><span class="co"># Import two URLs with fromJSON(): sw4 and sw3</span></span>
<span id="cb62-6"><a href="#cb62-6"></a>sw4 <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(url_sw4)</span>
<span id="cb62-7"><a href="#cb62-7"></a>sw3 <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(url_sw3)</span>
<span id="cb62-8"><a href="#cb62-8"></a></span>
<span id="cb62-9"><a href="#cb62-9"></a></span>
<span id="cb62-10"><a href="#cb62-10"></a><span class="co"># Print out the Title element of both lists</span></span>
<span id="cb62-11"><a href="#cb62-11"></a><span class="fu">print</span>(sw4<span class="sc">$</span>Title)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "Star Wars: Episode IV - A New Hope"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a><span class="fu">print</span>(sw3<span class="sc">$</span>Title)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "Star Wars: Episode III - Revenge of the Sith"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a><span class="co"># Is the release year of sw4 later than sw3?</span></span>
<span id="cb66-2"><a href="#cb66-2"></a>sw4<span class="sc">$</span>Year <span class="sc">&gt;</span> sw3<span class="sc">$</span>Year</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] FALSE</code></pre>
</div>
</div>
<p>Well done! The fourth episode of the Star Wars saga was released before the third one! Enough of the <a href="http://www.rdocumentation.org/packages/jsonlite/functions/fromJSON"><code>fromJSON()</code></a> now. Let’s try to convert some R data into JSON format now.</p>
</section>
<section id="json-jsonlite" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="json-jsonlite"><span class="header-section-number">4.5</span> JSON &amp; jsonlite</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. JSON &amp; jsonlite</strong></p>
<p>In this video, let’s dive into the JSON format and the jsonlite package some more.So, what does a typical JSON look like? I’ll try to be short on this.You have JSON objects, and you have JSON arrays.</p>
<p><strong>2. JSON object</strong></p>
<p>A typical JSON object looks like this. It’s unordered collection of name/value pairs. where the name is a string and the value can be a string, a number, boolean, null, another JSON object, or a JSON array.</p>
<p><strong>3. JSON object</strong></p>
<p>Let’s convert this JSON to an R string by wrapping it in quotes. I use single quotes here so that I don’t have to escape every double quote. Now let’s pass this string to jsonlite’s fromJSON function, that converts a JSON to R code, and ask for the structure of the result.The result is a named list in R, which contains the same information. You can also see that the elements have different classes: we have characters, integers and logicals.</p>
<p><strong>4. JSON array</strong></p>
<p>Next, there are also JSON arrays. This is an ordered sequence of zero or more values, like this one.Calling fromJSON on this JSON structure results in an integer vector.However, this actually is a simplification, because JSON arrays, just like JSON objects, are heterogeneous; they can contain elements of different types. This JSON array for example, is perfectly valid as well.Trying to convert this JSON into R, give the following result.The numbers were coerced to characters, as was the logical value. The null keyword was converted to an NA in R. This had to be done because R vectors can only contain a single basic type, remember?Both the JSON object as the JSON array can contain other JSON objects and arrays, how would that work?</p>
<p><strong>5. JSON Nesting</strong></p>
<p>Suppose we add some information to the JSON object from before. This time, I formatted the JSON such that it becomes more readable.We can extend it as follows.</p>
<p><strong>6. JSON Nesting</strong></p>
<p>Let’s fromJSON this, and see what we get.We get a nested named list, makes perfect sense if you ask me.</p>
<p><strong>7. JSON Array of JSON Objects</strong></p>
<p>Finally, let’s build an array of JSON objects, of three persons for example, like this.Wow, this was unexpected. We simply got a data frame. But if you think of it, this is a great mapping. We have three JSON objects, on Frank, Julie and Zach, and they all have the same fields, id and name. This perfectly fits the description of an R data frame. The wonderful thing is that jsonlite deals with all of this for us. There are many more use cases of JSON objects and arrays, but I won’t go through each and every one of them.next to fromJSON,</p>
<p><strong>8. Other jsonlite functions</strong></p>
<p>there are other useful functions in the jsonlite package, such as tojson, to convert r data structures back to json, and prettify and minify, to change how jsons are displayed. you’ll learn all about these in the exercises that follow!If you use the jsonlite package you normally won’t be dealing with JSONs directly, but it’s good to have a basic level of understanding of them.</p>
</section>
<section id="json-practice-1" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="json-practice-1"><span class="header-section-number">4.6</span> JSON practice (1)</h2>
<p>JSON is built on two structures: objects and arrays. To help you experiment with these, two JSON strings are included in the sample code. It’s up to you to change them appropriately and then call <code>jsonlite</code>’s <a href="http://www.rdocumentation.org/packages/jsonlite/functions/fromJSON" target="_blank" rel="noopener noreferrer"><code>fromJSON()</code></a> function on them each time.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Change the assignment of <code>json1</code> such that the R vector after conversion contains the numbers 1 up to 6, in ascending order. Next, call <a href="http://www.rdocumentation.org/packages/jsonlite/functions/fromJSON" target="_blank" rel="noopener noreferrer"><code>fromJSON()</code></a> on <code>json1</code>.</li>
<li>Adapt the code for <code>json2</code> such that it’s converted to a named list with two elements: <code>a</code>, containing the numbers 1, 2 and 3 and <code>b</code>, containing the numbers 4, 5 and 6. Next, call <a href="http://www.rdocumentation.org/packages/jsonlite/functions/fromJSON" target="_blank" rel="noopener noreferrer"><code>fromJSON()</code></a> on <code>json2</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a><span class="co"># Challenge 1</span></span>
<span id="cb68-2"><a href="#cb68-2"></a>json1 <span class="ot">&lt;-</span> <span class="st">'[1, 2, 3, 4, 5, 6]'</span></span>
<span id="cb68-3"><a href="#cb68-3"></a><span class="fu">fromJSON</span>(json1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 1 2 3 4 5 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a><span class="co"># Challenge 2</span></span>
<span id="cb70-2"><a href="#cb70-2"></a>json2 <span class="ot">&lt;-</span> <span class="st">'{"a": [1, 2, 3], "b": [4, 5, 6]}'</span></span>
<span id="cb70-3"><a href="#cb70-3"></a><span class="fu">fromJSON</span>(json2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; $a
#&gt; [1] 1 2 3
#&gt; 
#&gt; $b
#&gt; [1] 4 5 6</code></pre>
</div>
</div>
</section>
<section id="json-practice-2" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="json-practice-2"><span class="header-section-number">4.7</span> JSON practice (2)</h2>
<p>We prepared two more JSON strings in the sample code. Can you change them and call <code>jsonlite</code>’s <a href="http://www.rdocumentation.org/packages/jsonlite/functions/fromJSON" target="_blank" rel="noopener noreferrer"><code>fromJSON()</code></a> function on them, similar to the previous exercise?</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Remove characters from <code>json1</code> to build a 2 by 2 matrix containing only 1, 2, 3 and 4. Call <a href="http://www.rdocumentation.org/packages/jsonlite/functions/fromJSON" target="_blank" rel="noopener noreferrer"><code>fromJSON()</code></a> on <code>json1</code>.</li>
<li>Add characters to <code>json2</code> such that the data frame in which the json is converted contains an additional observation in the last row. For this observations, <code>a</code> equals 5 and <code>b</code> equals 6. Call <a href="http://www.rdocumentation.org/packages/jsonlite/functions/fromJSON" target="_blank" rel="noopener noreferrer"><code>fromJSON()</code></a> one last time, on <code>json2</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a><span class="co"># Challenge 1</span></span>
<span id="cb72-2"><a href="#cb72-2"></a>json1 <span class="ot">&lt;-</span> <span class="st">'[[1, 2], [3, 4]]'</span></span>
<span id="cb72-3"><a href="#cb72-3"></a><span class="fu">fromJSON</span>(json1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;      [,1] [,2]
#&gt; [1,]    1    2
#&gt; [2,]    3    4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1"></a><span class="co"># Challenge 2</span></span>
<span id="cb74-2"><a href="#cb74-2"></a>json2 <span class="ot">&lt;-</span> <span class="st">'[{"a": 1, "b": 2}, {"a": 3, "b": 4}, {"a": 5, "b": 6}]'</span></span>
<span id="cb74-3"><a href="#cb74-3"></a><span class="fu">fromJSON</span>(json2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["a"],"name":[1],"type":["int"],"align":["right"]},{"label":["b"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"1","2":"2","_rn_":"1"},{"1":"3","2":"4","_rn_":"2"},{"1":"5","2":"6","_rn_":"3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Great! As you can see different JSON data structures will lead to different data structures in <code>R</code>.</p>
</section>
<section id="tojson" class="level2" data-number="4.8">
<h2 data-number="4.8" class="anchored" data-anchor-id="tojson"><span class="header-section-number">4.8</span> toJSON()</h2>
<p>Apart from converting JSON to R with <a href="http://www.rdocumentation.org/packages/jsonlite/functions/fromJSON" target="_blank" rel="noopener noreferrer"><code>fromJSON()</code></a>, you can also use <a href="http://www.rdocumentation.org/packages/jsonlite/functions/fromJSON" target="_blank" rel="noopener noreferrer"><code>toJSON()</code></a> to convert R data to a JSON format. In its most basic use, you simply pass this function an R object to convert to a JSON. The result is an R object of the class <code>json</code>, which is basically a character string representing that JSON.</p>
<p>For this exercise, you will be working with a <code>.csv</code> file containing information on the amount of desalinated water that is produced around the world. As you’ll see, it contains a lot of missing values. This data can be found on the URL that is specified in the sample code.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Use a function of the <code>utils</code> package to import the <code>.csv</code> file directly from the URL specified in <code>url_csv</code>. Save the resulting data frame as <code>water</code>. Make sure that strings are <em>not</em> imported as factors.</li>
<li>Convert the data frame <code>water</code> to a JSON. Call the resulting object <code>water_json</code>.</li>
<li>Print out <code>water_json</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a><span class="co"># URL pointing to the .csv file</span></span>
<span id="cb75-2"><a href="#cb75-2"></a>url_csv <span class="ot">&lt;-</span> <span class="st">"http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/water.csv"</span></span>
<span id="cb75-3"><a href="#cb75-3"></a></span>
<span id="cb75-4"><a href="#cb75-4"></a><span class="co"># Import the .csv file located at url_csv</span></span>
<span id="cb75-5"><a href="#cb75-5"></a>water <span class="ot">&lt;-</span> utils<span class="sc">::</span><span class="fu">read.csv</span>(url_csv, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb75-6"><a href="#cb75-6"></a></span>
<span id="cb75-7"><a href="#cb75-7"></a><span class="co"># Convert the data file according to the requirements</span></span>
<span id="cb75-8"><a href="#cb75-8"></a>water_json <span class="ot">&lt;-</span> <span class="fu">toJSON</span>(water)</span>
<span id="cb75-9"><a href="#cb75-9"></a></span>
<span id="cb75-10"><a href="#cb75-10"></a><span class="co"># Print out water_json</span></span>
<span id="cb75-11"><a href="#cb75-11"></a><span class="fu">print</span>(water_json)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [{"water":"Algeria","X1992":0.064,"X2002":0.017},{"water":"American Samoa"},{"water":"Angola","X1992":0.0001,"X2002":0.0001},{"water":"Antigua and Barbuda","X1992":0.0033},{"water":"Argentina","X1992":0.0007,"X1997":0.0007,"X2002":0.0007},{"water":"Australia","X1992":0.0298,"X2002":0.0298},{"water":"Austria","X1992":0.0022,"X2002":0.0022},{"water":"Bahamas","X1992":0.0013,"X2002":0.0074},{"water":"Bahrain","X1992":0.0441,"X2002":0.0441,"X2007":0.1024},{"water":"Barbados","X2007":0.0146},{"water":"British Virgin Islands","X2007":0.0042},{"water":"Canada","X1992":0.0027,"X2002":0.0027},{"water":"Cape Verde","X1992":0.002,"X1997":0.0017},{"water":"Cayman Islands","X1992":0.0033},{"water":"Central African Rep."},{"water":"Chile","X1992":0.0048,"X2002":0.0048},{"water":"Colombia","X1992":0.0027,"X2002":0.0027},{"water":"Cuba","X1992":0.0069,"X1997":0.0069,"X2002":0.0069},{"water":"Cyprus","X1992":0.003,"X1997":0.003,"X2002":0.0335},{"water":"Czech Rep.","X1992":0.0002,"X2002":0.0002},{"water":"Denmark","X1992":0.015,"X2002":0.015},{"water":"Djibouti","X1992":0.0001,"X2002":0.0001},{"water":"Ecuador","X1992":0.0022,"X1997":0.0022,"X2002":0.0022},{"water":"Egypt","X1992":0.025,"X1997":0.025,"X2002":0.1},{"water":"El Salvador","X1992":0.0001,"X2002":0.0001},{"water":"Finland","X1992":0.0001,"X2002":0.0001},{"water":"France","X1992":0.0117,"X2002":0.0117},{"water":"Gibraltar","X1992":0.0077},{"water":"Greece","X1992":0.01,"X2002":0.01},{"water":"Honduras","X1992":0.0002,"X2002":0.0002},{"water":"Hungary","X1992":0.0002,"X2002":0.0002},{"water":"India","X1997":0.0005,"X2002":0.0005},{"water":"Indonesia","X1992":0.0187,"X2002":0.0187},{"water":"Iran","X1992":0.003,"X1997":0.003,"X2002":0.003,"X2007":0.2},{"water":"Iraq","X1997":0.0074,"X2002":0.0074},{"water":"Ireland","X1992":0.0002,"X2002":0.0002},{"water":"Israel","X1992":0.0256,"X2002":0.0256,"X2007":0.14},{"water":"Italy","X1992":0.0973,"X2002":0.0973},{"water":"Jamaica","X1992":0.0005,"X1997":0.0005,"X2002":0.0005},{"water":"Japan","X1997":0.04,"X2002":0.04},{"water":"Jordan","X1997":0.002,"X2007":0.0098},{"water":"Kazakhstan","X1997":1.328,"X2002":1.328},{"water":"Kuwait","X1992":0.507,"X1997":0.231,"X2002":0.4202},{"water":"Lebanon","X2007":0.0473},{"water":"Libya","X2002":0.018},{"water":"Malaysia","X1992":0.0043,"X2002":0.0043},{"water":"Maldives","X1992":0.0004},{"water":"Malta","X1992":0.024,"X1997":0.031,"X2002":0.031},{"water":"Marshall Islands","X1992":0.0007},{"water":"Mauritania","X1992":0.002,"X2002":0.002},{"water":"Mexico","X1992":0.0307,"X2002":0.0307},{"water":"Morocco","X1992":0.0034,"X1997":0.0034,"X2002":0.007},{"water":"Namibia","X1992":0.0003,"X2002":0.0003},{"water":"Netherlands Antilles","X1992":0.063},{"water":"Nicaragua","X1992":0.0002,"X2002":0.0002},{"water":"Nigeria","X1992":0.003,"X2002":0.003},{"water":"Norway","X1992":0.0001,"X2002":0.0001},{"water":"Oman","X1997":0.034,"X2002":0.034,"X2007":0.109},{"water":"Peru","X1992":0.0054,"X2002":0.0054},{"water":"Poland","X1992":0.007,"X2002":0.007},{"water":"Portugal","X1992":0.0016,"X2002":0.0016},{"water":"Qatar","X1992":0.065,"X1997":0.099,"X2002":0.099,"X2007":0.18},{"water":"Saudi Arabia","X1992":0.683,"X1997":0.727,"X2002":0.863,"X2007":1.033},{"water":"Senegal","X1992":0,"X2002":0},{"water":"Somalia","X1992":0.0001,"X2002":0.0001},{"water":"South Africa","X1992":0.018,"X2002":0.018},{"water":"Spain","X1992":0.1002,"X2002":0.1002},{"water":"Sudan","X1992":0.0004,"X1997":0.0004,"X2002":0.0004},{"water":"Sweden","X1992":0.0002,"X2002":0.0002},{"water":"Trinidad and Tobago","X2007":0.036},{"water":"Tunisia","X1992":0.008,"X2002":0.013},{"water":"Turkey","X1992":0.0005,"X2002":0.0005,"X2007":0.0005},{"water":"United Arab Emirates","X1992":0.163,"X1997":0.385,"X2007":0.95},{"water":"United Kingdom","X1992":0.0333,"X2002":0.0333},{"water":"United States","X1992":0.58,"X2002":0.58},{"water":"Venezuela","X1992":0.0052,"X2002":0.0052},{"water":"Yemen, Rep.","X1992":0.01,"X2002":0.01}]</code></pre>
</div>
</div>
<p>Congratulations! As you can see, the JSON you printed out isn’t easy to read. In the next exercise, you will print out some more JSONs, and explore ways to prettify or minify the output.</p>
</section>
<section id="minify-and-prettify" class="level2" data-number="4.9">
<h2 data-number="4.9" class="anchored" data-anchor-id="minify-and-prettify"><span class="header-section-number">4.9</span> Minify and prettify</h2>
<p>JSONs can come in different formats. Take these two JSONs, that are in fact exactly the same: the first one is in a minified format, the second one is in a pretty format with indentation, whitespace and new lines:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource json number-lines code-with-copy"><code class="sourceCode json"><span id="cb77-1"><a href="#cb77-1"></a><span class="er">#</span> <span class="er">Mini</span></span>
<span id="cb77-2"><a href="#cb77-2"></a><span class="fu">{</span><span class="dt">"a"</span><span class="fu">:</span><span class="dv">1</span><span class="fu">,</span><span class="dt">"b"</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">"c"</span><span class="fu">:{</span><span class="dt">"x"</span><span class="fu">:</span><span class="dv">5</span><span class="fu">,</span><span class="dt">"y"</span><span class="fu">:</span><span class="dv">6</span><span class="fu">}}</span></span>
<span id="cb77-3"><a href="#cb77-3"></a></span>
<span id="cb77-4"><a href="#cb77-4"></a><span class="er">#</span> <span class="er">Pretty</span></span>
<span id="cb77-5"><a href="#cb77-5"></a><span class="fu">{</span></span>
<span id="cb77-6"><a href="#cb77-6"></a>  <span class="dt">"a"</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb77-7"><a href="#cb77-7"></a>  <span class="dt">"b"</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span></span>
<span id="cb77-8"><a href="#cb77-8"></a>  <span class="dt">"c"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb77-9"><a href="#cb77-9"></a>    <span class="dt">"x"</span><span class="fu">:</span> <span class="dv">5</span><span class="fu">,</span></span>
<span id="cb77-10"><a href="#cb77-10"></a>    <span class="dt">"y"</span><span class="fu">:</span> <span class="dv">6</span></span>
<span id="cb77-11"><a href="#cb77-11"></a>  <span class="fu">}</span></span>
<span id="cb77-12"><a href="#cb77-12"></a><span class="fu">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Unless you’re a computer, you surely prefer the second version. However, the standard form that <a href="http://www.rdocumentation.org/packages/jsonlite/functions/fromJSON" target="_blank" rel="noopener noreferrer"><code>toJSON()</code></a> returns, is the minified version, as it is more concise. You can adapt this behavior by setting the <code>pretty</code> argument inside <a href="http://www.rdocumentation.org/packages/jsonlite/functions/fromJSON" target="_blank" rel="noopener noreferrer"><code>toJSON()</code></a> to <code>TRUE</code>. If you already have a JSON string, you can use <a href="http://www.rdocumentation.org/packages/jsonlite/functions/prettify" target="_blank" rel="noopener noreferrer"><code>prettify()</code></a> or <a href="http://www.rdocumentation.org/packages/jsonlite/functions/prettify" target="_blank" rel="noopener noreferrer"><code>minify()</code></a> to make the JSON pretty or as concise as possible.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Convert the <code>mtcars</code> dataset, which is available in R by default, to a <em>pretty</em> <code>JSON</code>. Call the resulting JSON <code>pretty_json</code>.</li>
<li>Print out <code>pretty_json</code>. Can you understand the output easily?</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1"></a><span class="co"># Convert mtcars to a pretty JSON: pretty_json</span></span>
<span id="cb78-2"><a href="#cb78-2"></a>pretty_json <span class="ot">&lt;-</span> <span class="fu">toJSON</span>(mtcars, <span class="at">pretty =</span> T)</span>
<span id="cb78-3"><a href="#cb78-3"></a></span>
<span id="cb78-4"><a href="#cb78-4"></a><span class="co"># Print pretty_json</span></span>
<span id="cb78-5"><a href="#cb78-5"></a>pretty_json</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [
#&gt;   {
#&gt;     "mpg": 21,
#&gt;     "cyl": 6,
#&gt;     "disp": 160,
#&gt;     "hp": 110,
#&gt;     "drat": 3.9,
#&gt;     "wt": 2.62,
#&gt;     "qsec": 16.46,
#&gt;     "vs": 0,
#&gt;     "am": 1,
#&gt;     "gear": 4,
#&gt;     "carb": 4,
#&gt;     "_row": "Mazda RX4"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 21,
#&gt;     "cyl": 6,
#&gt;     "disp": 160,
#&gt;     "hp": 110,
#&gt;     "drat": 3.9,
#&gt;     "wt": 2.875,
#&gt;     "qsec": 17.02,
#&gt;     "vs": 0,
#&gt;     "am": 1,
#&gt;     "gear": 4,
#&gt;     "carb": 4,
#&gt;     "_row": "Mazda RX4 Wag"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 22.8,
#&gt;     "cyl": 4,
#&gt;     "disp": 108,
#&gt;     "hp": 93,
#&gt;     "drat": 3.85,
#&gt;     "wt": 2.32,
#&gt;     "qsec": 18.61,
#&gt;     "vs": 1,
#&gt;     "am": 1,
#&gt;     "gear": 4,
#&gt;     "carb": 1,
#&gt;     "_row": "Datsun 710"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 21.4,
#&gt;     "cyl": 6,
#&gt;     "disp": 258,
#&gt;     "hp": 110,
#&gt;     "drat": 3.08,
#&gt;     "wt": 3.215,
#&gt;     "qsec": 19.44,
#&gt;     "vs": 1,
#&gt;     "am": 0,
#&gt;     "gear": 3,
#&gt;     "carb": 1,
#&gt;     "_row": "Hornet 4 Drive"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 18.7,
#&gt;     "cyl": 8,
#&gt;     "disp": 360,
#&gt;     "hp": 175,
#&gt;     "drat": 3.15,
#&gt;     "wt": 3.44,
#&gt;     "qsec": 17.02,
#&gt;     "vs": 0,
#&gt;     "am": 0,
#&gt;     "gear": 3,
#&gt;     "carb": 2,
#&gt;     "_row": "Hornet Sportabout"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 18.1,
#&gt;     "cyl": 6,
#&gt;     "disp": 225,
#&gt;     "hp": 105,
#&gt;     "drat": 2.76,
#&gt;     "wt": 3.46,
#&gt;     "qsec": 20.22,
#&gt;     "vs": 1,
#&gt;     "am": 0,
#&gt;     "gear": 3,
#&gt;     "carb": 1,
#&gt;     "_row": "Valiant"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 14.3,
#&gt;     "cyl": 8,
#&gt;     "disp": 360,
#&gt;     "hp": 245,
#&gt;     "drat": 3.21,
#&gt;     "wt": 3.57,
#&gt;     "qsec": 15.84,
#&gt;     "vs": 0,
#&gt;     "am": 0,
#&gt;     "gear": 3,
#&gt;     "carb": 4,
#&gt;     "_row": "Duster 360"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 24.4,
#&gt;     "cyl": 4,
#&gt;     "disp": 146.7,
#&gt;     "hp": 62,
#&gt;     "drat": 3.69,
#&gt;     "wt": 3.19,
#&gt;     "qsec": 20,
#&gt;     "vs": 1,
#&gt;     "am": 0,
#&gt;     "gear": 4,
#&gt;     "carb": 2,
#&gt;     "_row": "Merc 240D"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 22.8,
#&gt;     "cyl": 4,
#&gt;     "disp": 140.8,
#&gt;     "hp": 95,
#&gt;     "drat": 3.92,
#&gt;     "wt": 3.15,
#&gt;     "qsec": 22.9,
#&gt;     "vs": 1,
#&gt;     "am": 0,
#&gt;     "gear": 4,
#&gt;     "carb": 2,
#&gt;     "_row": "Merc 230"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 19.2,
#&gt;     "cyl": 6,
#&gt;     "disp": 167.6,
#&gt;     "hp": 123,
#&gt;     "drat": 3.92,
#&gt;     "wt": 3.44,
#&gt;     "qsec": 18.3,
#&gt;     "vs": 1,
#&gt;     "am": 0,
#&gt;     "gear": 4,
#&gt;     "carb": 4,
#&gt;     "_row": "Merc 280"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 17.8,
#&gt;     "cyl": 6,
#&gt;     "disp": 167.6,
#&gt;     "hp": 123,
#&gt;     "drat": 3.92,
#&gt;     "wt": 3.44,
#&gt;     "qsec": 18.9,
#&gt;     "vs": 1,
#&gt;     "am": 0,
#&gt;     "gear": 4,
#&gt;     "carb": 4,
#&gt;     "_row": "Merc 280C"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 16.4,
#&gt;     "cyl": 8,
#&gt;     "disp": 275.8,
#&gt;     "hp": 180,
#&gt;     "drat": 3.07,
#&gt;     "wt": 4.07,
#&gt;     "qsec": 17.4,
#&gt;     "vs": 0,
#&gt;     "am": 0,
#&gt;     "gear": 3,
#&gt;     "carb": 3,
#&gt;     "_row": "Merc 450SE"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 17.3,
#&gt;     "cyl": 8,
#&gt;     "disp": 275.8,
#&gt;     "hp": 180,
#&gt;     "drat": 3.07,
#&gt;     "wt": 3.73,
#&gt;     "qsec": 17.6,
#&gt;     "vs": 0,
#&gt;     "am": 0,
#&gt;     "gear": 3,
#&gt;     "carb": 3,
#&gt;     "_row": "Merc 450SL"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 15.2,
#&gt;     "cyl": 8,
#&gt;     "disp": 275.8,
#&gt;     "hp": 180,
#&gt;     "drat": 3.07,
#&gt;     "wt": 3.78,
#&gt;     "qsec": 18,
#&gt;     "vs": 0,
#&gt;     "am": 0,
#&gt;     "gear": 3,
#&gt;     "carb": 3,
#&gt;     "_row": "Merc 450SLC"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 10.4,
#&gt;     "cyl": 8,
#&gt;     "disp": 472,
#&gt;     "hp": 205,
#&gt;     "drat": 2.93,
#&gt;     "wt": 5.25,
#&gt;     "qsec": 17.98,
#&gt;     "vs": 0,
#&gt;     "am": 0,
#&gt;     "gear": 3,
#&gt;     "carb": 4,
#&gt;     "_row": "Cadillac Fleetwood"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 10.4,
#&gt;     "cyl": 8,
#&gt;     "disp": 460,
#&gt;     "hp": 215,
#&gt;     "drat": 3,
#&gt;     "wt": 5.424,
#&gt;     "qsec": 17.82,
#&gt;     "vs": 0,
#&gt;     "am": 0,
#&gt;     "gear": 3,
#&gt;     "carb": 4,
#&gt;     "_row": "Lincoln Continental"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 14.7,
#&gt;     "cyl": 8,
#&gt;     "disp": 440,
#&gt;     "hp": 230,
#&gt;     "drat": 3.23,
#&gt;     "wt": 5.345,
#&gt;     "qsec": 17.42,
#&gt;     "vs": 0,
#&gt;     "am": 0,
#&gt;     "gear": 3,
#&gt;     "carb": 4,
#&gt;     "_row": "Chrysler Imperial"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 32.4,
#&gt;     "cyl": 4,
#&gt;     "disp": 78.7,
#&gt;     "hp": 66,
#&gt;     "drat": 4.08,
#&gt;     "wt": 2.2,
#&gt;     "qsec": 19.47,
#&gt;     "vs": 1,
#&gt;     "am": 1,
#&gt;     "gear": 4,
#&gt;     "carb": 1,
#&gt;     "_row": "Fiat 128"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 30.4,
#&gt;     "cyl": 4,
#&gt;     "disp": 75.7,
#&gt;     "hp": 52,
#&gt;     "drat": 4.93,
#&gt;     "wt": 1.615,
#&gt;     "qsec": 18.52,
#&gt;     "vs": 1,
#&gt;     "am": 1,
#&gt;     "gear": 4,
#&gt;     "carb": 2,
#&gt;     "_row": "Honda Civic"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 33.9,
#&gt;     "cyl": 4,
#&gt;     "disp": 71.1,
#&gt;     "hp": 65,
#&gt;     "drat": 4.22,
#&gt;     "wt": 1.835,
#&gt;     "qsec": 19.9,
#&gt;     "vs": 1,
#&gt;     "am": 1,
#&gt;     "gear": 4,
#&gt;     "carb": 1,
#&gt;     "_row": "Toyota Corolla"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 21.5,
#&gt;     "cyl": 4,
#&gt;     "disp": 120.1,
#&gt;     "hp": 97,
#&gt;     "drat": 3.7,
#&gt;     "wt": 2.465,
#&gt;     "qsec": 20.01,
#&gt;     "vs": 1,
#&gt;     "am": 0,
#&gt;     "gear": 3,
#&gt;     "carb": 1,
#&gt;     "_row": "Toyota Corona"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 15.5,
#&gt;     "cyl": 8,
#&gt;     "disp": 318,
#&gt;     "hp": 150,
#&gt;     "drat": 2.76,
#&gt;     "wt": 3.52,
#&gt;     "qsec": 16.87,
#&gt;     "vs": 0,
#&gt;     "am": 0,
#&gt;     "gear": 3,
#&gt;     "carb": 2,
#&gt;     "_row": "Dodge Challenger"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 15.2,
#&gt;     "cyl": 8,
#&gt;     "disp": 304,
#&gt;     "hp": 150,
#&gt;     "drat": 3.15,
#&gt;     "wt": 3.435,
#&gt;     "qsec": 17.3,
#&gt;     "vs": 0,
#&gt;     "am": 0,
#&gt;     "gear": 3,
#&gt;     "carb": 2,
#&gt;     "_row": "AMC Javelin"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 13.3,
#&gt;     "cyl": 8,
#&gt;     "disp": 350,
#&gt;     "hp": 245,
#&gt;     "drat": 3.73,
#&gt;     "wt": 3.84,
#&gt;     "qsec": 15.41,
#&gt;     "vs": 0,
#&gt;     "am": 0,
#&gt;     "gear": 3,
#&gt;     "carb": 4,
#&gt;     "_row": "Camaro Z28"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 19.2,
#&gt;     "cyl": 8,
#&gt;     "disp": 400,
#&gt;     "hp": 175,
#&gt;     "drat": 3.08,
#&gt;     "wt": 3.845,
#&gt;     "qsec": 17.05,
#&gt;     "vs": 0,
#&gt;     "am": 0,
#&gt;     "gear": 3,
#&gt;     "carb": 2,
#&gt;     "_row": "Pontiac Firebird"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 27.3,
#&gt;     "cyl": 4,
#&gt;     "disp": 79,
#&gt;     "hp": 66,
#&gt;     "drat": 4.08,
#&gt;     "wt": 1.935,
#&gt;     "qsec": 18.9,
#&gt;     "vs": 1,
#&gt;     "am": 1,
#&gt;     "gear": 4,
#&gt;     "carb": 1,
#&gt;     "_row": "Fiat X1-9"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 26,
#&gt;     "cyl": 4,
#&gt;     "disp": 120.3,
#&gt;     "hp": 91,
#&gt;     "drat": 4.43,
#&gt;     "wt": 2.14,
#&gt;     "qsec": 16.7,
#&gt;     "vs": 0,
#&gt;     "am": 1,
#&gt;     "gear": 5,
#&gt;     "carb": 2,
#&gt;     "_row": "Porsche 914-2"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 30.4,
#&gt;     "cyl": 4,
#&gt;     "disp": 95.1,
#&gt;     "hp": 113,
#&gt;     "drat": 3.77,
#&gt;     "wt": 1.513,
#&gt;     "qsec": 16.9,
#&gt;     "vs": 1,
#&gt;     "am": 1,
#&gt;     "gear": 5,
#&gt;     "carb": 2,
#&gt;     "_row": "Lotus Europa"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 15.8,
#&gt;     "cyl": 8,
#&gt;     "disp": 351,
#&gt;     "hp": 264,
#&gt;     "drat": 4.22,
#&gt;     "wt": 3.17,
#&gt;     "qsec": 14.5,
#&gt;     "vs": 0,
#&gt;     "am": 1,
#&gt;     "gear": 5,
#&gt;     "carb": 4,
#&gt;     "_row": "Ford Pantera L"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 19.7,
#&gt;     "cyl": 6,
#&gt;     "disp": 145,
#&gt;     "hp": 175,
#&gt;     "drat": 3.62,
#&gt;     "wt": 2.77,
#&gt;     "qsec": 15.5,
#&gt;     "vs": 0,
#&gt;     "am": 1,
#&gt;     "gear": 5,
#&gt;     "carb": 6,
#&gt;     "_row": "Ferrari Dino"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 15,
#&gt;     "cyl": 8,
#&gt;     "disp": 301,
#&gt;     "hp": 335,
#&gt;     "drat": 3.54,
#&gt;     "wt": 3.57,
#&gt;     "qsec": 14.6,
#&gt;     "vs": 0,
#&gt;     "am": 1,
#&gt;     "gear": 5,
#&gt;     "carb": 8,
#&gt;     "_row": "Maserati Bora"
#&gt;   },
#&gt;   {
#&gt;     "mpg": 21.4,
#&gt;     "cyl": 4,
#&gt;     "disp": 121,
#&gt;     "hp": 109,
#&gt;     "drat": 4.11,
#&gt;     "wt": 2.78,
#&gt;     "qsec": 18.6,
#&gt;     "vs": 1,
#&gt;     "am": 1,
#&gt;     "gear": 4,
#&gt;     "carb": 2,
#&gt;     "_row": "Volvo 142E"
#&gt;   }
#&gt; ]</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Convert <code>pretty_json</code> to a minimal version using <a href="http://www.rdocumentation.org/packages/jsonlite/functions/prettify" target="_blank" rel="noopener noreferrer"><code>minify()</code></a>. Store this version under a new variable, <code>mini_json</code>.</li>
<li>Print out <code>mini_json</code>. Which version do you prefer, the pretty one or the minified one?</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1"></a><span class="co"># Minify pretty_json: mini_json</span></span>
<span id="cb80-2"><a href="#cb80-2"></a>mini_json <span class="ot">&lt;-</span> <span class="fu">minify</span>(pretty_json)</span>
<span id="cb80-3"><a href="#cb80-3"></a></span>
<span id="cb80-4"><a href="#cb80-4"></a><span class="co"># Print mini_json</span></span>
<span id="cb80-5"><a href="#cb80-5"></a>mini_json</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [{"mpg":21,"cyl":6,"disp":160,"hp":110,"drat":3.9,"wt":2.62,"qsec":16.46,"vs":0,"am":1,"gear":4,"carb":4,"_row":"Mazda RX4"},{"mpg":21,"cyl":6,"disp":160,"hp":110,"drat":3.9,"wt":2.875,"qsec":17.02,"vs":0,"am":1,"gear":4,"carb":4,"_row":"Mazda RX4 Wag"},{"mpg":22.8,"cyl":4,"disp":108,"hp":93,"drat":3.85,"wt":2.32,"qsec":18.61,"vs":1,"am":1,"gear":4,"carb":1,"_row":"Datsun 710"},{"mpg":21.4,"cyl":6,"disp":258,"hp":110,"drat":3.08,"wt":3.215,"qsec":19.44,"vs":1,"am":0,"gear":3,"carb":1,"_row":"Hornet 4 Drive"},{"mpg":18.7,"cyl":8,"disp":360,"hp":175,"drat":3.15,"wt":3.44,"qsec":17.02,"vs":0,"am":0,"gear":3,"carb":2,"_row":"Hornet Sportabout"},{"mpg":18.1,"cyl":6,"disp":225,"hp":105,"drat":2.76,"wt":3.46,"qsec":20.22,"vs":1,"am":0,"gear":3,"carb":1,"_row":"Valiant"},{"mpg":14.3,"cyl":8,"disp":360,"hp":245,"drat":3.21,"wt":3.57,"qsec":15.84,"vs":0,"am":0,"gear":3,"carb":4,"_row":"Duster 360"},{"mpg":24.4,"cyl":4,"disp":146.7,"hp":62,"drat":3.69,"wt":3.19,"qsec":20,"vs":1,"am":0,"gear":4,"carb":2,"_row":"Merc 240D"},{"mpg":22.8,"cyl":4,"disp":140.8,"hp":95,"drat":3.92,"wt":3.15,"qsec":22.9,"vs":1,"am":0,"gear":4,"carb":2,"_row":"Merc 230"},{"mpg":19.2,"cyl":6,"disp":167.6,"hp":123,"drat":3.92,"wt":3.44,"qsec":18.3,"vs":1,"am":0,"gear":4,"carb":4,"_row":"Merc 280"},{"mpg":17.8,"cyl":6,"disp":167.6,"hp":123,"drat":3.92,"wt":3.44,"qsec":18.9,"vs":1,"am":0,"gear":4,"carb":4,"_row":"Merc 280C"},{"mpg":16.4,"cyl":8,"disp":275.8,"hp":180,"drat":3.07,"wt":4.07,"qsec":17.4,"vs":0,"am":0,"gear":3,"carb":3,"_row":"Merc 450SE"},{"mpg":17.3,"cyl":8,"disp":275.8,"hp":180,"drat":3.07,"wt":3.73,"qsec":17.6,"vs":0,"am":0,"gear":3,"carb":3,"_row":"Merc 450SL"},{"mpg":15.2,"cyl":8,"disp":275.8,"hp":180,"drat":3.07,"wt":3.78,"qsec":18,"vs":0,"am":0,"gear":3,"carb":3,"_row":"Merc 450SLC"},{"mpg":10.4,"cyl":8,"disp":472,"hp":205,"drat":2.93,"wt":5.25,"qsec":17.98,"vs":0,"am":0,"gear":3,"carb":4,"_row":"Cadillac Fleetwood"},{"mpg":10.4,"cyl":8,"disp":460,"hp":215,"drat":3,"wt":5.424,"qsec":17.82,"vs":0,"am":0,"gear":3,"carb":4,"_row":"Lincoln Continental"},{"mpg":14.7,"cyl":8,"disp":440,"hp":230,"drat":3.23,"wt":5.345,"qsec":17.42,"vs":0,"am":0,"gear":3,"carb":4,"_row":"Chrysler Imperial"},{"mpg":32.4,"cyl":4,"disp":78.7,"hp":66,"drat":4.08,"wt":2.2,"qsec":19.47,"vs":1,"am":1,"gear":4,"carb":1,"_row":"Fiat 128"},{"mpg":30.4,"cyl":4,"disp":75.7,"hp":52,"drat":4.93,"wt":1.615,"qsec":18.52,"vs":1,"am":1,"gear":4,"carb":2,"_row":"Honda Civic"},{"mpg":33.9,"cyl":4,"disp":71.1,"hp":65,"drat":4.22,"wt":1.835,"qsec":19.9,"vs":1,"am":1,"gear":4,"carb":1,"_row":"Toyota Corolla"},{"mpg":21.5,"cyl":4,"disp":120.1,"hp":97,"drat":3.7,"wt":2.465,"qsec":20.01,"vs":1,"am":0,"gear":3,"carb":1,"_row":"Toyota Corona"},{"mpg":15.5,"cyl":8,"disp":318,"hp":150,"drat":2.76,"wt":3.52,"qsec":16.87,"vs":0,"am":0,"gear":3,"carb":2,"_row":"Dodge Challenger"},{"mpg":15.2,"cyl":8,"disp":304,"hp":150,"drat":3.15,"wt":3.435,"qsec":17.3,"vs":0,"am":0,"gear":3,"carb":2,"_row":"AMC Javelin"},{"mpg":13.3,"cyl":8,"disp":350,"hp":245,"drat":3.73,"wt":3.84,"qsec":15.41,"vs":0,"am":0,"gear":3,"carb":4,"_row":"Camaro Z28"},{"mpg":19.2,"cyl":8,"disp":400,"hp":175,"drat":3.08,"wt":3.845,"qsec":17.05,"vs":0,"am":0,"gear":3,"carb":2,"_row":"Pontiac Firebird"},{"mpg":27.3,"cyl":4,"disp":79,"hp":66,"drat":4.08,"wt":1.935,"qsec":18.9,"vs":1,"am":1,"gear":4,"carb":1,"_row":"Fiat X1-9"},{"mpg":26,"cyl":4,"disp":120.3,"hp":91,"drat":4.43,"wt":2.14,"qsec":16.7,"vs":0,"am":1,"gear":5,"carb":2,"_row":"Porsche 914-2"},{"mpg":30.4,"cyl":4,"disp":95.1,"hp":113,"drat":3.77,"wt":1.513,"qsec":16.9,"vs":1,"am":1,"gear":5,"carb":2,"_row":"Lotus Europa"},{"mpg":15.8,"cyl":8,"disp":351,"hp":264,"drat":4.22,"wt":3.17,"qsec":14.5,"vs":0,"am":1,"gear":5,"carb":4,"_row":"Ford Pantera L"},{"mpg":19.7,"cyl":6,"disp":145,"hp":175,"drat":3.62,"wt":2.77,"qsec":15.5,"vs":0,"am":1,"gear":5,"carb":6,"_row":"Ferrari Dino"},{"mpg":15,"cyl":8,"disp":301,"hp":335,"drat":3.54,"wt":3.57,"qsec":14.6,"vs":0,"am":1,"gear":5,"carb":8,"_row":"Maserati Bora"},{"mpg":21.4,"cyl":4,"disp":121,"hp":109,"drat":4.11,"wt":2.78,"qsec":18.6,"vs":1,"am":1,"gear":4,"carb":2,"_row":"Volvo 142E"}]</code></pre>
</div>
</div>
<p>Great! Hopefully you agree that the pretty format is way easier to read and understand than the minified format! This exercise concludes the course on importing data!</p>
</section>
</section>
<section id="importing-data-from-statistical-software-packages" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> 5. Importing data from statistical software packages</h1>
<p>Next to R, there are also other commonly used statistical software packages: SAS, STATA and SPSS. Each of them has their own file format. Learn how to use the haven and foreign packages to get them into R with remarkable ease!</p>
<section id="haven" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="haven"><span class="header-section-number">5.1</span> haven</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. haven</strong></p>
<p>One thing we haven’t discussed yet, is data from other</p>
<p><strong>2. Statistical Software Packages</strong></p>
<p>statistical software packages. The most common</p>
<p><strong>3. Statistical Software Packages</strong></p>
<p>ones are SAS, short for Statistical Analysis Software, STATA, which stands for statistics and data, and SPSS, or the statistical package for social sciences.Which software people use depends on the field of study or personal preference.</p>
<p><strong>4. Statistical Software Packages</strong></p>
<p>SAS, for example, is one of the most wide spread Business Analytic software tools and is also commonly used in Biostatistics or Medical Sciences. On the other hand, STATA is a typical tool for Economists. SPSS is often used in Social Sciences, hence the name.</p>
<p><strong>5. Statistical Software Packages</strong></p>
<p>In the end, each software uses and produces their own file types. The most common extensions are listed here.</p>
<p><strong>6. R packages to import data</strong></p>
<p>No matter the package your data comes from, R is prepared for every file that’ll come along! In the rest of this chapter, you will learn how to use two R packages that can import data from these software environments: haven and foreign. The first one is written by Hadley Wickham, the other one by the R core team. The foreign package has been around for a longer time, while haven is still in development today, which is late 2015. Wickham aims to provide a more consistent, easier to use and faster alternative to foreign. On the other hand, foreign supports more data formats. But let’s not jump to conclusions here. In this video, I’ll talk about haven some more, and in the next video I’ll talk about foreign. After that, you can choose for yourself which package you prefer.</p>
<p><strong>7. haven</strong></p>
<p>So, the haven package. This package can deal with SAS, STATA and SPSS data files. It does this by wrapping around the ReadStat C library by Evan Miller. Just like readr and readxl, the package is extremely simple to use. You pass the path to the data file and an R data frame results.After you’ve installed haven with install-dot-packages, you can load it with the library function.</p>
<p><strong>8. SAS data</strong></p>
<p>Let’s start with loading a SAS data file first. Suppose you have a file, ‘ontime dot sas7bdat’ in your current working directory. It contains data on the percentage of flights that arrived on time for several airlines in the US. To import this data as a data frame on time, you simply use the function read_sas and pass the path to the data file:</p>
<p><strong>9. SAS data</strong></p>
<p>If you print its structure, you’ll see that each variable in the data frame also has a label attribute. If you’re familiar with SAS, you know that you can label variables in SAS datasets. Well, it’s these same labels that are also available inside R now.</p>
<p><strong>10. SAS data</strong></p>
<p>When simply printing ontime, you don’t see any difference with a normal data frame without labels.</p>
<p><strong>11. SAS data</strong></p>
<p>If you use RStudio’s View function to explore a dataset, though,</p>
<p><strong>12. SAS data</strong></p>
<p>you’ll see the labels:Can you read the data here? In March of 1999, for example,</p>
<p><strong>13. SAS data</strong></p>
<p>it appears that around 79 percent of all Delta Airline flights were on time.</p>
<p><strong>14. STATA data</strong></p>
<p>Next up is STATA. Haven is able to import both Stata 13 and 14 files with the read_stata function. You can also use read_dta, which does exactly the same.</p>
<p><strong>15. STATA data</strong></p>
<p>Just like before, simply passing the path to the dot dta file will do the trick. Suppose that the same statistics on the us airlines are now available as a dot dta file, ontime dot dta, which is in your current working directory, you can try either one of these calls.The printout looks pretty familiar again, but there’s something different here. The names of the Airlines are converted to numbers, they aren’t character strings anymore. How did that come about?</p>
<p><strong>16. STATA data</strong></p>
<p>If you have a look at the class of the Airline column of ontime, it appears to be of class labelled.This is the R version of the labelled vector, a common data structure in other statistical packages. If you simply print this Airline column, you can see the airline names from before.R assigned numbers for each variable according to their alphabetical order. As you want to continue your analysis in R, it’s a good idea to convert this vector to a standard R class, such as a factor.</p>
<p><strong>17. as_factor()</strong></p>
<p>Instead of the standard as dot factor function, of base R, you’ll need ’haven’s as underscore factor for this.This is the type of categorical variables we’re used to. In this case, it might be even better to have simple characters for the airline names, as these are not really categories. The base R as dot character function can do this for you. Let’s just place it around the previous call.</p>
<p><strong>18. as_factor()</strong></p>
<p>If you assign this result to the Airline column of ontime again, you’ve made the ontime data frame ready for some more analysis, with the names as simple character strings.</p>
<p><strong>19. SPSS data</strong></p>
<p>Last but not least, there is SPSS data. Here, you’ll want to use read_spss. Based on the extension, haven will decide for you which function to call: read_por for dot por files, or read_sav for dot sav files.Let’s once more load in the airline data, that’s stored as a dot sav file in the datasets folder of our personal directory.Again, a data frame results. The Airline column is a so-called labelled vector again. The column names here are slightly different from before.</p>
<p><strong>20. Statistical Software Packages</strong></p>
<p>It should be clear by now: haven is incredibly easy to use and simply does what’s it supposed to. Have a quick look at the summary here, now with the corresponding functions.</p>
</section>
<section id="import-sas-data-with-haven" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="import-sas-data-with-haven"><span class="header-section-number">5.2</span> Import SAS data with haven</h2>
<p><code>haven</code> is an extremely easy-to-use package to import data from three software packages: SAS, STATA and SPSS. Depending on the software, you use different functions:</p>
<ul>
<li>SAS: <a href="http://cran.r-project.org/web/packages/haven/haven.pdf" target="_blank" rel="noopener noreferrer"><code>read_sas()</code></a></li>
<li>STATA: <a href="http://cran.r-project.org/web/packages/haven/haven.pdf" target="_blank" rel="noopener noreferrer"><code>read_dta()</code></a> (or <a href="http://cran.r-project.org/web/packages/haven/haven.pdf" target="_blank" rel="noopener noreferrer"><code>read_stata()</code></a>, which are identical)</li>
<li>SPSS: <a href="http://cran.r-project.org/web/packages/haven/haven.pdf" target="_blank" rel="noopener noreferrer"><code>read_sav()</code></a> or <a href="http://cran.r-project.org/web/packages/haven/haven.pdf" target="_blank" rel="noopener noreferrer"><code>read_por()</code></a>, depending on the file type.</li>
</ul>
<p>All these functions take one key argument: the path to your local file. In fact, you can even pass a URL; <code>haven</code> will then automatically download the file for you before importing it.</p>
<p>You’ll be working with data on the age, gender, income, and purchase level (0 = low, 1 = high) of 36 individuals (Source: <a href="http://support.sas.com/learn/" target="_blank" rel="noopener noreferrer">SAS</a>). The information is stored in a SAS file, <code>sales.sas7bdat</code>, which is available in your current working directory. You can also download the data <a href="http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/sales.sas7bdat" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Load the <code>haven</code> package; it’s already installed on DataCamp’s servers.</li>
<li>Import the data file <code>"sales.sas7bdat"</code>. Call the imported data frame <code>sales</code>.</li>
<li>Display the structure of <code>sales</code> with <a href="http://www.rdocumentation.org/packages/utils/functions/str" target="_blank" rel="noopener noreferrer"><code>str()</code></a>. Some columns represent categorical variables, so they should be factors.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1"></a><span class="co"># Load the haven package</span></span>
<span id="cb82-2"><a href="#cb82-2"></a><span class="fu">library</span>(haven)</span>
<span id="cb82-3"><a href="#cb82-3"></a></span>
<span id="cb82-4"><a href="#cb82-4"></a><span class="co"># Import sales.sas7bdat: sales</span></span>
<span id="cb82-5"><a href="#cb82-5"></a>sales <span class="ot">&lt;-</span> <span class="fu">read_sas</span>(<span class="st">"data/sales.sas7bdat"</span>)</span>
<span id="cb82-6"><a href="#cb82-6"></a></span>
<span id="cb82-7"><a href="#cb82-7"></a><span class="co"># Display the structure of sales</span></span>
<span id="cb82-8"><a href="#cb82-8"></a><span class="fu">str</span>(sales)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; tibble [431 × 4] (S3: tbl_df/tbl/data.frame)
#&gt;  $ purchase: num [1:431] 0 0 1 1 0 0 0 0 0 0 ...
#&gt;  $ age     : num [1:431] 41 47 41 39 32 32 33 45 43 40 ...
#&gt;  $ gender  : chr [1:431] "Female" "Female" "Female" "Female" ...
#&gt;  $ income  : chr [1:431] "Low" "Low" "Low" "Low" ...</code></pre>
</div>
</div>
<p>Congratulations! As you can see, <a href="http://cran.r-project.org/web/packages/haven/haven.pdf"><code>read_sas()</code></a> enables you to import <b>SAS</b> data files easily.</p>
</section>
<section id="import-stata-data-with-haven" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="import-stata-data-with-haven"><span class="header-section-number">5.3</span> Import STATA data with haven</h2>
<p>Next up are STATA data files; you can use <a href="http://cran.r-project.org/web/packages/haven/haven.pdf" target="_blank" rel="noopener noreferrer"><code>read_dta()</code></a> for these.</p>
<p>When inspecting the result of the <code>read_dta()</code> call, you will notice that one column will be imported as a <code>labelled</code> vector, an R equivalent for the common data structure in other statistical environments. In order to effectively continue working on the data in R, it’s best to change this data into a standard R class. To convert a variable of the class <code>labelled</code> to a factor, you’ll need <code>haven</code>’s <a href="http://cran.r-project.org/web/packages/haven/haven.pdf" target="_blank" rel="noopener noreferrer"><code>as_factor()</code></a> function.</p>
<p>In this exercise, you will work with data on yearly import and export numbers of sugar, both in USD and in weight. The data can be found at: <a href="http://assets.datacamp.com/production/course_1478/datasets/trade.dta" target="_blank" rel="noopener noreferrer">http://assets.datacamp.com/production/course_1478/datasets/trade.dta</a></p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Import the data file directly from the URL using <a href="http://cran.r-project.org/web/packages/haven/haven.pdf" target="_blank" rel="noopener noreferrer"><code>read_dta()</code></a>, and store it as <code>sugar</code>.</li>
<li>Print out the structure of <code>sugar</code>. The <code>Date</code> column has class <code>labelled</code>.</li>
<li>Convert the values in the <code>Date</code> column of <code>sugar</code> to dates, using <code>as.Date(as_factor(___))</code>.</li>
<li>Print out the structure of <code>sugar</code> once more. Looks better now?</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1"></a><span class="co"># Import the data from the URL: sugar</span></span>
<span id="cb84-2"><a href="#cb84-2"></a>sugar <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">"http://assets.datacamp.com/production/course_1478/datasets/trade.dta"</span>)</span>
<span id="cb84-3"><a href="#cb84-3"></a></span>
<span id="cb84-4"><a href="#cb84-4"></a><span class="co"># Structure of sugar</span></span>
<span id="cb84-5"><a href="#cb84-5"></a><span class="fu">str</span>(sugar)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; tibble [10 × 5] (S3: tbl_df/tbl/data.frame)
#&gt;  $ Date    : dbl+lbl [1:10] 10,  9,  8,  7,  6,  5,  4,  3,  2,  1
#&gt;    ..@ label       : chr "Date"
#&gt;    ..@ format.stata: chr "%9.0g"
#&gt;    ..@ labels      : Named num [1:10] 1 2 3 4 5 6 7 8 9 10
#&gt;    .. ..- attr(*, "names")= chr [1:10] "2004-12-31" "2005-12-31" "2006-12-31" "2007-12-31" ...
#&gt;  $ Import  : num [1:10] 37664782 16316512 11082246 35677943 9879878 ...
#&gt;   ..- attr(*, "label")= chr "Import"
#&gt;   ..- attr(*, "format.stata")= chr "%9.0g"
#&gt;  $ Weight_I: num [1:10] 54029106 21584365 14526089 55034932 14806865 ...
#&gt;   ..- attr(*, "label")= chr "Weight_I"
#&gt;   ..- attr(*, "format.stata")= chr "%9.0g"
#&gt;  $ Export  : num [1:10] 5.45e+07 1.03e+08 3.79e+07 4.85e+07 7.15e+07 ...
#&gt;   ..- attr(*, "label")= chr "Export"
#&gt;   ..- attr(*, "format.stata")= chr "%9.0g"
#&gt;  $ Weight_E: num [1:10] 9.34e+07 1.58e+08 8.80e+07 1.12e+08 1.32e+08 ...
#&gt;   ..- attr(*, "label")= chr "Weight_E"
#&gt;   ..- attr(*, "format.stata")= chr "%9.0g"
#&gt;  - attr(*, "label")= chr "Written by R."</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1"></a><span class="co"># Convert values in Date column to dates</span></span>
<span id="cb86-2"><a href="#cb86-2"></a>sugar<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">as_factor</span>(sugar<span class="sc">$</span>Date))</span>
<span id="cb86-3"><a href="#cb86-3"></a></span>
<span id="cb86-4"><a href="#cb86-4"></a><span class="co"># Structure of sugar again</span></span>
<span id="cb86-5"><a href="#cb86-5"></a><span class="fu">str</span>(sugar)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; tibble [10 × 5] (S3: tbl_df/tbl/data.frame)
#&gt;  $ Date    : Date[1:10], format: "2013-12-31" "2012-12-31" ...
#&gt;  $ Import  : num [1:10] 37664782 16316512 11082246 35677943 9879878 ...
#&gt;   ..- attr(*, "label")= chr "Import"
#&gt;   ..- attr(*, "format.stata")= chr "%9.0g"
#&gt;  $ Weight_I: num [1:10] 54029106 21584365 14526089 55034932 14806865 ...
#&gt;   ..- attr(*, "label")= chr "Weight_I"
#&gt;   ..- attr(*, "format.stata")= chr "%9.0g"
#&gt;  $ Export  : num [1:10] 5.45e+07 1.03e+08 3.79e+07 4.85e+07 7.15e+07 ...
#&gt;   ..- attr(*, "label")= chr "Export"
#&gt;   ..- attr(*, "format.stata")= chr "%9.0g"
#&gt;  $ Weight_E: num [1:10] 9.34e+07 1.58e+08 8.80e+07 1.12e+08 1.32e+08 ...
#&gt;   ..- attr(*, "label")= chr "Weight_E"
#&gt;   ..- attr(*, "format.stata")= chr "%9.0g"
#&gt;  - attr(*, "label")= chr "Written by R."</code></pre>
</div>
</div>
</section>
<section id="what-does-the-graphic-tell" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="what-does-the-graphic-tell"><span class="header-section-number">5.4</span> What does the graphic tell?</h2>
<p>A plot can be very useful to explore the relationship between two variables. If you pass the <a href="http://www.rdocumentation.org/packages/graphics/functions/plot" target="_blank" rel="noopener noreferrer"><code>plot()</code></a> function two arguments, the first one will be plotted on the x-axis, the second one will be plotted on the y-axis.</p>
<p>The sugar trading data is again available at <a href="http://assets.datacamp.com/production/course_1478/datasets/trade.dta" target="_blank" rel="noopener noreferrer">http://assets.datacamp.com/production/course_1478/datasets/trade.dta</a>.</p>
<blockquote class="blockquote">
<h2 id="question-4" data-number="5.5" class="anchored"><span class="header-section-number">5.5</span> <em>Question</em></h2>
<p>After you’ve imported the data frame, you should plot two of its variables, <code>Import</code> against <code>Weight_I</code>, and describe their relationship!<br> <br> ⬜ The relation between the import figures in USD and the import figures in weight can be described with a quadratic function that has a local maximum.<br> ✅ The import figures in USD and the import figures in weight are rather positively correlated.<br> ⬜ The import figures in USD and the import figures in weight are negatively associated. Along the points there is a monotonic decreasing trend.<br> ⬜ No relationship can be guessed between the weight and the value of the imported sugar.<br></p>
</blockquote>
</section>
<section id="import-spss-data-with-haven" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="import-spss-data-with-haven"><span class="header-section-number">5.6</span> Import SPSS data with haven</h2>
<p>The <code>haven</code> package can also import data files from SPSS. Again, importing the data is pretty straightforward. Depending on the SPSS data file you’re working with, you’ll need either <a href="http://cran.r-project.org/web/packages/haven/haven.pdf" target="_blank" rel="noopener noreferrer"><code>read_sav()</code></a> - for <code>.sav</code> files - or <a href="http://cran.r-project.org/web/packages/haven/haven.pdf" target="_blank" rel="noopener noreferrer"><code>read_por()</code></a> - for <code>.por</code> files.</p>
<p>In this exercise, you will work with data on four of the Big Five personality traits for 434 persons (Source: <a href="http://staff.bath.ac.uk/pssiw/stats2/page16/page16.html" target="_blank" rel="noopener noreferrer">University of Bath</a>). The Big Five is a psychological concept including, originally, five dimensions of personality to classify human personality. The SPSS dataset is called <a href="http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/person.sav" target="_blank" rel="noopener noreferrer"><code>person.sav</code></a> and is available in your working directory.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Use <a href="http://cran.r-project.org/web/packages/haven/haven.pdf" target="_blank" rel="noopener noreferrer"><code>read_sav()</code></a> to import the SPSS data in <code>"person.sav"</code>. Name the imported data frame <code>traits</code>.</li>
<li><code>traits</code> contains several missing values, or <code>NA</code>s. Run <a href="http://www.rdocumentation.org/packages/base/functions/summary" target="_blank" rel="noopener noreferrer"><code>summary()</code></a> on it to find out how many <code>NA</code>s are contained in each variable.</li>
<li>Print out a subset of those individuals that scored high on Extroversion <em>and</em> on Agreeableness, i.e.&nbsp;scoring higher than 40 on each of these two categories. You can use <code>subset()</code> for this.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a><span class="co"># Import person.sav: traits</span></span>
<span id="cb88-2"><a href="#cb88-2"></a>traits <span class="ot">&lt;-</span> <span class="fu">read_sav</span>(<span class="st">"data/person.sav"</span>)</span>
<span id="cb88-3"><a href="#cb88-3"></a></span>
<span id="cb88-4"><a href="#cb88-4"></a><span class="co"># Summarize traits</span></span>
<span id="cb88-5"><a href="#cb88-5"></a><span class="fu">summary</span>(traits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;     Neurotic      Extroversion   Agreeableness   Conscientiousness
#&gt;  Min.   : 0.00   Min.   : 5.00   Min.   :15.00   Min.   : 7.00    
#&gt;  1st Qu.:18.00   1st Qu.:26.00   1st Qu.:39.00   1st Qu.:25.00    
#&gt;  Median :24.00   Median :31.00   Median :45.00   Median :30.00    
#&gt;  Mean   :23.63   Mean   :30.23   Mean   :44.55   Mean   :30.85    
#&gt;  3rd Qu.:29.00   3rd Qu.:34.00   3rd Qu.:50.00   3rd Qu.:36.00    
#&gt;  Max.   :44.00   Max.   :65.00   Max.   :73.00   Max.   :58.00    
#&gt;  NA's   :14      NA's   :16      NA's   :19      NA's   :14</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a><span class="co"># Print out a subset</span></span>
<span id="cb90-2"><a href="#cb90-2"></a><span class="fu">subset</span>(traits, Extroversion <span class="sc">&gt;</span> <span class="dv">40</span> <span class="sc">&amp;</span> Agreeableness <span class="sc">&gt;</span> <span class="dv">40</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Neurotic"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Extroversion"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Agreeableness"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Conscientiousness"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"38","2":"43","3":"49","4":"29"},{"1":"20","2":"42","3":"46","4":"31"},{"1":"18","2":"42","3":"49","4":"31"},{"1":"42","2":"43","3":"44","4":"29"},{"1":"30","2":"42","3":"51","4":"24"},{"1":"18","2":"42","3":"50","4":"25"},{"1":"27","2":"45","3":"55","4":"23"},{"1":"18","2":"43","3":"57","4":"34"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Great! You imported a data file from SPSS correctly using <code>read_sav()</code>. Deepen your knowledge in the following exercise!</p>
</section>
<section id="factorize-round-two" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="factorize-round-two"><span class="header-section-number">5.7</span> Factorize, round two</h2>
<p>In the last exercise you learned how to import a data file using the command <a href="http://cran.r-project.org/web/packages/haven/haven.pdf" target="_blank" rel="noopener noreferrer"><code>read_sav()</code></a>. With SPSS data files, it can also happen that some of the variables you import have the <code>labelled</code> class. This is done to keep all the labelling information that was originally present in the <code>.sav</code> and <code>.por</code> files. It’s advised to coerce (or change) these variables to factors or other standard R classes.</p>
<p>The data for this exercise involves information on employees and their demographic and economic attributes (Source: <a href="http://cehd.gmu.edu/book/dimitrov/spss" target="_blank" rel="noopener noreferrer">QRiE</a>). The data can be found on the following URL:</p>
<p><a href="http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/employee.sav" target="_blank" rel="noopener noreferrer">http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/employee.sav</a></p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Import the SPSS data straight from the URL and store the resulting data frame as <code>work</code>.</li>
<li>Display the summary of the <code>GENDER</code> column of <code>work</code>. This information doesn’t give you a lot of useful information, right?</li>
<li>Convert the <code>GENDER</code> column in <code>work</code> to a factor, the class to denote categorical variables in R. Use <a href="http://cran.r-project.org/web/packages/haven/haven.pdf" target="_blank" rel="noopener noreferrer"><code>as_factor()</code></a>.</li>
<li>Once again display the summary of the <code>GENDER</code> column. This time, the printout makes much more sense.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1"></a><span class="co"># Import SPSS data from the URL: work</span></span>
<span id="cb91-2"><a href="#cb91-2"></a>work <span class="ot">&lt;-</span> <span class="fu">read_sav</span>(<span class="st">"http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/employee.sav"</span>)</span>
<span id="cb91-3"><a href="#cb91-3"></a></span>
<span id="cb91-4"><a href="#cb91-4"></a><span class="co"># Display summary of work$GENDER</span></span>
<span id="cb91-5"><a href="#cb91-5"></a><span class="fu">summary</span>(work<span class="sc">$</span>GENDER)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;    Length     Class      Mode 
#&gt;       474 character character</code></pre>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1"></a><span class="co"># Convert work$GENDER to a factor</span></span>
<span id="cb93-2"><a href="#cb93-2"></a>work<span class="sc">$</span>GENDER <span class="ot">&lt;-</span> <span class="fu">as_factor</span>(work<span class="sc">$</span>GENDER)</span>
<span id="cb93-3"><a href="#cb93-3"></a></span>
<span id="cb93-4"><a href="#cb93-4"></a><span class="co"># Display summary of work$GENDER again</span></span>
<span id="cb93-5"><a href="#cb93-5"></a><span class="fu">summary</span>(work<span class="sc">$</span>GENDER)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Female   Male 
#&gt;    216    258</code></pre>
</div>
</div>
<p>Well done! The <a href="http://cran.r-project.org/web/packages/haven/haven.pdf"><code>as_factor()</code></a> function has more arguments you can specify, have a look at its documentation to discover more! Proceed to the next video.</p>
</section>
<section id="foreign" class="level2" data-number="5.8">
<h2 data-number="5.8" class="anchored" data-anchor-id="foreign"><span class="header-section-number">5.8</span> foreign</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. foreign</strong></p>
<p>You already know how to import your data using Wickham’s haven package, great!</p>
<p><strong>2. foreign</strong></p>
<p>However, I also told you that there is another alternative, the foreign package, written by the R core team. Although it’s somewhat less consistent in naming and use, it’s a very comprehensive tool that can work with all kinds of foreign data formats. Apart from importing SAS, STATA and SPSS files, it can also handle even more exotic formats, from Systat and Weka for example. It’s also able to export data again to various formats. I’ll only discuss importing SAS, STATA and SPSS data though. Before I get to it, let me install and load the foreign package.</p>
<p><strong>3. SAS</strong></p>
<p>Let’s start with SAS first. Well, here the first drawback of foreign in comparison to haven emerges. Foreign cannot import single SAS data files, such as dot sas7bdat files. With foreign only so-called SAS libraries can be read. These libraries usually are of the format dot-xport. If you are really looking for an alternative to haven here, you can check out a package called sas7bdat.</p>
<p><strong>4. STATA</strong></p>
<p>When it comes to STATA, foreign can be used to read dot dta files of Stata versions 5 to 12 today. You can do this with the read dot dta function. As you saw before, the R core team packages such as utils and this foreign package, use dots in their function names, while Wickham’s packages use underscores. Have a look at this simplified usage of the read dot dta function.As you probably expected you first have to define a file path. This could be a local file or a URL.</p>
<p><strong>5. read.dta()</strong></p>
<p>Basically, this is already sufficient to import a data set, as this call to import the US airlines punctuality data set shows.</p>
<p><strong>6. read.dta()</strong></p>
<p>Have a look at the structure of this data frame. The Airline variable is already a factor. This is because the convert dot factors argument of the read dot dta function is TRUE by default. This then automatically creates factors from labelled STATA values. This is something you had to do in the haven package manually with as_factor, remember?</p>
<p><strong>7. read.dta() - convert.factors</strong></p>
<p>Let’s see what happens if we set convert dot factors to FALSE.The Airline column is now integer. Is this information on Airlines lost then? Not at all. Notice all the information that is stored in the data frame’s attributes. From the version attribute, for example, you can tell that we’re dealing with a STATA 7 file. The label dot table attribute, contains a mapping between the integer airline codes and their actual names. To work with the dataset easily, you’ll want to stick to the default argument of convert dot factors though, which is TRUE.</p>
<p><strong>8. read.dta() - more arguments</strong></p>
<p>Similar to convert dot factors, there’s also convert dot dates to specify whether you want STATA time and date information to be converted to R Date and POSIXct objects. As this is something you’ll typically want to do, the defaults here TRUE.Finally, I also wanted to mention the missing dot type argument. If you’re familiar with STATA 8 and later, you’ll know that there is support for different types of missing values, 27 of them to be precise. In R, there’s only one type of missing values, NA. If you set the missing type argument to FALSE, all these different missing values are converted to NA. If it’s set to TRUE, a list with information on how different values for different variables are missing are included in the attributes of the returned data frame.</p>
<p><strong>9. SPSS</strong></p>
<p>Importing SPSS files with foreign works quite the same. This time though, you’ll need the read dot spss function. Not very surprising is it?Have another look at a trimmed down version of its usage.As usual, the file path comes first. For the rest, all argument names are different when you compare to the read dta function from before. This is what I meant with not really consistent before’use dot value dot labels’, which is TRUE by default, specifies whether variables that are labelled vectors in SPSS should be converted to R factors. This argument thus is similar to the the convert dot factor argument from read data.The ‘to dot data dot frame’ argument tells R whether or not to return the SPSS data as a data frame. Strangely, it’s FALSE by default, which has foreign build a list containing all different columns. But you already know that a data frame is simply a special kind of list, so the difference is not that big.Next to these two arguments, there are many more, such as trim factor names, trim values and use missings. Their purpose is often similar to what you’ve seen for the read dot dta function, but not always. Foreign aims at a specific treatment of different types of data files. This does not benefit the consistency, but provides full control over how actually data files are imported.To learn more about importing data with foreign, you can always consult the documentation. But save that for later,</p>
</section>
<section id="import-stata-data-with-foreign-1" class="level2" data-number="5.9">
<h2 data-number="5.9" class="anchored" data-anchor-id="import-stata-data-with-foreign-1"><span class="header-section-number">5.9</span> Import STATA data with foreign (1)</h2>
<p>The <code>foreign</code> package offers a simple function to import and read <em>STATA</em> data: <a href="http://www.rdocumentation.org/packages/foreign/functions/read.dta" target="_blank" rel="noopener noreferrer"><code>read.dta()</code></a>.</p>
<p>In this exercise, you will import data on the US presidential elections in the year 2000. The data in <code>florida.dta</code> contains the total numbers of votes for each of the four candidates as well as the total number of votes per election area in the state of Florida (Source: <a href="http://results.elections.myflorida.com/" target="_blank" rel="noopener noreferrer">Florida Department of State</a>). The file is available in your working directory, you can download it <a href="http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/florida.dta" target="_blank" rel="noopener noreferrer">here</a> if you want to experiment some more.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Load the <code>foreign</code> package; it’s already installed on DataCamp’s servers.</li>
<li>Import the data on the elections in Florida, <code>"florida.dta"</code>, and name the resulting data frame <code>florida</code>. Use <a href="http://www.rdocumentation.org/packages/foreign/functions/read.dta" target="_blank" rel="noopener noreferrer"><code>read.dta()</code></a> without specifying extra arguments.</li>
<li>Check out the last 6 observations of <code>florida</code> with <code>tail()</code></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1"></a><span class="co"># Load the foreign package</span></span>
<span id="cb95-2"><a href="#cb95-2"></a><span class="fu">library</span>(<span class="st">"foreign"</span>)</span>
<span id="cb95-3"><a href="#cb95-3"></a></span>
<span id="cb95-4"><a href="#cb95-4"></a><span class="co"># Import florida.dta and name the resulting data frame florida</span></span>
<span id="cb95-5"><a href="#cb95-5"></a>florida <span class="ot">&lt;-</span> <span class="fu">read.dta</span>(<span class="st">"data/florida.dta"</span>)</span>
<span id="cb95-6"><a href="#cb95-6"></a></span>
<span id="cb95-7"><a href="#cb95-7"></a><span class="co"># Check tail() of florida</span></span>
<span id="cb95-8"><a href="#cb95-8"></a><span class="fu">tail</span>(florida)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["gore"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["bush"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["buchanan"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["nader"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["total"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"2647","2":"4051","3":"27","4":"59","5":"6784","_rn_":"62"},{"1":"1399","2":"2326","3":"26","4":"29","5":"3780","_rn_":"63"},{"1":"97063","2":"82214","3":"396","4":"2436","5":"182109","_rn_":"64"},{"1":"3835","2":"4511","3":"46","4":"149","5":"8541","_rn_":"65"},{"1":"5637","2":"12176","3":"120","4":"265","5":"18198","_rn_":"66"},{"1":"2796","2":"4983","3":"88","4":"93","5":"7960","_rn_":"67"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Congratulations! Your first exercise on using <code>foreign</code> to import STATA data is complete. Proceed to the next exercise to learn the proper handling of the arguments that <a href="http://www.rdocumentation.org/packages/foreign/functions/read.dta"><code>read.dta()</code></a> includes!</p>
</section>
<section id="import-stata-data-with-foreign-2" class="level2" data-number="5.10">
<h2 data-number="5.10" class="anchored" data-anchor-id="import-stata-data-with-foreign-2"><span class="header-section-number">5.10</span> Import STATA data with foreign (2)</h2>
<p>Data can be very diverse, going from character vectors to categorical variables, dates and more. It’s in these cases that the additional arguments of <a href="http://www.rdocumentation.org/packages/foreign/functions/read.dta" target="_blank" rel="noopener noreferrer"><code>read.dta()</code></a> will come in handy.</p>
<p>The arguments you will use most often are <code>convert.dates</code>, <code>convert.factors</code>, <code>missing.type</code> and <code>convert.underscore</code>. Their meaning is pretty straightforward, as Filip explained in the video. It’s all about correctly converting STATA data to standard R data structures. Type <code>?read.dta</code> to find out about about the default values.</p>
<p>The dataset for this exercise contains socio-economic measures and access to education for different individuals (Source: <a href="http://datatopics.worldbank.org/Gender/topic/education" target="_blank" rel="noopener noreferrer">World Bank</a>). This data is available as <a href="http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/edequality.dta" target="_blank" rel="noopener noreferrer"><code>edequality.dta</code></a>, which is located in the <code>worldbank</code> folder in your working directory.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li><p>Specify the path to the file using <a href="http://www.rdocumentation.org/packages/base/functions/file.path" target="_blank" rel="noopener noreferrer"><code>file.path()</code></a>. Call it <code>path</code>. Remember the <code>"edequality.dta"</code> file is located in the <code>"worldbank"</code> folder.</p></li>
<li><p>Use the <code>path</code> variable to import the data file in three different ways; each time show its structure with <a href="http://www.rdocumentation.org/packages/utils/functions/str" target="_blank" rel="noopener noreferrer"><code>str()</code></a>:</p>
<ul>
<li><code>edu_equal_1</code>: By passing only the file <code>path</code> to <a href="http://www.rdocumentation.org/packages/foreign/functions/read.dta" target="_blank" rel="noopener noreferrer"><code>read.dta()</code></a>.</li>
<li><code>edu_equal_2</code>: By passing the file <code>path</code>, and setting <code>convert.factors</code> to <code>FALSE</code>.</li>
<li><code>edu_equal_3</code>: By passing the file <code>path</code>, and setting <code>convert.underscore</code> to <code>TRUE</code>.</li>
</ul></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1"></a><span class="co"># Specify the file path using file.path(): path</span></span>
<span id="cb96-2"><a href="#cb96-2"></a>path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"edequality.dta"</span>)</span>
<span id="cb96-3"><a href="#cb96-3"></a></span>
<span id="cb96-4"><a href="#cb96-4"></a><span class="co"># Create and print structure of edu_equal_1</span></span>
<span id="cb96-5"><a href="#cb96-5"></a>edu_equal_1 <span class="ot">&lt;-</span> <span class="fu">read.dta</span>(path)</span>
<span id="cb96-6"><a href="#cb96-6"></a><span class="fu">str</span>(edu_equal_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 'data.frame':    12214 obs. of  27 variables:
#&gt;  $ hhid              : num  1 1 1 2 2 3 4 4 5 6 ...
#&gt;  $ hhweight          : num  627 627 627 627 627 ...
#&gt;  $ location          : Factor w/ 2 levels "urban location",..: 1 1 1 1 1 2 2 2 1 1 ...
#&gt;  $ region            : Factor w/ 9 levels "Sofia city","Bourgass",..: 8 8 8 9 9 4 4 4 8 8 ...
#&gt;  $ ethnicity_head    : Factor w/ 4 levels "Bulgaria","Turks",..: 2 2 2 1 1 1 1 1 1 1 ...
#&gt;  $ age               : num  37 11 8 73 70 75 79 80 82 83 ...
#&gt;  $ gender            : Factor w/ 2 levels "male","female": 2 2 1 1 2 1 1 2 2 2 ...
#&gt;  $ relation          : Factor w/ 9 levels "head                      ",..: 1 3 3 1 2 1 1 2 1 1 ...
#&gt;  $ literate          : Factor w/ 2 levels "no","yes": 1 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ income_mnt        : num  13.3 13.3 13.3 142.5 142.5 ...
#&gt;  $ income            : num  160 160 160 1710 1710 ...
#&gt;  $ aggregate         : num  1042 1042 1042 3271 3271 ...
#&gt;  $ aggr_ind_annual   : num  347 347 347 1635 1635 ...
#&gt;  $ educ_completed    : int  2 4 4 4 3 3 3 3 4 4 ...
#&gt;  $ grade_complete    : num  4 3 0 3 4 4 4 4 5 5 ...
#&gt;  $ grade_all         : num  4 11 8 11 8 8 8 8 13 13 ...
#&gt;  $ unemployed        : int  2 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ reason_OLF        : int  NA NA NA 3 3 3 9 9 3 3 ...
#&gt;  $ sector            : int  NA NA NA NA NA NA 1 1 NA NA ...
#&gt;  $ occupation        : int  NA NA NA NA NA NA 5 5 NA NA ...
#&gt;  $ earn_mont         : num  0 0 0 0 0 0 20 20 0 0 ...
#&gt;  $ earn_ann          : num  0 0 0 0 0 0 240 240 0 0 ...
#&gt;  $ hours_week        : num  NA NA NA NA NA NA 30 35 NA NA ...
#&gt;  $ hours_mnt         : num  NA NA NA NA NA ...
#&gt;  $ fulltime          : int  NA NA NA NA NA NA 1 1 NA NA ...
#&gt;  $ hhexp             : num  100 100 100 343 343 ...
#&gt;  $ legacy_pension_amt: num  NA NA NA NA NA NA NA NA NA NA ...
#&gt;  - attr(*, "datalabel")= chr ""
#&gt;  - attr(*, "time.stamp")= chr ""
#&gt;  - attr(*, "formats")= chr [1:27] "%9.0g" "%9.0g" "%9.0g" "%9.0g" ...
#&gt;  - attr(*, "types")= int [1:27] 100 100 108 108 108 100 108 108 108 100 ...
#&gt;  - attr(*, "val.labels")= chr [1:27] "" "" "location" "region" ...
#&gt;  - attr(*, "var.labels")= chr [1:27] "hhid" "hhweight" "location" "region" ...
#&gt;  - attr(*, "expansion.fields")=List of 12
#&gt;   ..$ : chr [1:3] "_dta" "_svy_su1" "cluster"
#&gt;   ..$ : chr [1:3] "_dta" "_svy_strata1" "strata"
#&gt;   ..$ : chr [1:3] "_dta" "_svy_stages" "1"
#&gt;   ..$ : chr [1:3] "_dta" "_svy_version" "2"
#&gt;   ..$ : chr [1:3] "_dta" "__XijVarLabcons" "(sum) cons"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_Xij" "cons"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_str" "0"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_j" "group"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_ver" "v.2"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_i" "hhid dur"
#&gt;   ..$ : chr [1:3] "_dta" "note1" "variables g1pc, g2pc, g3pc, g4pc, g5pc, g7pc, g8pc, g9pc, g10pc, g11pc, g12pc,  gall, health, rent, durables we"| __truncated__
#&gt;   ..$ : chr [1:3] "_dta" "note0" "1"
#&gt;  - attr(*, "version")= int 7
#&gt;  - attr(*, "label.table")=List of 12
#&gt;   ..$ location: Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "urban location" "rural location"
#&gt;   ..$ region  : Named int [1:9] 1 2 3 4 5 6 7 8 9
#&gt;   .. ..- attr(*, "names")= chr [1:9] "Sofia city" "Bourgass" "Varna" "Lovetch" ...
#&gt;   ..$ ethnic  : Named int [1:4] 1 2 3 4
#&gt;   .. ..- attr(*, "names")= chr [1:4] "Bulgaria" "Turks" "Roma" "Other"
#&gt;   ..$ s2_q2   : Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "male" "female"
#&gt;   ..$ s2_q3   : Named int [1:9] 1 2 3 4 5 6 7 8 9
#&gt;   .. ..- attr(*, "names")= chr [1:9] "head                      " "spouse/partner            " "child                     " "son/daughter-in-law       " ...
#&gt;   ..$ lit     : Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "no" "yes"
#&gt;   ..$         : Named int [1:4] 1 2 3 4
#&gt;   .. ..- attr(*, "names")= chr [1:4] "never attanded" "primary" "secondary" "postsecondary"
#&gt;   ..$         : Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "Not unemployed" "Unemployed"
#&gt;   ..$         : Named int [1:10] 1 2 3 4 5 6 7 8 9 10
#&gt;   .. ..- attr(*, "names")= chr [1:10] "student" "housewife/childcare" "in retirement" "illness, disability" ...
#&gt;   ..$         : Named int [1:10] 1 2 3 4 5 6 7 8 9 10
#&gt;   .. ..- attr(*, "names")= chr [1:10] "agriculture" "mining" "manufacturing" "utilities" ...
#&gt;   ..$         : Named int [1:5] 1 2 3 4 5
#&gt;   .. ..- attr(*, "names")= chr [1:5] "private company" "public works program" "government,public sector, army" "private individual" ...
#&gt;   ..$         : Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "no" "yes"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1"></a><span class="co"># Create and print structure of edu_equal_2</span></span>
<span id="cb98-2"><a href="#cb98-2"></a>edu_equal_2 <span class="ot">&lt;-</span> <span class="fu">read.dta</span>(path, <span class="at">convert.factors =</span> F)</span>
<span id="cb98-3"><a href="#cb98-3"></a><span class="fu">str</span>(edu_equal_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 'data.frame':    12214 obs. of  27 variables:
#&gt;  $ hhid              : num  1 1 1 2 2 3 4 4 5 6 ...
#&gt;  $ hhweight          : num  627 627 627 627 627 ...
#&gt;  $ location          : int  1 1 1 1 1 2 2 2 1 1 ...
#&gt;  $ region            : int  8 8 8 9 9 4 4 4 8 8 ...
#&gt;  $ ethnicity_head    : int  2 2 2 1 1 1 1 1 1 1 ...
#&gt;  $ age               : num  37 11 8 73 70 75 79 80 82 83 ...
#&gt;  $ gender            : int  2 2 1 1 2 1 1 2 2 2 ...
#&gt;  $ relation          : int  1 3 3 1 2 1 1 2 1 1 ...
#&gt;  $ literate          : int  1 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ income_mnt        : num  13.3 13.3 13.3 142.5 142.5 ...
#&gt;  $ income            : num  160 160 160 1710 1710 ...
#&gt;  $ aggregate         : num  1042 1042 1042 3271 3271 ...
#&gt;  $ aggr_ind_annual   : num  347 347 347 1635 1635 ...
#&gt;  $ educ_completed    : int  2 4 4 4 3 3 3 3 4 4 ...
#&gt;  $ grade_complete    : num  4 3 0 3 4 4 4 4 5 5 ...
#&gt;  $ grade_all         : num  4 11 8 11 8 8 8 8 13 13 ...
#&gt;  $ unemployed        : int  2 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ reason_OLF        : int  NA NA NA 3 3 3 9 9 3 3 ...
#&gt;  $ sector            : int  NA NA NA NA NA NA 1 1 NA NA ...
#&gt;  $ occupation        : int  NA NA NA NA NA NA 5 5 NA NA ...
#&gt;  $ earn_mont         : num  0 0 0 0 0 0 20 20 0 0 ...
#&gt;  $ earn_ann          : num  0 0 0 0 0 0 240 240 0 0 ...
#&gt;  $ hours_week        : num  NA NA NA NA NA NA 30 35 NA NA ...
#&gt;  $ hours_mnt         : num  NA NA NA NA NA ...
#&gt;  $ fulltime          : int  NA NA NA NA NA NA 1 1 NA NA ...
#&gt;  $ hhexp             : num  100 100 100 343 343 ...
#&gt;  $ legacy_pension_amt: num  NA NA NA NA NA NA NA NA NA NA ...
#&gt;  - attr(*, "datalabel")= chr ""
#&gt;  - attr(*, "time.stamp")= chr ""
#&gt;  - attr(*, "formats")= chr [1:27] "%9.0g" "%9.0g" "%9.0g" "%9.0g" ...
#&gt;  - attr(*, "types")= int [1:27] 100 100 108 108 108 100 108 108 108 100 ...
#&gt;  - attr(*, "val.labels")= chr [1:27] "" "" "location" "region" ...
#&gt;  - attr(*, "var.labels")= chr [1:27] "hhid" "hhweight" "location" "region" ...
#&gt;  - attr(*, "expansion.fields")=List of 12
#&gt;   ..$ : chr [1:3] "_dta" "_svy_su1" "cluster"
#&gt;   ..$ : chr [1:3] "_dta" "_svy_strata1" "strata"
#&gt;   ..$ : chr [1:3] "_dta" "_svy_stages" "1"
#&gt;   ..$ : chr [1:3] "_dta" "_svy_version" "2"
#&gt;   ..$ : chr [1:3] "_dta" "__XijVarLabcons" "(sum) cons"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_Xij" "cons"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_str" "0"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_j" "group"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_ver" "v.2"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_i" "hhid dur"
#&gt;   ..$ : chr [1:3] "_dta" "note1" "variables g1pc, g2pc, g3pc, g4pc, g5pc, g7pc, g8pc, g9pc, g10pc, g11pc, g12pc,  gall, health, rent, durables we"| __truncated__
#&gt;   ..$ : chr [1:3] "_dta" "note0" "1"
#&gt;  - attr(*, "version")= int 7
#&gt;  - attr(*, "label.table")=List of 12
#&gt;   ..$ location: Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "urban location" "rural location"
#&gt;   ..$ region  : Named int [1:9] 1 2 3 4 5 6 7 8 9
#&gt;   .. ..- attr(*, "names")= chr [1:9] "Sofia city" "Bourgass" "Varna" "Lovetch" ...
#&gt;   ..$ ethnic  : Named int [1:4] 1 2 3 4
#&gt;   .. ..- attr(*, "names")= chr [1:4] "Bulgaria" "Turks" "Roma" "Other"
#&gt;   ..$ s2_q2   : Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "male" "female"
#&gt;   ..$ s2_q3   : Named int [1:9] 1 2 3 4 5 6 7 8 9
#&gt;   .. ..- attr(*, "names")= chr [1:9] "head                      " "spouse/partner            " "child                     " "son/daughter-in-law       " ...
#&gt;   ..$ lit     : Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "no" "yes"
#&gt;   ..$         : Named int [1:4] 1 2 3 4
#&gt;   .. ..- attr(*, "names")= chr [1:4] "never attanded" "primary" "secondary" "postsecondary"
#&gt;   ..$         : Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "Not unemployed" "Unemployed"
#&gt;   ..$         : Named int [1:10] 1 2 3 4 5 6 7 8 9 10
#&gt;   .. ..- attr(*, "names")= chr [1:10] "student" "housewife/childcare" "in retirement" "illness, disability" ...
#&gt;   ..$         : Named int [1:10] 1 2 3 4 5 6 7 8 9 10
#&gt;   .. ..- attr(*, "names")= chr [1:10] "agriculture" "mining" "manufacturing" "utilities" ...
#&gt;   ..$         : Named int [1:5] 1 2 3 4 5
#&gt;   .. ..- attr(*, "names")= chr [1:5] "private company" "public works program" "government,public sector, army" "private individual" ...
#&gt;   ..$         : Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "no" "yes"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1"></a><span class="co"># Create and print structure of edu_equal_3</span></span>
<span id="cb100-2"><a href="#cb100-2"></a>edu_equal_3 <span class="ot">&lt;-</span> <span class="fu">read.dta</span>(path, <span class="at">convert.underscore =</span> T)</span>
<span id="cb100-3"><a href="#cb100-3"></a><span class="fu">str</span>(edu_equal_3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 'data.frame':    12214 obs. of  27 variables:
#&gt;  $ hhid              : num  1 1 1 2 2 3 4 4 5 6 ...
#&gt;  $ hhweight          : num  627 627 627 627 627 ...
#&gt;  $ location          : Factor w/ 2 levels "urban location",..: 1 1 1 1 1 2 2 2 1 1 ...
#&gt;  $ region            : Factor w/ 9 levels "Sofia city","Bourgass",..: 8 8 8 9 9 4 4 4 8 8 ...
#&gt;  $ ethnicity.head    : Factor w/ 4 levels "Bulgaria","Turks",..: 2 2 2 1 1 1 1 1 1 1 ...
#&gt;  $ age               : num  37 11 8 73 70 75 79 80 82 83 ...
#&gt;  $ gender            : Factor w/ 2 levels "male","female": 2 2 1 1 2 1 1 2 2 2 ...
#&gt;  $ relation          : Factor w/ 9 levels "head                      ",..: 1 3 3 1 2 1 1 2 1 1 ...
#&gt;  $ literate          : Factor w/ 2 levels "no","yes": 1 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ income.mnt        : num  13.3 13.3 13.3 142.5 142.5 ...
#&gt;  $ income            : num  160 160 160 1710 1710 ...
#&gt;  $ aggregate         : num  1042 1042 1042 3271 3271 ...
#&gt;  $ aggr.ind.annual   : num  347 347 347 1635 1635 ...
#&gt;  $ educ.completed    : int  2 4 4 4 3 3 3 3 4 4 ...
#&gt;  $ grade.complete    : num  4 3 0 3 4 4 4 4 5 5 ...
#&gt;  $ grade.all         : num  4 11 8 11 8 8 8 8 13 13 ...
#&gt;  $ unemployed        : int  2 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ reason.OLF        : int  NA NA NA 3 3 3 9 9 3 3 ...
#&gt;  $ sector            : int  NA NA NA NA NA NA 1 1 NA NA ...
#&gt;  $ occupation        : int  NA NA NA NA NA NA 5 5 NA NA ...
#&gt;  $ earn.mont         : num  0 0 0 0 0 0 20 20 0 0 ...
#&gt;  $ earn.ann          : num  0 0 0 0 0 0 240 240 0 0 ...
#&gt;  $ hours.week        : num  NA NA NA NA NA NA 30 35 NA NA ...
#&gt;  $ hours.mnt         : num  NA NA NA NA NA ...
#&gt;  $ fulltime          : int  NA NA NA NA NA NA 1 1 NA NA ...
#&gt;  $ hhexp             : num  100 100 100 343 343 ...
#&gt;  $ legacy.pension.amt: num  NA NA NA NA NA NA NA NA NA NA ...
#&gt;  - attr(*, "datalabel")= chr ""
#&gt;  - attr(*, "time.stamp")= chr ""
#&gt;  - attr(*, "formats")= chr [1:27] "%9.0g" "%9.0g" "%9.0g" "%9.0g" ...
#&gt;  - attr(*, "types")= int [1:27] 100 100 108 108 108 100 108 108 108 100 ...
#&gt;  - attr(*, "val.labels")= chr [1:27] "" "" "location" "region" ...
#&gt;  - attr(*, "var.labels")= chr [1:27] "hhid" "hhweight" "location" "region" ...
#&gt;  - attr(*, "expansion.fields")=List of 12
#&gt;   ..$ : chr [1:3] "_dta" "_svy_su1" "cluster"
#&gt;   ..$ : chr [1:3] "_dta" "_svy_strata1" "strata"
#&gt;   ..$ : chr [1:3] "_dta" "_svy_stages" "1"
#&gt;   ..$ : chr [1:3] "_dta" "_svy_version" "2"
#&gt;   ..$ : chr [1:3] "_dta" "__XijVarLabcons" "(sum) cons"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_Xij" "cons"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_str" "0"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_j" "group"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_ver" "v.2"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_i" "hhid dur"
#&gt;   ..$ : chr [1:3] "_dta" "note1" "variables g1pc, g2pc, g3pc, g4pc, g5pc, g7pc, g8pc, g9pc, g10pc, g11pc, g12pc,  gall, health, rent, durables we"| __truncated__
#&gt;   ..$ : chr [1:3] "_dta" "note0" "1"
#&gt;  - attr(*, "version")= int 7
#&gt;  - attr(*, "label.table")=List of 12
#&gt;   ..$ location: Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "urban location" "rural location"
#&gt;   ..$ region  : Named int [1:9] 1 2 3 4 5 6 7 8 9
#&gt;   .. ..- attr(*, "names")= chr [1:9] "Sofia city" "Bourgass" "Varna" "Lovetch" ...
#&gt;   ..$ ethnic  : Named int [1:4] 1 2 3 4
#&gt;   .. ..- attr(*, "names")= chr [1:4] "Bulgaria" "Turks" "Roma" "Other"
#&gt;   ..$ s2_q2   : Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "male" "female"
#&gt;   ..$ s2_q3   : Named int [1:9] 1 2 3 4 5 6 7 8 9
#&gt;   .. ..- attr(*, "names")= chr [1:9] "head                      " "spouse/partner            " "child                     " "son/daughter-in-law       " ...
#&gt;   ..$ lit     : Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "no" "yes"
#&gt;   ..$         : Named int [1:4] 1 2 3 4
#&gt;   .. ..- attr(*, "names")= chr [1:4] "never attanded" "primary" "secondary" "postsecondary"
#&gt;   ..$         : Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "Not unemployed" "Unemployed"
#&gt;   ..$         : Named int [1:10] 1 2 3 4 5 6 7 8 9 10
#&gt;   .. ..- attr(*, "names")= chr [1:10] "student" "housewife/childcare" "in retirement" "illness, disability" ...
#&gt;   ..$         : Named int [1:10] 1 2 3 4 5 6 7 8 9 10
#&gt;   .. ..- attr(*, "names")= chr [1:10] "agriculture" "mining" "manufacturing" "utilities" ...
#&gt;   ..$         : Named int [1:5] 1 2 3 4 5
#&gt;   .. ..- attr(*, "names")= chr [1:5] "private company" "public works program" "government,public sector, army" "private individual" ...
#&gt;   ..$         : Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "no" "yes"</code></pre>
</div>
</div>
<p>Great! Can you tell the difference between the different versions of <a href="http://www.rdocumentation.org/packages/foreign/functions/read.dta"><code>read.dta()</code></a>? For this data, the first version (where you simply specified the file path) will be most useful to work with. Head over to the next exercise to see if you actually understand your data!</p>
</section>
<section id="do-you-know-your-data" class="level2" data-number="5.11">
<h2 data-number="5.11" class="anchored" data-anchor-id="do-you-know-your-data"><span class="header-section-number">5.11</span> Do you know your data?</h2>
<p>The previous exercise dealt about socio-economic indicators and access to education of different individuals. The <code>edu_equal_1</code> dataset that you’ve built is already available in the workspace. Now that you have it in R, it’s pretty easy to get some basic insights.</p>
<p>For example, you can ask yourself <em>how many observations (e.g.&nbsp;how many people) have an <code>age</code> higher than 40 and are <code>literate</code>?</em> When you call</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1"></a><span class="fu">str</span>(edu_equal_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 'data.frame':    12214 obs. of  27 variables:
#&gt;  $ hhid              : num  1 1 1 2 2 3 4 4 5 6 ...
#&gt;  $ hhweight          : num  627 627 627 627 627 ...
#&gt;  $ location          : Factor w/ 2 levels "urban location",..: 1 1 1 1 1 2 2 2 1 1 ...
#&gt;  $ region            : Factor w/ 9 levels "Sofia city","Bourgass",..: 8 8 8 9 9 4 4 4 8 8 ...
#&gt;  $ ethnicity_head    : Factor w/ 4 levels "Bulgaria","Turks",..: 2 2 2 1 1 1 1 1 1 1 ...
#&gt;  $ age               : num  37 11 8 73 70 75 79 80 82 83 ...
#&gt;  $ gender            : Factor w/ 2 levels "male","female": 2 2 1 1 2 1 1 2 2 2 ...
#&gt;  $ relation          : Factor w/ 9 levels "head                      ",..: 1 3 3 1 2 1 1 2 1 1 ...
#&gt;  $ literate          : Factor w/ 2 levels "no","yes": 1 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ income_mnt        : num  13.3 13.3 13.3 142.5 142.5 ...
#&gt;  $ income            : num  160 160 160 1710 1710 ...
#&gt;  $ aggregate         : num  1042 1042 1042 3271 3271 ...
#&gt;  $ aggr_ind_annual   : num  347 347 347 1635 1635 ...
#&gt;  $ educ_completed    : int  2 4 4 4 3 3 3 3 4 4 ...
#&gt;  $ grade_complete    : num  4 3 0 3 4 4 4 4 5 5 ...
#&gt;  $ grade_all         : num  4 11 8 11 8 8 8 8 13 13 ...
#&gt;  $ unemployed        : int  2 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ reason_OLF        : int  NA NA NA 3 3 3 9 9 3 3 ...
#&gt;  $ sector            : int  NA NA NA NA NA NA 1 1 NA NA ...
#&gt;  $ occupation        : int  NA NA NA NA NA NA 5 5 NA NA ...
#&gt;  $ earn_mont         : num  0 0 0 0 0 0 20 20 0 0 ...
#&gt;  $ earn_ann          : num  0 0 0 0 0 0 240 240 0 0 ...
#&gt;  $ hours_week        : num  NA NA NA NA NA NA 30 35 NA NA ...
#&gt;  $ hours_mnt         : num  NA NA NA NA NA ...
#&gt;  $ fulltime          : int  NA NA NA NA NA NA 1 1 NA NA ...
#&gt;  $ hhexp             : num  100 100 100 343 343 ...
#&gt;  $ legacy_pension_amt: num  NA NA NA NA NA NA NA NA NA NA ...
#&gt;  - attr(*, "datalabel")= chr ""
#&gt;  - attr(*, "time.stamp")= chr ""
#&gt;  - attr(*, "formats")= chr [1:27] "%9.0g" "%9.0g" "%9.0g" "%9.0g" ...
#&gt;  - attr(*, "types")= int [1:27] 100 100 108 108 108 100 108 108 108 100 ...
#&gt;  - attr(*, "val.labels")= chr [1:27] "" "" "location" "region" ...
#&gt;  - attr(*, "var.labels")= chr [1:27] "hhid" "hhweight" "location" "region" ...
#&gt;  - attr(*, "expansion.fields")=List of 12
#&gt;   ..$ : chr [1:3] "_dta" "_svy_su1" "cluster"
#&gt;   ..$ : chr [1:3] "_dta" "_svy_strata1" "strata"
#&gt;   ..$ : chr [1:3] "_dta" "_svy_stages" "1"
#&gt;   ..$ : chr [1:3] "_dta" "_svy_version" "2"
#&gt;   ..$ : chr [1:3] "_dta" "__XijVarLabcons" "(sum) cons"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_Xij" "cons"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_str" "0"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_j" "group"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_ver" "v.2"
#&gt;   ..$ : chr [1:3] "_dta" "ReS_i" "hhid dur"
#&gt;   ..$ : chr [1:3] "_dta" "note1" "variables g1pc, g2pc, g3pc, g4pc, g5pc, g7pc, g8pc, g9pc, g10pc, g11pc, g12pc,  gall, health, rent, durables we"| __truncated__
#&gt;   ..$ : chr [1:3] "_dta" "note0" "1"
#&gt;  - attr(*, "version")= int 7
#&gt;  - attr(*, "label.table")=List of 12
#&gt;   ..$ location: Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "urban location" "rural location"
#&gt;   ..$ region  : Named int [1:9] 1 2 3 4 5 6 7 8 9
#&gt;   .. ..- attr(*, "names")= chr [1:9] "Sofia city" "Bourgass" "Varna" "Lovetch" ...
#&gt;   ..$ ethnic  : Named int [1:4] 1 2 3 4
#&gt;   .. ..- attr(*, "names")= chr [1:4] "Bulgaria" "Turks" "Roma" "Other"
#&gt;   ..$ s2_q2   : Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "male" "female"
#&gt;   ..$ s2_q3   : Named int [1:9] 1 2 3 4 5 6 7 8 9
#&gt;   .. ..- attr(*, "names")= chr [1:9] "head                      " "spouse/partner            " "child                     " "son/daughter-in-law       " ...
#&gt;   ..$ lit     : Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "no" "yes"
#&gt;   ..$         : Named int [1:4] 1 2 3 4
#&gt;   .. ..- attr(*, "names")= chr [1:4] "never attanded" "primary" "secondary" "postsecondary"
#&gt;   ..$         : Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "Not unemployed" "Unemployed"
#&gt;   ..$         : Named int [1:10] 1 2 3 4 5 6 7 8 9 10
#&gt;   .. ..- attr(*, "names")= chr [1:10] "student" "housewife/childcare" "in retirement" "illness, disability" ...
#&gt;   ..$         : Named int [1:10] 1 2 3 4 5 6 7 8 9 10
#&gt;   .. ..- attr(*, "names")= chr [1:10] "agriculture" "mining" "manufacturing" "utilities" ...
#&gt;   ..$         : Named int [1:5] 1 2 3 4 5
#&gt;   .. ..- attr(*, "names")= chr [1:5] "private company" "public works program" "government,public sector, army" "private individual" ...
#&gt;   ..$         : Named int [1:2] 1 2
#&gt;   .. ..- attr(*, "names")= chr [1:2] "no" "yes"</code></pre>
</div>
</div>
<p>You’ll see that <code>age</code> is an integer, and <code>literate</code> is a factor, with the levels “yes” and “no”. The following expression thus answers the question:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1"></a><span class="fu">nrow</span>(<span class="fu">subset</span>(edu_equal_1, age <span class="sc">&gt;</span> <span class="dv">40</span> <span class="sc">&amp;</span> literate <span class="sc">==</span> <span class="st">"yes"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 6506</code></pre>
</div>
</div>
<p>Up to you to answer a similar question now:</p>
<blockquote class="blockquote">
<h2 id="question-5" data-number="5.12" class="anchored"><span class="header-section-number">5.12</span> <em>Question</em></h2>
<p>How many observations/individuals of Bulgarian ethnicity have an income above 1000?<br> <br> ⬜ 9457<br> ⬜ 1000<br> ✅ 8997<br> ⬜ 10840<br></p>
</blockquote>
</section>
<section id="import-spss-data-with-foreign-1" class="level2" data-number="5.13">
<h2 data-number="5.13" class="anchored" data-anchor-id="import-spss-data-with-foreign-1"><span class="header-section-number">5.13</span> Import SPSS data with foreign (1)</h2>
<p>All great things come in pairs. Where <code>foreign</code> provided <a href="http://www.rdocumentation.org/packages/foreign/functions/read.dta" target="_blank" rel="noopener noreferrer"><code>read.dta()</code></a> to read Stata data, there’s also <a href="http://www.rdocumentation.org/packages/foreign/functions/read.spss" target="_blank" rel="noopener noreferrer"><code>read.spss()</code></a> to read SPSS data files. To get a data frame, make sure to set <code>to.data.frame = TRUE</code> inside <a href="http://www.rdocumentation.org/packages/foreign/functions/read.spss" target="_blank" rel="noopener noreferrer"><code>read.spss()</code></a>.</p>
<p>In this exercise, you’ll be working with socio-economic variables from different countries (Source: <a href="http://cw.routledge.com/textbooks/9780415372985/resources/datasets.asp" target="_blank" rel="noopener noreferrer">Quantative Data Analysis in Education</a>). The SPSS data is in a file called <code>international.sav</code>, which is in your working directory. You can also download it <a href="http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/international.sav" target="_blank" rel="noopener noreferrer">here</a> if you want to play around with it some more.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Import the data file <code>"international.sav"</code> and have R convert it to a data frame. Store this data frame as <code>demo</code>.</li>
<li>Create a boxplot of the <code>gdp</code> variable of <code>demo</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1"></a><span class="co"># Import international.sav as a data frame: demo</span></span>
<span id="cb106-2"><a href="#cb106-2"></a>demo <span class="ot">&lt;-</span> <span class="fu">read.spss</span>(<span class="st">"data/international.sav"</span>, <span class="at">to.data.frame =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; re-encoding from CP1252</code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1"></a><span class="co"># Create boxplot of gdp variable of demo</span></span>
<span id="cb108-2"><a href="#cb108-2"></a><span class="fu">boxplot</span>(demo<span class="sc">$</span>gdp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="02_importing_data_intermediate_files/figure-html/unnamed-chunk-39-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="02_importing_data_intermediate_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="excursion-correlation" class="level2" data-number="5.14">
<h2 data-number="5.14" class="anchored" data-anchor-id="excursion-correlation"><span class="header-section-number">5.14</span> Excursion: Correlation</h2>
<p>If you’re familiar with statistics, you’ll have heard about Pearson’s Correlation. It is a measurement to evaluate the linear dependency between two variables, say \(X\) and \(Y\). It can range from -1 to 1; if it’s close to 1 it means that there is a strong positive association between the variables. If \(X\) is high, also \(Y\) tends to be high. If it’s close to -1, there is a strong negative association: If \(X\) is high, \(Y\) tends to be low. When the Pearson correlation between two variables is 0, these variables are possibly independent: there is no association between \(X\) and \(Y\).</p>
<p>You can calculate the correlation between two vectors with the <a href="http://www.rdocumentation.org/packages/stats/functions/cor"><code>cor()</code></a> function. Take this code for example, that computes the correlation between the columns <code>height</code> and <code>width</code> of a fictional data frame <code>size</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1"></a><span class="fu">cor</span>(size<span class="sc">$</span>height, size<span class="sc">$</span>width)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The data you’ve worked with in the previous exercise, <a href="http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/international.sav" target="_blank" rel="noopener noreferrer">international.sav</a>, is again available in your working directory. It’s now up to import it and undertake the correct calculations to answer the following question:</p>
<blockquote class="blockquote">
<h2 id="question-6" data-number="5.15" class="anchored"><span class="header-section-number">5.15</span> <em>Question</em></h2>
<p>What is the correlation coefficient for the two numerical variables <code>gdp</code> and <code>f_illit</code> (female illiteracy rate)?<br> <br> ⬜ The correlation is very close to 0. Therefore, no association is existing between female illiteracy and GDP for the data set that is used.<br> ✅ The correlation is around -0.45. There is a negative correlation, but it is rather weak.<br> ⬜ The correlation is almost equal to +1. GDP and female illiteracy are almost perfectly, positive correlated.<br> ⬜ The correlation is around +0.45. There is a positive correlation, but it is rather weak.<br></p>
</blockquote>
</section>
<section id="import-spss-data-with-foreign-2" class="level2" data-number="5.16">
<h2 data-number="5.16" class="anchored" data-anchor-id="import-spss-data-with-foreign-2"><span class="header-section-number">5.16</span> Import SPSS data with foreign (2)</h2>
<p>In the previous exercise, you used the <code>to.data.frame</code> argument inside <a href="http://www.rdocumentation.org/packages/foreign/functions/read.spss" target="_blank" rel="noopener noreferrer"><code>read.spss()</code></a>. There are many other ways in which to customize the way your SPSS data is imported.</p>
<p>In this exercise you will experiment with another argument, <code>use.value.labels</code>. It specifies whether variables with value labels should be converted into R factors with levels that are named accordingly. The argument is <code>TRUE</code> by default which means that so called labelled variables inside SPSS are converted to factors inside R.</p>
<p>You’ll again be working with the <a href="http://s3.amazonaws.com/assets.datacamp.com/production/course_1478/datasets/international.sav" target="_blank" rel="noopener noreferrer">international.sav</a> data, which is available in your current working directory.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Import the data file <code>"international.sav"</code> as a data frame, <code>demo_1</code>.</li>
<li>Print the first few rows of <code>demo_1</code> using the <a href="http://www.rdocumentation.org/packages/utils/functions/head" target="_blank" rel="noopener noreferrer"><code>head()</code></a> function.</li>
<li>Import the data file <code>"international.sav"</code> as a data frame, <code>demo_2</code>, but this time in a way such that variables with value labels are <em>not</em> converted to R factors.</li>
<li>Again, print the first few rows of <code>demo_2</code>. Can you tell the difference between the two data frames?</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1"></a><span class="co"># foreign is already loaded</span></span>
<span id="cb110-2"><a href="#cb110-2"></a></span>
<span id="cb110-3"><a href="#cb110-3"></a><span class="co"># Import international.sav as demo_1</span></span>
<span id="cb110-4"><a href="#cb110-4"></a>demo_1 <span class="ot">&lt;-</span> <span class="fu">read.spss</span>(<span class="st">"data/international.sav"</span>, <span class="at">to.data.frame =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; re-encoding from CP1252</code></pre>
</div>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1"></a><span class="co"># Print out the head of demo_1</span></span>
<span id="cb112-2"><a href="#cb112-2"></a><span class="fu">head</span>(demo_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["id"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["country"],"name":[2],"type":["chr"],"align":["left"]},{"label":["contint"],"name":[3],"type":["fct"],"align":["left"]},{"label":["m_illit"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["f_illit"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["lifeexpt"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["gdp"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"Argentina","3":"Americas","4":"3.0","5":"3.0","6":"16","7":"3375","_rn_":"1"},{"1":"2","2":"Benin","3":"Africa","4":"45.2","5":"74.5","6":"7","7":"521","_rn_":"2"},{"1":"3","2":"Burundi","3":"Africa","4":"33.2","5":"48.1","6":"5","7":"86","_rn_":"3"},{"1":"4","2":"Chile","3":"Americas","4":"4.2","5":"4.4","6":"14","7":"4523","_rn_":"4"},{"1":"5","2":"Dominican Republic","3":"Americas","4":"12.0","5":"12.7","6":"12","7":"2408","_rn_":"5"},{"1":"6","2":"El Salvador","3":"Americas","4":"17.6","5":"22.9","6":"11","7":"2302","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1"></a><span class="co"># Import international.sav as demo_2</span></span>
<span id="cb113-2"><a href="#cb113-2"></a>demo_2 <span class="ot">&lt;-</span> <span class="fu">read.spss</span>(<span class="st">"data/international.sav"</span>, <span class="at">to.data.frame =</span> T, <span class="at">use.value.labels =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; re-encoding from CP1252</code></pre>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1"></a><span class="co"># Print out the head of demo_2</span></span>
<span id="cb115-2"><a href="#cb115-2"></a><span class="fu">head</span>(demo_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["id"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["country"],"name":[2],"type":["chr"],"align":["left"]},{"label":["contint"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["m_illit"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["f_illit"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["lifeexpt"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["gdp"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"Argentina","3":"2","4":"3.0","5":"3.0","6":"16","7":"3375","_rn_":"1"},{"1":"2","2":"Benin","3":"1","4":"45.2","5":"74.5","6":"7","7":"521","_rn_":"2"},{"1":"3","2":"Burundi","3":"1","4":"33.2","5":"48.1","6":"5","7":"86","_rn_":"3"},{"1":"4","2":"Chile","3":"2","4":"4.2","5":"4.4","6":"14","7":"4523","_rn_":"4"},{"1":"5","2":"Dominican Republic","3":"2","4":"12.0","5":"12.7","6":"12","7":"2408","_rn_":"5"},{"1":"6","2":"El Salvador","3":"2","4":"17.6","5":"22.9","6":"11","7":"2302","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../../../../content/R/topics/02_importing_data/01_importing_data_beginner/01_importing_data_beginner.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">2.1: Introduction to Importing Data</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../../../../content/R/topics/02_importing_data/03_working_with_web_data/03_working_with_web_data.html" class="pagination-link">
        <span class="nav-page-text">2.3: Working with web data</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Content 2022 by <a href="https://www.startupengineer.io/authors/schwarz/">Joschka Schwarz</a> <br> All content licensed under a <a href="https://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International license (CC BY-NC 4.0)</a></div>   
    <div class="nav-footer-right">Made with and <a href="https://quarto.org/">Quarto</a><br> <a href="https://www.github.com/jwarz/jwarz.github.io">View the source at GitHub</a></div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"selector":".lightbox","descPosition":"bottom","openEffect":"zoom","closeEffect":"zoom","loop":true});</script>



<script src="../../../../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>