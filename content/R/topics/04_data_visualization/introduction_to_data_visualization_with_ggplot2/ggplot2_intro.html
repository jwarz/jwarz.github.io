<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Joschka Schwarz">

<title>Joschka Schwarz - Introduction to Data Visualization with ggplot2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../../">
<link href="../../../../../content/R/topics/04_data_visualization/data_visualization_with_ggplot2_intermediate/ggplot2_intermediate.html" rel="next">
<script src="../../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../../../site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../../../../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../../../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../../../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>

<link href="../../../../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../../../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>


</head>

<body class="nav-sidebar docked nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../../../index.html">
    <span class="navbar-title">Joschka Schwarz</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-science" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Data Science</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-science">    
        <li>
    <a class="dropdown-item" href="../../../../../content/R/index.html">
 <span class="dropdown-text">R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../../../content/python/index.html">
 <span class="dropdown-text">Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../../../content/sql/index.html">
 <span class="dropdown-text">SQL</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../../../../slides/index.html">
 <span class="menu-text">Presentations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../resumes/index.html">
 <span class="menu-text">Resumes</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../../index.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jwarz/"><i class="bi bi-github" role="img" aria-label="Quarto GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/j-schwarz"><i class="bi bi-linkedin" role="img" aria-label="Quarto LinkedIn">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
                  <a href="" class="quarto-reader-toggle nav-link" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Introduction to Data Visualization with ggplot2</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/index.html" class="sidebar-item-text sidebar-link">Overview</a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Topics</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <b><i>1 Programming Basics</i></b>
  </li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/01_basics/01_programming_beginner/01_programming_beginner.html" class="sidebar-item-text sidebar-link">1.1: Introduction to R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/01_basics/02_programming_intermediate/02_programming_intermediate.html" class="sidebar-item-text sidebar-link">1.2: Intermediate R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/01_basics/03_programming_tidyverse/03_programming_tidyverse.html" class="sidebar-item-text sidebar-link">1.3: Introduction to the tidyverse</a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <b><i>2 Importing Data</i></b>
  </li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/02_importing_data/01_importing_data_beginner/01_importing_data_beginner.html" class="sidebar-item-text sidebar-link">2.1: Introduction to Importing Data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/02_importing_data/02_importing_data_intermediate/02_importing_data_intermediate.html" class="sidebar-item-text sidebar-link">2.2: Intermediate Importing Data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/02_importing_data/03_working_with_web_data/03_working_with_web_data.html" class="sidebar-item-text sidebar-link">2.3: Working with web data</a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <b><i>3 Data Wrangling</i></b>
  </li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/03_data_wrangling/01_data_manipulation_with_dplyr/01_data_manipulation_with_dplyr.html" class="sidebar-item-text sidebar-link">3.1: Data Manipulation with dplyr</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/03_data_wrangling/02_joining_data_with_dplyr/02_joining_data_with_dplyr.html" class="sidebar-item-text sidebar-link">3.2: Joining data with dplyr</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/03_data_wrangling/exploratory_data_analysis_in_r/exploratory_data_analysis_in_r.html" class="sidebar-item-text sidebar-link">3.3: Exploratory Data Analysis</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/03_data_wrangling/case_study_exploratory_data_analysis_in_r/case_study_exploratory_data_analysis_in_r.html" class="sidebar-item-text sidebar-link">3.4: Case Study: EDA</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/03_data_wrangling/cleaning_data_in_r/cleaning_data_in_r.html" class="sidebar-item-text sidebar-link">3.5: Cleaning Data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/03_data_wrangling/data_manipulation_with_datatable/data_manipulation_with_datatable.html" class="sidebar-item-text sidebar-link">3.6: Data Manipulation with data.table</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/03_data_wrangling/joining_data_with_datatable/joining_data_with_datatable.html" class="sidebar-item-text sidebar-link">3.7: Joining Data with data.table</a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <b><i>4 Data Visualization</i></b>
  </li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/04_data_visualization/introduction_to_data_visualization_with_ggplot2/ggplot2_intro.html" class="sidebar-item-text sidebar-link active">4.1: Introduction to Data Visualization with ggplot2</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/04_data_visualization/data_visualization_with_ggplot2_intermediate/ggplot2_intermediate.html" class="sidebar-item-text sidebar-link">4.2: Intermediate Data Visualization with ggplot2</a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <b><i>5 Statistics</i></b>
  </li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/01_statistics_beginner/01_statistics_beginner.html" class="sidebar-item-text sidebar-link">5.1: Introduction to Statistics</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/02_foundations_of_probability_in_r/02_foundations_of_probability_in_r.html" class="sidebar-item-text sidebar-link">5.2: Foundations of Probability</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/03_regression_beginner/03_regression_beginner.html" class="sidebar-item-text sidebar-link">5.3: Introduction to Regression</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/04_regression_intermediate/04_regression_intermediate.html" class="sidebar-item-text sidebar-link">5.4: Intermediate Regression</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/06_modeling_with_data_in_the_tidyverse/06_modeling_with_data_in_the_tidyverse.html" class="sidebar-item-text sidebar-link">5.5: Modeling with Data in the Tidyverse</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/09_experimental_design/09_experimental_design.html" class="sidebar-item-text sidebar-link">5.6: Experimental Design</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/10_ab_testing_in_r/10_ab_testing_in_r.html" class="sidebar-item-text sidebar-link">5.7: A/B Testing</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/19_fundamentals_of_bayesian_data_analysis/19_fundamentals_of_bayesian_data_analysis.html" class="sidebar-item-text sidebar-link">5.8: Fundamentals of Bayesian Data Analysis</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/05_statistics/21_factor_analysis_in_r/21_factor_analysis_in_r.html" class="sidebar-item-text sidebar-link">5.9: Factor Analysis</a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <b><i>7 Machine Learning</i></b>
  </li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/01_supervised_learning_classification/01_supervised_learning_classification.html" class="sidebar-item-text sidebar-link">7.1: Supervised Learning: Classification</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/02_supervised_learning_regression/02_supervised_learning_regression.html" class="sidebar-item-text sidebar-link">7.2: Supervised Learning: Regression</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/03_unsupervised_learning/03_unsupervised_learning.html" class="sidebar-item-text sidebar-link">7.3: Unsupervised Learning</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/04_machine_learning_in_the_tidyverse/04_machine_learning_in_the_tidyverse.html" class="sidebar-item-text sidebar-link">7.4: Machine Learning in the tidyverse</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/05_cluster_analysis/05_cluster_analysis.html" class="sidebar-item-text sidebar-link">7.5: Cluster Analysis</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/06_machine_learning_with_caret/06_machine_learning_with_caret.html" class="sidebar-item-text sidebar-link">7.6: Machine Learning with caret</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/07_modeling_with_tidymodels/07_modeling_with_tidymodels.html" class="sidebar-item-text sidebar-link">7.7: Modeling with tidymodels</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/08_machine_learning_with_tree-based_models/08_machine_learning_with_tree-based_models.html" class="sidebar-item-text sidebar-link">7.8: Machine Learning with tree-based Models</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/09_support_vector_machines/09_support_vector_machines.html" class="sidebar-item-text sidebar-link">7.9: Support Vector Machines</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/10_topic_modeling/10_topic_modeling.html" class="sidebar-item-text sidebar-link">7.10: Topic Modeling</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/11_hyperparameter_tuning/11_hyperparameter_tuning.html" class="sidebar-item-text sidebar-link">7.11: Hyperparameter Tuning</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/12_bayesian_regression_modeling_with_rstanarm/12_bayesian_regression_modeling_with_rstanarm.html" class="sidebar-item-text sidebar-link">7.12: Bayesian Regression Modeling</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/topics/07_machine_learning/13_spark_with_sparklyr_in_R/13_spark_with_sparklyr_in_R.html" class="sidebar-item-text sidebar-link">7.13: Introduction to Spark</a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">R Manuals</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/r-manuals/test.html" class="sidebar-item-text sidebar-link">1: An Introduction to R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/r-manuals/02-content.html" class="sidebar-item-text sidebar-link">2: R Data Import/Export</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/r-manuals/03-content.html" class="sidebar-item-text sidebar-link">3: R Installation and Administration</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/r-manuals/04-content.html" class="sidebar-item-text sidebar-link">4: Writing R Extensions</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/r-manuals/05-content.html" class="sidebar-item-text sidebar-link">5: R Language Definition</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../content/R/r-manuals/06-content.html" class="sidebar-item-text sidebar-link">6: R Internals</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">1</span>  Introduction</a>
  <ul class="collapse">
  <li><a href="#explore-and-explain" id="toc-explore-and-explain" class="nav-link" data-scroll-target="#explore-and-explain"><span class="toc-section-number">1.1</span>  Explore and explain</a></li>
  <li><a href="#data-columns-types-affect-plot-types" id="toc-data-columns-types-affect-plot-types" class="nav-link" data-scroll-target="#data-columns-types-affect-plot-types"><span class="toc-section-number">1.3</span>  Data columns types affect plot types</a></li>
  <li><a href="#the-grammar-of-graphics" id="toc-the-grammar-of-graphics" class="nav-link" data-scroll-target="#the-grammar-of-graphics"><span class="toc-section-number">1.4</span>  The grammar of graphics</a></li>
  <li><a href="#ggplot2-layers" id="toc-ggplot2-layers" class="nav-link" data-scroll-target="#ggplot2-layers"><span class="toc-section-number">1.6</span>  ggplot2 layers</a></li>
  <li><a href="#adding-geometries" id="toc-adding-geometries" class="nav-link" data-scroll-target="#adding-geometries"><span class="toc-section-number">1.7</span>  Adding geometries</a></li>
  </ul></li>
  <li><a href="#aesthetics" id="toc-aesthetics" class="nav-link" data-scroll-target="#aesthetics"><span class="toc-section-number">2</span>  Aesthetics</a>
  <ul class="collapse">
  <li><a href="#visible-aesthetics" id="toc-visible-aesthetics" class="nav-link" data-scroll-target="#visible-aesthetics"><span class="toc-section-number">2.1</span>  Visible aesthetics</a></li>
  <li><a href="#aesthetics-for-categorical-continuous-variables" id="toc-aesthetics-for-categorical-continuous-variables" class="nav-link" data-scroll-target="#aesthetics-for-categorical-continuous-variables"><span class="toc-section-number">2.2</span>  Aesthetics for categorical &amp; continuous variables</a></li>
  <li><a href="#using-attributes" id="toc-using-attributes" class="nav-link" data-scroll-target="#using-attributes"><span class="toc-section-number">2.4</span>  Using attributes</a></li>
  <li><a href="#modifying-aesthetics" id="toc-modifying-aesthetics" class="nav-link" data-scroll-target="#modifying-aesthetics"><span class="toc-section-number">2.5</span>  Modifying aesthetics</a></li>
  <li><a href="#aesthetics-best-practices" id="toc-aesthetics-best-practices" class="nav-link" data-scroll-target="#aesthetics-best-practices"><span class="toc-section-number">2.6</span>  Aesthetics best practices</a></li>
  </ul></li>
  <li><a href="#geometries" id="toc-geometries" class="nav-link" data-scroll-target="#geometries"><span class="toc-section-number">3</span>  Geometries</a>
  <ul class="collapse">
  <li><a href="#scatter-plots" id="toc-scatter-plots" class="nav-link" data-scroll-target="#scatter-plots"><span class="toc-section-number">3.1</span>  Scatter plots</a></li>
  <li><a href="#histograms" id="toc-histograms" class="nav-link" data-scroll-target="#histograms"><span class="toc-section-number">3.2</span>  Histograms</a></li>
  <li><a href="#bar-plots" id="toc-bar-plots" class="nav-link" data-scroll-target="#bar-plots"><span class="toc-section-number">3.3</span>  Bar plots</a></li>
  <li><a href="#line-plots" id="toc-line-plots" class="nav-link" data-scroll-target="#line-plots"><span class="toc-section-number">3.4</span>  Line plots</a></li>
  </ul></li>
  <li><a href="#themes" id="toc-themes" class="nav-link" data-scroll-target="#themes"><span class="toc-section-number">4</span>  Themes</a>
  <ul class="collapse">
  <li><a href="#moving-the-legend" id="toc-moving-the-legend" class="nav-link" data-scroll-target="#moving-the-legend"><span class="toc-section-number">4.1</span>  Moving the legend</a></li>
  <li><a href="#modifying-theme-elements" id="toc-modifying-theme-elements" class="nav-link" data-scroll-target="#modifying-theme-elements"><span class="toc-section-number">4.2</span>  Modifying theme elements</a></li>
  <li><a href="#built-in-themes" id="toc-built-in-themes" class="nav-link" data-scroll-target="#built-in-themes"><span class="toc-section-number">4.3</span>  Built-in themes</a></li>
  <li><a href="#exploring-ggthemes" id="toc-exploring-ggthemes" class="nav-link" data-scroll-target="#exploring-ggthemes"><span class="toc-section-number">4.4</span>  Exploring ggthemes</a></li>
  <li><a href="#effective-explanatory-plots" id="toc-effective-explanatory-plots" class="nav-link" data-scroll-target="#effective-explanatory-plots"><span class="toc-section-number">4.5</span>  Effective explanatory plots</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/jwarz/jwarz.github.io/edit/main/content/R/topics/04_data_visualization/introduction_to_data_visualization_with_ggplot2/ggplot2_intro.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/jwarz/jwarz.github.io/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Introduction to Data Visualization with ggplot2</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Joschka Schwarz </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<p>The ability to produce meaningful and beautiful data visualizations is an essential part of your skill set as a data scientist. This course, the first R data visualization tutorial in the series, introduces you to the principles of good visualizations and the grammar of graphics plotting concepts implemented in the ggplot2 package. ggplot2 has become the go-to tool for flexible and professional plots in R. Here, we’ll examine the first three essential layers for making a plot - Data, Aesthetics and Geometries. By the end of the course you will be able to make complex exploratory plots.</p>
<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>In this chapter we’ll get you into the right frame of mind for developing meaningful visualizations with R. You’ll understand that as a communications tool, visualizations require you to think about your audience first. You’ll also be introduced to the basics of ggplot2 - the 7 different grammatical elements (layers) and aesthetic mappings.</p>
<section id="introduction-1" class="level3">
<h3 class="anchored" data-anchor-id="introduction-1">Introduction</h3>
<p>Theory. Coming soon …</p>
<p><strong>1. Introduction</strong></p>
<p>Hi and welcome the first course in DataCamp’s data visualization with ggplot2 series!</p>
<p><strong>2. Your instructor - Rick Scavetta</strong></p>
<p>My name is Rick Scavetta and I’ll be the instructor for this series.I’ve been training scientists on how to better understand and visualize their data since 2012. I’m very excited to bring my experience to DataCamp.So what is data viz?</p>
<p><strong>3. Data visualization &amp; data science</strong></p>
<p>Data visualization is an essential skill for data scientists. It combines statistics and design in meaningful and appropriate ways.On the one hand, data vis is a form of graphical data analysis, emphasizing accurate representation and interpretation of data.On the other hand, data vis relies on good design choices, not only to make our plots attractive, but to also aid both the understanding and communication of results.On top of that, there is an element of creativity, since at it’s heart, data vis is a form of visual communication.</p>
<p><strong>4. Exploratory versus explanatory</strong></p>
<p>It’s important to understand the distinction between exploratory and explanatory visualizations.Exploratory visualizations are easily-generated, data-heavy and intended for a small specialist audience, for example yourself and your colleagues - their primary purpose is graphical data analysis.Explanatory visualizations are labor-intensive, data-specific and intended for a broader audience, e.g.&nbsp;in publications or presentations - they are part of the communications process.As a data scientist, it’s essential that you can quickly explore data, but you’ll also be tasked with explaining your results to stake-holders.Good design begins with thinking about the audience - and sometimes that just means ourselves.</p>
<p><strong>5. MASS::mammals</strong></p>
<p>This data set contains the average brain and body weights of 62 land mammals. To understand the relationship here, the most obvious first step is to make a scatter plot, like this one.</p>
<p><strong>6. A scatter plot</strong></p>
<p>Two mammals, the African and Asian Elephants have both very large brain and body weights, leading to a positive skew on both axes.</p>
<p><strong>7. Explore with a linear model</strong></p>
<p>Here, applying a linear model is a poor choice since a few extreme values have a large influence.</p>
<p><strong>8. Explore: fine-tuning</strong></p>
<p>A log transformation of both variables allows for a better fit.So, although we began with a rough exploratory plot, that informed us about our data and lead us to a meaningful result.</p>
<p><strong>9. Publication-ready plot</strong></p>
<p>In the end, we’d probably want a cleaned-up explanatory plot.</p>
<p><strong>10. Anscombe’s plots</strong></p>
<p>Here’s a classic example from Francis Anscombe, first published in 1973. When we imagine a linear model, as presented on this anonymous plot, we imagine that we are describing data that looks</p>
<p><strong>11. Anscombe’s plots</strong></p>
<p>something like this. But this same model could be describing a very different set of data</p>
<p><strong>12. Anscombe’s plots</strong></p>
<p>such as a parabolic relationship.</p>
<p><strong>13. Anscombe’s plots</strong></p>
<p>which calls for a different model.</p>
<p><strong>14. Anscombe’s plots</strong></p>
<p>or data in which an extreme value has a large effect.</p>
<p><strong>15. Anscombe’s plots</strong></p>
<p>which becomes clear when the outlier is removed. And sometimes</p>
<p><strong>16. Anscombe’s plots</strong></p>
<p>the model may be describing a relationship where in fact there is none at all</p>
<p><strong>17. Anscombe’s plots</strong></p>
<p>because some extreme values may be incorrect.</p>
<p><strong>18. Anscombe’s plots</strong></p>
<p>If we relied solely on the numerical output without plotting our data, we’d have missed distinct and interesting underlying trends.We can see that data viz is rooted in statistics and graphical data analysis, but it’s also a creative process that involves some amount of trial and error.</p>
<p><strong>19. Let’s practice!</strong></p>
<p>Alright, enough examples, let’s get our fingers moving with some exercises.</p>
</section>
<section id="explore-and-explain" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="explore-and-explain"><span class="header-section-number">1.1</span> Explore and explain</h2>
<p>In this video we made the distinction between plots for exploring and plots for explaining data. Which of the following are exploratory plots typically <em>NOT</em>?</p>
<blockquote class="blockquote">
<h2 id="question" data-number="1.2" class="anchored"><span class="header-section-number">1.2</span> <em>Question</em></h2>
<p>???<br> <br> ⬜ Meant for a specialist audience.<br> ⬜ Data-heavy.<br> ✅ Pretty.<br> ⬜ Rough first drafts.<br> ⬜ Part of our data science toolkit as graphical data analysis.<br></p>
</blockquote>
<p>Exactly. You’re not concerned with beautiful at this point. However, the plots should be meaningful and conform to best practices so that you do not mislead yourself!</p>
<section id="drawing-your-first-plot" class="level3">
<h3 class="anchored" data-anchor-id="drawing-your-first-plot">Drawing your first plot</h3>
<p>To get a first feel for <code>ggplot2</code>, let’s try to run some basic <code>ggplot2</code> commands. The <code>mtcars</code> dataset contains information on 32 cars from a 1973 issue of Motor Trend magazine. This dataset is small, intuitive, and contains a variety of continuous and categorical variables.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Load the <code>ggplot2</code> package using <code>library()</code>.</li>
<li>Use <code>str()</code> to explore the structure of the <code>mtcars</code> dataset.</li>
<li>Hit submit. This will execute the example code on the right. See if you can understand what <code>ggplot</code> does with the data.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Load the ggplot2 package</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># Explore the mtcars data frame with str()</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">str</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 'data.frame':    32 obs. of  11 variables:
#&gt;  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
#&gt;  $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
#&gt;  $ disp: num  160 160 108 258 360 ...
#&gt;  $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
#&gt;  $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
#&gt;  $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
#&gt;  $ qsec: num  16.5 17 18.6 19.4 17 ...
#&gt;  $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
#&gt;  $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
#&gt;  $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
#&gt;  $ carb: num  4 4 1 1 2 1 4 2 2 4 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># Execute the following command</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(cyl, mpg)) <span class="sc">+</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Phenomenal plotting! Notice that <code>ggplot2</code> treats <code>cyl</code> as a continuous variable. You get a plot, but it’s not quite right, because it gives the impression that there is such a thing as a 5 or 7-cylinder car, which there is not.</p>
</section>
</section>
<section id="data-columns-types-affect-plot-types" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="data-columns-types-affect-plot-types"><span class="header-section-number">1.3</span> Data columns types affect plot types</h2>
<p>The plot from the previous exercise wasn’t really satisfying. Although <code>cyl</code> (the number of cylinders) is categorical, you probably noticed that it is classified as numeric in <code>mtcars</code>. This is really misleading because the representation in the plot doesn’t match the actual data type. You’ll have to explicitly tell <code>ggplot2</code> that <code>cyl</code> is a categorical variable.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Change the <code>ggplot()</code> command by wrapping <code>factor()</code> around <code>cyl</code>.</li>
<li>Hit submit and see if the resulting plot is better this time.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># Load the ggplot2 package</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co"># Change the command below so that cyl is treated as factor</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="fu">factor</span>(cyl), mpg)) <span class="sc">+</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-3-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Stellar scatterplotting! Notice that <code>ggplot2</code> treats <code>cyl</code> as a factor. This time the x-axis does not contain variables like 5 or 7, only the values that are present in the dataset.</p>
</section>
<section id="the-grammar-of-graphics" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="the-grammar-of-graphics"><span class="header-section-number">1.4</span> The grammar of graphics</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. The grammar of graphics</strong></p>
<p>The first step in thinking creatively about data visualization is to appreciate that graphics are built upon an underlying grammar.</p>
<p><strong>2. The quick brown fox jumps over the lazy dog</strong></p>
<p>To begin, let’s consider one of the most well-known sentences in English.The quick brown fox jumps over the lazy dog.</p>
<p><strong>3. The quick brown fox jumps over the lazy dog</strong></p>
<p>Every word in the sentence has a clear grammatical definition and when we write text, we take great care to choose the grammatical elements so that we communicate a very specific message.If we changed any of the grammatical elements of this sentence it would change the meaning, sometimes subtly, sometimes dramatically.</p>
<p><strong>4. Grammar of graphics</strong></p>
<p>The same concept holds true for data visualization - graphics are built on an underlying grammar.The grammar of graphics is a plotting framework developed by Leland Wilkinson and published in his 1999 book, <em>The Grammar of Graphics</em>.There are two key things to note about the grammar of graphics.First, graphics are made up of distinct layers of grammatical elements, and second, meaningful plots are built around appropriate aesthetic mappings.To continue our analogy to written grammar, the layers are like the adjectives and nouns and the aesthetic mappings are like the grammatical rules for how to assemble that vocabulary.</p>
<p><strong>5. The three essential grammatical elements</strong></p>
<p>Let’s explore grammatical elements first. There are three essential grammatical elements: data, aesthetics, and geometries.The data is obviously the data which we want to plot. the aesthetics layer refers to the scales onto which we will map our data, and the geom layer refers to the actual shape the data will take in the plot.</p>
<p><strong>6. Course 1: core competency</strong></p>
<p>The rest are optional layers. This includes the theme layer, which controls all the non-data ink.In this course, we’ll cover these first four layers which will comprise your core competency.</p>
<p><strong>7. The seven grammatical elements</strong></p>
<p>In the next course we’ll explore the remaining grammatical elements: the statistics, coordinates and facets layers.</p>
<p><strong>8. Jargon for each element</strong></p>
<p>This diagram gives an example of some of the terms we’ll encounter in each element. Whenever we make a plot we are choosing among these options and many others not displayed.By the end of this course you’ll be able to generate meaningful and publication-quality exploratory plots using the first four layers.</p>
<p><strong>9. Course 2: Tools for EDA</strong></p>
<p>Once we’ve covered the remaining three layers in the second course, we’ll be using data viz as a tool for exploratory data analysis.</p>
<p><strong>10. Let’s practice!</strong></p>
<p>Let’s head over to the exercises and explore one of the datasets that you’ll be using throughout the two courses.</p>
<section id="mapping-data-columns-to-aesthetics" class="level3">
<h3 class="anchored" data-anchor-id="mapping-data-columns-to-aesthetics">Mapping data columns to aesthetics</h3>
<p>Let’s dive a little deeper into the three main topics in this course: The data, aesthetics, and geom layers. We’ll get to making pretty plots in the last chapter with the themes layer.</p>
<p>We’ll continue working on the 32 cars in the <code>mtcars</code> data frame.</p>
<p>Consider how the examples and concepts we discuss throughout these courses apply to your own data-sets!</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Add a color aesthetic mapped to the displacement of the car engine: inside <a href="http://www.rdocumentation.org/packages/ggplot2/functions/aes"><code>aes()</code></a>, add a <code>color</code> argument equal to <code>disp</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># Edit to add a color aesthetic mapped to disp</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg, <span class="at">color =</span> disp)) <span class="sc">+</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-4-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>This time, map <code>disp</code> to the <code>size</code> aesthetic.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># Change the color aesthetic to a size aesthetic</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg, <span class="at">size =</span> disp)) <span class="sc">+</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-5-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Legendary! Notice that a legend for the color and size scales was automatically generated.</p>
</section>
<section id="understanding-variables" class="level3">
<h3 class="anchored">Understanding variables</h3>
<p>In the previous exercise you saw that <code>disp</code> can be mapped onto a color gradient or onto a continuous size scale.</p>
<p>Another argument of <a href="http://www.rdocumentation.org/packages/ggplot2/functions/aes"><code>aes()</code></a> is the <code>shape</code> of the points. There are a finite number of shapes which <a href="http://www.rdocumentation.org/packages/ggplot2/functions/ggplot"><code>ggplot()</code></a> can automatically assign to the points. However, if you try this command in the console:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg, <span class="at">shape =</span> disp)) <span class="sc">+</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>#&gt; Error in `geom_point()`:
#&gt; ! Problem while computing aesthetics.
#&gt; ℹ Error occurred in the 1st layer.
#&gt; Caused by error in `scale_f()`:
#&gt; ! A continuous variable cannot be mapped to the shape aesthetic
#&gt; ℹ choose a different aesthetic or use `scale_shape_binned()`</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-6-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>It gives an error. What does this mean?</p>
<blockquote class="blockquote">
<h2 id="question-1" data-number="1.5" class="anchored" data-anchor-id="understanding-variables"><span class="header-section-number">1.5</span> <em>Question</em></h2>
<p>???<br> <br> ⬜ <code>shape</code> is not a defined argument.<br> ✅ <code>shape</code> only makes sense with categorical data, and <code>disp</code> is continuous.<br> ⬜ <code>shape</code> only makes sense with continuous data, and <code>disp</code> is categorical.<br> ⬜ <code>shape</code> is not a variable in your dataset.<br> ⬜ <code>shape</code> has to be defined as a function.<br></p>
</blockquote>
<p>Correct. The error message ‘A continuous variable can not be mapped to shape’, means that shape doesn’t exist on a continuous scale here.</p>
</section>
</section>
<section id="ggplot2-layers" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="ggplot2-layers"><span class="header-section-number">1.6</span> ggplot2 layers</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. ggplot2 layers</strong></p>
<p>Now that we have some idea about the different grammatical elements of graphics, let’s see how this works in practice.</p>
<p><strong>2. ggplot2 package</strong></p>
<p>The grammar of graphic is implemented in R using the ggplot2 package.There are two key functions that ggplot2 serves. First, we construct plots by layering grammatical elements on top of each other. Second, we use aesthetic mappings to bridge the link between data and it’s visual interpretation.We are going to go through each grammatical element in depth in this and the next course. Here I’ll introduce a data set which will be used throughout the videos and we’ll go over some simple examples.</p>
<p><strong>3. Data</strong></p>
<p>The bottom layer is the data element. Obviously we need some data to plot. I’m going to use several different data sets in the course videos,</p>
<p><strong>4. Iris dataset</strong></p>
<p>one of which is the classic iris data set collected by Edgar Anderson in the 1930s and thereafter popularized by Ronald Fisher. The data set contains information on three iris species, setosa, versicolor, and virginica. Four measurements were taken from each plant - the petal length and width and the sepal length and width. You’re probably familiar with petals, they’re the colorful part of a flower. Sepals are the outer leaves of the flower, they are typically green, but in this case they’re also colorful. There are 50 specimens of each species.</p>
<p><strong>5. Iris dataset</strong></p>
<p>The data is stored in an object called iris, there are five variables: the species and one for each of the properties which were measured.</p>
<p><strong>6. Aesthetics</strong></p>
<p>The next layer we’ll add is the aesthetics element, which tells us which scales we should map our data onto. This is where the second main component of the grammar of graphics comes into play. On top of layering the grammatical elements, it’s here that we establish our aesthetic mappings.</p>
<p><strong>7. Iris aesthetics</strong></p>
<p>In this case we are going to make a scatter plot so we’re going to map Sepal-dot-Length onto the X aesthetic and Sepal-dot-Width onto the Y aesthetic.</p>
<p><strong>8. Geometries</strong></p>
<p>The next element is the geometry element. This allows us to choose how the plot will look.</p>
<p><strong>9. Iris geometries</strong></p>
<p>After we’ve established our three essential layers, we have enough instructions to make a basic scatter plot. It’s pretty rough, so to get a more meaningful and cleaner visualization, we’ll have to use the other layers.</p>
<p><strong>10. Themes</strong></p>
<p>The next layer we’ll look at is the themes element. It controls all the non-data ink on our plot.</p>
<p><strong>11. Iris themes</strong></p>
<p>Which allows us to get a nice looking, meaningful and publication-quality plot directly in R.</p>
<p><strong>12. Let’s practice!</strong></p>
<p>We’ll discuss the remaining grammatical elements in the next course.For now, let’s begin by exploring these concepts in the exercises.</p>
</section>
<section id="adding-geometries" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="adding-geometries"><span class="header-section-number">1.7</span> Adding geometries</h2>
<p>The <code>diamonds</code> dataset contains details of 1,000 diamonds. Among the variables included are <code>carat</code> (a measurement of the diamond’s size) and <code>price</code>.</p>
<p>You’ll use two common geom layer functions:</p>
<ul>
<li><a href="http://www.rdocumentation.org/packages/ggplot2/functions/geom_point"><code>geom_point()</code></a> adds points (as in a scatter plot).</li>
<li><a href="http://www.rdocumentation.org/packages/ggplot2/functions/geom_smooth"><code>geom_smooth()</code></a> adds a smooth trend curve. As you saw previously, these are added using the <code>+</code> operator.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(x, y)) <span class="sc">+</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>  geom_<span class="sc">*</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Where <code>*</code> is the specific geometry needed.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Explore the <code>diamonds</code> data frame with the <a href="http://www.rdocumentation.org/packages/utils/functions/str"><code>str()</code></a> function.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># Explore the diamonds data frame with str()</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="fu">str</span>(diamonds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; tibble [53,940 × 10] (S3: tbl_df/tbl/data.frame)
#&gt;  $ carat  : num [1:53940] 0.23 0.21 0.23 0.29 0.31 0.24 0.24 0.26 0.22 0.23 ...
#&gt;  $ cut    : Ord.factor w/ 5 levels "Fair"&lt;"Good"&lt;..: 5 4 2 4 2 3 3 3 1 3 ...
#&gt;  $ color  : Ord.factor w/ 7 levels "D"&lt;"E"&lt;"F"&lt;"G"&lt;..: 2 2 2 6 7 7 6 5 2 5 ...
#&gt;  $ clarity: Ord.factor w/ 8 levels "I1"&lt;"SI2"&lt;"SI1"&lt;..: 2 3 5 4 2 6 7 3 4 5 ...
#&gt;  $ depth  : num [1:53940] 61.5 59.8 56.9 62.4 63.3 62.8 62.3 61.9 65.1 59.4 ...
#&gt;  $ table  : num [1:53940] 55 61 65 58 58 57 57 55 61 61 ...
#&gt;  $ price  : int [1:53940] 326 326 327 334 335 336 336 337 337 338 ...
#&gt;  $ x      : num [1:53940] 3.95 3.89 4.05 4.2 4.34 3.94 3.95 4.07 3.87 4 ...
#&gt;  $ y      : num [1:53940] 3.98 3.84 4.07 4.23 4.35 3.96 3.98 4.11 3.78 4.05 ...
#&gt;  $ z      : num [1:53940] 2.43 2.31 2.31 2.63 2.75 2.48 2.47 2.53 2.49 2.39 ...</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Edit the plot code to add a point geom. Use the <code>+</code> operator to add <a href="http://www.rdocumentation.org/packages/ggplot2/functions/geom_point"><code>geom_point()</code></a> to the <a href="http://www.rdocumentation.org/packages/ggplot2/functions/ggplot"><code>ggplot()</code></a> command.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># Add geom_point() with +</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(carat, price)) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-9-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Add a smooth geom to the plot. Use the <code>+</code> operator to add <a href="http://www.rdocumentation.org/packages/ggplot2/functions/geom_smooth"><code>geom_smooth()</code></a>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># Add geom_smooth() with +</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(carat, price)) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>  <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-10-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Lovely layering! If you had executed the command without adding a <code>+</code>, it would produce an error message ‘No layers in plot’ because you are missing the third essential layer - the geom layer.</p>
<section id="changing-one-geom-or-every-geom" class="level3">
<h3 class="anchored" data-anchor-id="changing-one-geom-or-every-geom">Changing one geom or every geom</h3>
<p>If you have multiple geoms, then mapping an aesthetic to data variable inside the call to <code>ggplot()</code> will change <em>all</em> the geoms. It is also possible to make changes to <em>individual</em> geoms by passing arguments to the <code>geom_*()</code> functions.</p>
<p><code>geom_point()</code> has an <code>alpha</code> argument that controls the opacity of the points. A value of <code>1</code> (the default) means that the points are totally opaque; a value of <code>0</code> means the points are totally transparent (and therefore invisible). Values in between specify transparency.</p>
<p>The plot you drew last time is provided in the script.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Edit the plot code to map the <code>color</code> aesthetic to the <code>clarity</code> data variable.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># Map the color aesthetic to clarity</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(carat, price, <span class="at">color =</span> clarity)) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4"></a>  <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-11-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Make the points translucent by setting the <code>alpha</code> argument to <code>0.4</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co"># Make the points 40% opaque</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(carat, price, <span class="at">color =</span> clarity)) <span class="sc">+</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>  <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-12-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Smooth work! <code>geom_point()</code> + <code>geom_smooth()</code> is a common combination.</p>
</section>
<section id="saving-plots-as-variables" class="level3">
<h3 class="anchored" data-anchor-id="saving-plots-as-variables">Saving plots as variables</h3>
<p>Plots can be saved as variables, which can be added two later on using the <code>+</code> operator. This is really useful if you want to make multiple related plots from a common base.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Using the <code>diamonds</code> dataset, plot the <code>price</code> (y-axis) versus the <code>carat</code> (x-axis), assigning to <code>plt_price_vs_carat</code>.</li>
<li>Using <code>geom_point()</code>, add a point layer to <code>plt_price_vs_carat</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="co"># Draw a ggplot</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>plt_price_vs_carat <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb19-3"><a href="#cb19-3"></a>  <span class="co"># Use the diamonds dataset</span></span>
<span id="cb19-4"><a href="#cb19-4"></a>  diamonds,</span>
<span id="cb19-5"><a href="#cb19-5"></a>  <span class="co"># For the aesthetics, map x to carat and y to price</span></span>
<span id="cb19-6"><a href="#cb19-6"></a>  <span class="fu">aes</span>(carat, price)</span>
<span id="cb19-7"><a href="#cb19-7"></a>)</span>
<span id="cb19-8"><a href="#cb19-8"></a></span>
<span id="cb19-9"><a href="#cb19-9"></a><span class="co"># Add a point layer to plt_price_vs_carat</span></span>
<span id="cb19-10"><a href="#cb19-10"></a>plt_price_vs_carat <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-13-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Add an <code>alpha</code> argument to the point layer to make the points 20% opaque, assigning to <code>plt_price_vs_carat_transparent</code>.</li>
<li>Type the plot’s variable name (<code>plt_price_vs_carat_transparent</code>) to display it.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="co"># From previous step</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>plt_price_vs_carat <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(carat, price))</span>
<span id="cb20-3"><a href="#cb20-3"></a></span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="co"># Edit this to make points 20% opaque: plt_price_vs_carat_transparent</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>plt_price_vs_carat_transparent <span class="ot">&lt;-</span> plt_price_vs_carat <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>)</span>
<span id="cb20-6"><a href="#cb20-6"></a></span>
<span id="cb20-7"><a href="#cb20-7"></a><span class="co"># See the plot</span></span>
<span id="cb20-8"><a href="#cb20-8"></a>plt_price_vs_carat_transparent</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-14-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="5" type="1">
<li>Inside <code>geom_point()</code>, call <code>aes()</code> and map <code>color</code> to <code>clarity</code>, assigning to <code>plt_price_vs_carat_by_clarity</code>.</li>
<li>Type the plot’s variable name (<code>plt_price_vs_carat_by_clarity</code>) to display it.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># From previous step</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>plt_price_vs_carat <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(carat, price))</span>
<span id="cb21-3"><a href="#cb21-3"></a></span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="co"># Edit this to map color to clarity</span></span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="co"># Assign the updated plot to a new object</span></span>
<span id="cb21-6"><a href="#cb21-6"></a>plt_price_vs_carat_by_clarity <span class="ot">&lt;-</span> plt_price_vs_carat <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> clarity))</span>
<span id="cb21-7"><a href="#cb21-7"></a></span>
<span id="cb21-8"><a href="#cb21-8"></a><span class="co"># See the plot</span></span>
<span id="cb21-9"><a href="#cb21-9"></a>plt_price_vs_carat_by_clarity</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-15-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Super saving of plotting steps! By assigning parts of plots to a variable then reusing that variable in other plots, it makes it really clear how much those plots have in common.</p>
</section>
</section>
</section>
<section id="aesthetics" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Aesthetics</h1>
<p>Aesthetic mappings are the cornerstone of the grammar of graphics plotting concept. This is where the magic happens - converting continuous and categorical data into visual scales that provide access to a large amount of information in a very short time. In this chapter you’ll understand how to choose the best aesthetic mappings for your data.</p>
<section id="visible-aesthetics" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="visible-aesthetics"><span class="header-section-number">2.1</span> Visible aesthetics</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. Visible aesthetics</strong></p>
<p>In this section we’ll explore aesthetics, and understand how they are distinct from attributes.</p>
<p><strong>2. Mapping onto the X and Y axes</strong></p>
<p>In ggplot2, the mapping of aesthetics elements is a key concept to master.So what do we mean by mapping? This becomes clear when we understand that our beloved X and Y axes on a straightforward scatter plot are aesthetics. They define the position of dots on a common scale, like this example we saw in the previous chapter.The sepal length is mapped onto the X axis and the sepal width is mapped onto the Y axis.Here, we’ll focus on the most common visual aesthetics and but we’ll encounter more throughout the courses.When making multivariate plots we’ll use aesthetics appropriately to maximize the number of variables we can add to a plot.</p>
<p><strong>3. Mapping onto color</strong></p>
<p>For example, the variable Species can be mapped onto the color aesthetic, which colors the points according to the species from which they came.</p>
<p><strong>4. Mapping onto the color aesthetic</strong></p>
<p>That is, we map a variable from our dataframe onto one of the visible aesthetics.We call a column in our dataframe to be mapped onto a visible aesthetic. That’s why we made such a big deal about data structure earlier. Each mapped variable is its own column variable in the data frame.</p>
<p><strong>5. Mapping onto the color aesthetic</strong></p>
<p>Importantly, we call aesthetics in the aes function. We could have also called aesthetics in the geom layer</p>
<p><strong>6. Mapping onto the color aesthetic in geom</strong></p>
<p>as shown here, and get the same result.This is typically only done if we don’t want all layers to inherit the same aesthetics or we’re mixing different data sources. In general, try to keep your data and aesthetics layer in the same ggplot function definition.</p>
<p><strong>7. Typical visible aesthetics</strong></p>
<p>In addition to the X and Y axes and color, typical visible aesthetics include</p>
<p><strong>8. Typical visible aesthetics</strong></p>
<p>fill, which is distinct from</p>
<p><strong>9. Typical visible aesthetics</strong></p>
<p>color in that color usually, but not always, refers to the outline of a shape.</p>
<p><strong>10. Typical visible aesthetics</strong></p>
<p>Size adjusts the area or radius of points, the thickness of lines and the font size of text.</p>
<p><strong>11. Typical visible aesthetics</strong></p>
<p>alpha refers to alpha-blending, which adjusts the transparency of a shape.</p>
<p><strong>12. Typical visible aesthetics</strong></p>
<p>line type refers to the dash pattern of a line and</p>
<p><strong>13. Typical visible aesthetics</strong></p>
<p>labels are direct labels of an item, directly on the plot. Like printing an item’s name on a scatter plot instead of just drawing a point. Direct labeling of points is an extension of axis labels for categorical data in that they are unambiguous, and</p>
<p><strong>14. Typical visible aesthetics</strong></p>
<p>Shape refers to the shape of a point.Many of these aesthetics function as both aesthetic mappings as well as attributes, and one of the most common mistakes beginners make is confusing the two or overwriting aesthetic mappings with fixed attributes. Our goal here is to not only show you how to use them correctly but appropriately for the plot’s type and purpose.Just like our two main variable types, there are visible aesthetics for continuous and categorical data which we’ll explore in the next video,</p>
<p><strong>15. Let’s Practice</strong></p>
<p>for now, let’s head over to the exercises and take a look at how aesthetics work.</p>
<section id="all-about-aesthetics-color-shape-and-size" class="level3">
<h3 class="anchored" data-anchor-id="all-about-aesthetics-color-shape-and-size">All about aesthetics: color, shape and size</h3>
<p>In the video you saw 9 visible aesthetics. Let’s apply them to a categorical variable — the cylinders in <code>mtcars</code>, <code>cyl</code>.</p>
<p>These are the aesthetics you can consider within <a href="http://www.rdocumentation.org/packages/ggplot2/functions/aes"><code>aes()</code></a> in this chapter: <code>x</code>, <code>y</code>, <code>color</code>, <code>fill</code>, <code>size</code>, <code>alpha</code>, <code>labels</code> and <code>shape</code>.</p>
<p>One common convention is that you don’t name the <code>x</code> and <code>y</code> arguments to <code>aes()</code>, since they almost always come first, but you do name other arguments.</p>
<p>In the following exercise the <code>fcyl</code> column is categorical. It is <code>cyl</code> transformed into a <code>factor</code>.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Map <code>mpg</code> onto the <code>x</code> aesthetic, and <code>fcyl</code> onto the <code>y</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="co"># Map x to mpg and y to fcyl</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>mtcars <span class="ot">&lt;-</span> mtcars <span class="sc">|&gt;</span> </span>
<span id="cb22-3"><a href="#cb22-3"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">fcyl =</span> <span class="fu">factor</span>(cyl))</span>
<span id="cb22-4"><a href="#cb22-4"></a></span>
<span id="cb22-5"><a href="#cb22-5"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb22-6"><a href="#cb22-6"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(mpg, fcyl)) <span class="sc">+</span></span>
<span id="cb22-7"><a href="#cb22-7"></a>    <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-16-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Swap the mappings of the first plot: <code>fcyl</code> onto the <code>x</code> aesthetic, and <code>mpg</code> onto the <code>y</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="co"># Swap mpg and fcyl</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(fcyl, mpg)) <span class="sc">+</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-17-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Map <code>wt</code> onto <code>x</code>, <code>mpg</code> onto <code>y</code>, and <code>fcyl</code> onto <code>color</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="co"># Map x to wt, y to mpg and color to fcyl</span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg, <span class="at">color =</span> fcyl)) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-18-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Modify the point layer of the previous plot by changing the <code>shape</code> argument to <code>1</code> and increasing the <code>size</code> to <code>4</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg, <span class="at">color =</span> fcyl)) <span class="sc">+</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>  <span class="co"># Set the shape and size of the points</span></span>
<span id="cb25-3"><a href="#cb25-3"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-19-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Astounding aestheticism! Head over to the next exercise for some more aesthetics!</p>
</section>
<section id="all-about-aesthetics-color-vs.-fill" class="level3">
<h3 class="anchored" data-anchor-id="all-about-aesthetics-color-vs.-fill">All about aesthetics: color vs.&nbsp;fill</h3>
<p>Typically, the <code>color</code> aesthetic changes the <em>outline</em> of a geom and the <code>fill</code> aesthetic changes the <em>inside</em>. <code>geom_point()</code> is an exception: you use <code>color</code> (not <code>fill</code>) for the point color. However, some shapes have special behavior.</p>
<p>The default <code>geom_point()</code> uses <code>shape = 19</code>: a solid circle. An alternative is <code>shape = 21</code>: a circle that allow you to use <em>both</em> <code>fill</code> for the inside <em>and</em> <code>color</code> for the outline. This is lets you to map two aesthetics to each point.</p>
<p>All shape values are described on the <a href="https://www.rdocumentation.org/packages/graphics/topics/points"><code>points()</code></a> help page.</p>
<p><code>fcyl</code> and <code>fam</code> are the <code>cyl</code> and <code>am</code> columns converted to factors, respectively.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Change the aesthetics so that <code>fcyl</code> maps to <code>fill</code> rather than <code>color</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="co"># Map fcyl to fill</span></span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg, <span class="at">fill =</span> fcyl)) <span class="sc">+</span></span>
<span id="cb26-3"><a href="#cb26-3"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-20-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-16"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>In <code>geom_point()</code> change the <code>shape</code> argument to <code>21</code> and add an <code>alpha</code> argument set to <code>0.6</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg, <span class="at">fill =</span> fcyl)) <span class="sc">+</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>  <span class="co"># Change point shape; set alpha</span></span>
<span id="cb27-3"><a href="#cb27-3"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">21</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-21-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-17"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>In the <code>ggplot()</code> aesthetics, map <code>fam</code> to <code>color</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>mtcars <span class="ot">&lt;-</span> mtcars <span class="sc">|&gt;</span> </span>
<span id="cb28-2"><a href="#cb28-2"></a>            dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">fam =</span> <span class="fu">factor</span>(am))</span>
<span id="cb28-3"><a href="#cb28-3"></a></span>
<span id="cb28-4"><a href="#cb28-4"></a><span class="co"># Map color to fam</span></span>
<span id="cb28-5"><a href="#cb28-5"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg, <span class="at">fill =</span> fcyl, <span class="at">color =</span> fam)) <span class="sc">+</span></span>
<span id="cb28-6"><a href="#cb28-6"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">21</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-22-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-18"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Shapely coding! Notice that mapping a categorical variable onto fill doesn’t change the colors, although a legend is generated! This is because the default shape for points only has a color attribute and not a fill attribute! Use fill when you have another shape (such as a bar), or when using a point that does have a fill and a color attribute, such as <code>shape = 21</code>, which is a circle with an outline. Any time you use a solid color, make sure to use alpha blending to account for over plotting.</p>
</section>
<section id="all-about-aesthetics-comparing-aesthetics" class="level3">
<h3 class="anchored" data-anchor-id="all-about-aesthetics-comparing-aesthetics">All about aesthetics: comparing aesthetics</h3>
<p>Now that you’ve got some practice with using attributes, be careful of a major pitfall: these attributes can overwrite the aesthetics of your plot!</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Using <code>mtcars</code>, create a plot base layer, <code>plt_mpg_vs_wt</code>. Map <code>mpg</code> onto <code>y</code> and <code>wt</code> onto <code>x</code>.</li>
<li>Add a point layer, mapping the categorical no. of cylinders, <code>fcyl</code>, onto <code>size</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="co"># Establish the base layer</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>plt_mpg_vs_wt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg))</span>
<span id="cb29-3"><a href="#cb29-3"></a></span>
<span id="cb29-4"><a href="#cb29-4"></a><span class="co"># Map fcyl to size</span></span>
<span id="cb29-5"><a href="#cb29-5"></a>plt_mpg_vs_wt <span class="sc">+</span></span>
<span id="cb29-6"><a href="#cb29-6"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> fcyl))  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: Using size for a discrete variable is not advised.</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-23-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-19"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Change the mapping. This time <code>fcyl</code> should be mapped onto <code>alpha</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="co"># Base layer</span></span>
<span id="cb31-2"><a href="#cb31-2"></a>plt_mpg_vs_wt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg))</span>
<span id="cb31-3"><a href="#cb31-3"></a></span>
<span id="cb31-4"><a href="#cb31-4"></a><span class="co"># Map fcyl to alpha, not size</span></span>
<span id="cb31-5"><a href="#cb31-5"></a>plt_mpg_vs_wt <span class="sc">+</span></span>
<span id="cb31-6"><a href="#cb31-6"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">alpha =</span> fcyl))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-24-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-20"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Change the mapping again. This time <code>fycl</code> should be mapped onto <code>shape</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="co"># Base layer</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>plt_mpg_vs_wt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg))</span>
<span id="cb32-3"><a href="#cb32-3"></a></span>
<span id="cb32-4"><a href="#cb32-4"></a><span class="co"># Map fcyl to shape, not alpha</span></span>
<span id="cb32-5"><a href="#cb32-5"></a>plt_mpg_vs_wt <span class="sc">+</span></span>
<span id="cb32-6"><a href="#cb32-6"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">shape =</span> fcyl))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-25-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-21"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="5" type="1">
<li>Swap the geom layer: change points to text.</li>
<li>Change the mapping again. This time <code>fycl</code> should be mapped onto <code>label</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="co"># Base layer</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>plt_mpg_vs_wt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg))</span>
<span id="cb33-3"><a href="#cb33-3"></a></span>
<span id="cb33-4"><a href="#cb33-4"></a><span class="co"># Use text layer and map fcyl to label</span></span>
<span id="cb33-5"><a href="#cb33-5"></a>plt_mpg_vs_wt <span class="sc">+</span></span>
<span id="cb33-6"><a href="#cb33-6"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> fcyl))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-26-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-22"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Nice! Which aesthetic do you think is the clearest for categorical data?</p>
</section>
</section>
<section id="aesthetics-for-categorical-continuous-variables" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="aesthetics-for-categorical-continuous-variables"><span class="header-section-number">2.2</span> Aesthetics for categorical &amp; continuous variables</h2>
<p>Many of the aesthetics can accept either continuous or categorical variables, but some are restricted to categorical data. Which aesthetics are only applicable to categorical data?</p>
<blockquote class="blockquote">
<h2 id="question-2" data-number="2.3" class="anchored"><span class="header-section-number">2.3</span> <em>Question</em></h2>
<p>???<br> <br> ⬜ <code>color</code> &amp; <code>fill</code><br> ⬜ <code>alpha</code> &amp; <code>size</code><br> ✅ <code>label</code> &amp; <code>shape</code><br> ⬜ <code>alpha</code> &amp; <code>label</code><br> ⬜ <code>x</code> &amp; <code>y</code><br></p>
</blockquote>
<p>Great! <code>label</code> and <code>shape</code> are only applicable to categorical data.</p>
</section>
<section id="using-attributes" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="using-attributes"><span class="header-section-number">2.4</span> Using attributes</h2>
Theory. Coming soon …
<p class="dc-cookie-banner-text">
</p><p>DataCamp and our partners use cookies and similar technologies to improve your learning experience, offer data science content relevant to your interests, improve the site and to show more relevant advertisements. You can change your mind at any time.</p>
<p><strong>1. Using attributes</strong></p>
<p>In the last exercises you learned a fundamental concept of ggplot2: aesthetic mappings.Colloquially, when we say aesthetics we’re describing how something looks, but now you know that in ggplot2, we’re talking about aesthetic mappings.If we talk about how something looks, we refer to its attributes. One of the most confusing parts of ggplot2 is that all our visible aesthetics also exist as attributes.</p>
<p><strong>2. Aesthetics? Attributes!</strong></p>
<p>so it’s easy to mix up the two!Attributes are always called in the geom layer (which we’ll discuss in more detail in the next chapter).For example, to change the color of these points to red, we’d just set the plot’s attribute using the color argument in the geom layer.</p>
<p><strong>3. Aesthetics? Attributes!</strong></p>
<p>For example, it’s color attribute is set by the color argument, its size by the size argument</p>
<p><strong>4. Aesthetics? Attributes!</strong></p>
<p>and its shape by the shape argument. The distinction between aesthetics and attributes is subtle but important. Mixing the two is a very common mistake.</p>
<p><strong>5. Let’s practice!</strong></p>
<p>OK, let’s wrap up with some exercises on setting attributes.</p>
<section id="all-about-attributes-color-shape-size-and-alpha" class="level3">
<h3 class="anchored" data-anchor-id="all-about-attributes-color-shape-size-and-alpha">All about attributes: color, shape, size and alpha</h3>
<p>This time you’ll use these arguments to set <em>attributes</em> of the plot, not map variables onto <em>aesthetics</em>.</p>
<p>You can specify colors in R using <strong>hex codes</strong>: a hash followed by two hexadecimal numbers each for red, green, and blue (<code>"#RRGGBB"</code>). Hexadecimal is base-16 counting. You have 0 to 9, and A representing 10 up to F representing 15. Pairs of hexadecimal numbers give you a range from 0 to 255. <code>"#000000"</code> is “black” (no color), <code>"#FFFFFF"</code> means “white”, and `“#00FFFF” is cyan (mixed green and blue).</p>
<p>A hexadecimal color variable, <code>my_blue</code> has been defined for you.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Set the point color to <code>my_blue</code> and the alpha to <code>0.6</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="co"># A hexadecimal color</span></span>
<span id="cb34-2"><a href="#cb34-2"></a>my_blue <span class="ot">&lt;-</span> <span class="st">"#4ABEFF"</span></span>
<span id="cb34-3"><a href="#cb34-3"></a></span>
<span id="cb34-4"><a href="#cb34-4"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb34-5"><a href="#cb34-5"></a>  <span class="co"># Set the point color to my_blue</span></span>
<span id="cb34-6"><a href="#cb34-6"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> my_blue, <span class="at">alpha =</span> <span class="fl">0.6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-27-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-23"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Change the <code>color</code> mapping to a <code>fill</code> mapping. That is, <code>fcyl</code> should be mapped onto <code>fill</code>.</li>
<li>Set the <code>color</code> of the points to <code>my_blue</code>, point <code>size</code> to <code>10</code> and the point <code>shape</code> to <code>1</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="co"># A hexadecimal color</span></span>
<span id="cb35-2"><a href="#cb35-2"></a>my_blue <span class="ot">&lt;-</span> <span class="st">"#4ABEFF"</span></span>
<span id="cb35-3"><a href="#cb35-3"></a></span>
<span id="cb35-4"><a href="#cb35-4"></a><span class="co"># Change the color mapping to a fill mapping</span></span>
<span id="cb35-5"><a href="#cb35-5"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg, <span class="at">fill =</span> fcyl)) <span class="sc">+</span></span>
<span id="cb35-6"><a href="#cb35-6"></a>  <span class="co"># Set point size to 10; shape to 1</span></span>
<span id="cb35-7"><a href="#cb35-7"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> my_blue, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">shape =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-28-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-24"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Hunky-dory hex specs! <code>ggplot2</code> lets you control these attributes in many ways to customize your plots.</p>
</section>
<section id="all-about-attributes-conflicts-with-aesthetics" class="level3">
<h3 class="anchored" data-anchor-id="all-about-attributes-conflicts-with-aesthetics">All about attributes: conflicts with aesthetics</h3>
<p>In the videos you saw that you can use all the aesthetics as attributes. Let’s see how this works with the aesthetics you used in the previous exercises: <code>x</code>, <code>y</code>, <code>color</code>, <code>fill</code>, <code>size</code>, <code>alpha</code>, <code>label</code> and <code>shape</code>.</p>
<p>In this exercise you will set all kinds of attributes of the points!</p>
<p>You will continue to work with <code>mtcars</code>.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Add a point layer, setting <code>alpha</code>, the transparency, to <code>0.5</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg, <span class="at">color =</span> fcyl)) <span class="sc">+</span></span>
<span id="cb36-2"><a href="#cb36-2"></a>  <span class="co"># Add point layer with alpha 0.5</span></span>
<span id="cb36-3"><a href="#cb36-3"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-29-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-25"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Add a text layer, setting the <code>label</code> to the rownames of the dataset <code>mtcars</code>, and the <code>color</code> to <code>"red"</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg, <span class="at">color =</span> fcyl)) <span class="sc">+</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>  <span class="co"># Add text layer with label rownames(mtcars) and color red</span></span>
<span id="cb37-3"><a href="#cb37-3"></a>  <span class="fu">geom_text</span>(<span class="at">label =</span> <span class="fu">rownames</span>(mtcars), <span class="at">color =</span> <span class="st">'red'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-30-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-26"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Add a point layer, setting the <code>shape</code> to <code>24</code> and the <code>color</code> to <code>"yellow"</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg, <span class="at">color =</span> fcyl)) <span class="sc">+</span></span>
<span id="cb38-2"><a href="#cb38-2"></a>  <span class="co"># Add points layer with shape 24 and color yellow</span></span>
<span id="cb38-3"><a href="#cb38-3"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">24</span>, <span class="at">color =</span> <span class="st">'yellow'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-31-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-27"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>NA</p>
</section>
<section id="going-all-out" class="level3">
<h3 class="anchored" data-anchor-id="going-all-out">Going all out</h3>
<p>In this exercise, you will gradually add more aesthetics layers to the plot. You’re still working with the <code>mtcars</code> dataset, but this time you’re using more features of the cars. Each of the columns is described on the <a href="https://www.rdocumentation.org/packages/datasets/topics/mtcars"><code>mtcars</code></a> help page. Columns <code>fcyl</code> and <code>fam</code> have been added (as before) as categorical versions of <code>cyl</code> and <code>am</code> respectively.</p>
<p>Notice that adding more aesthetic mappings to your plot is not always a good idea! You may just increase complexity and decrease readability.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Use <code>mtcars</code> to draw a plot of <code>qsec</code> vs.&nbsp;<code>mpg</code>, colored by <code>fcyl</code>.</li>
<li>Add a point layer.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="co"># 3 aesthetics: qsec vs. mpg, colored by fcyl</span></span>
<span id="cb39-2"><a href="#cb39-2"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(mpg, qsec, <span class="at">color =</span> fcyl)) <span class="sc">+</span></span>
<span id="cb39-3"><a href="#cb39-3"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-32-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-28"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Add another aesthetic: map <code>fam</code> onto <code>shape</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="co"># 4 aesthetics: add a mapping of shape to fam</span></span>
<span id="cb40-2"><a href="#cb40-2"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(mpg, qsec, <span class="at">color =</span> fcyl, <span class="at">shape =</span> fam)) <span class="sc">+</span></span>
<span id="cb40-3"><a href="#cb40-3"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-33-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-29"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Add another two aesthetics: map <code>hp</code> <em>divided by</em> <code>wt</code> onto <code>size</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="co"># 5 aesthetics: add a mapping of size to hp / wt</span></span>
<span id="cb41-2"><a href="#cb41-2"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(mpg, qsec, <span class="at">color =</span> fcyl, <span class="at">shape =</span> fam, <span class="at">size =</span> hp <span class="sc">/</span> wt)) <span class="sc">+</span></span>
<span id="cb41-3"><a href="#cb41-3"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-34-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-30"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>That’s a pretty slick plot! Between the x and y dimensions, the color, shape, and size of the points, your plot displays five dimensions of the dataset!</p>
</section>
</section>
<section id="modifying-aesthetics" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="modifying-aesthetics"><span class="header-section-number">2.5</span> Modifying aesthetics</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. Modifying Aesthetics</strong></p>
<p>Now that we know what aesthetics are and have some idea about choosing them appropriately, let’s explore how to modify them.</p>
<p><strong>2. Positions</strong></p>
<p>A common adjustment is the position.Position specifies how ggplot will adjust for overlapping bars or points on a single layer.For example, we have identity, dodge, stack, fill, jitter, jitterdodge, and nudge. Let’s take a look.</p>
<p><strong>3. position = “identity” (default)</strong></p>
<p>The most straightforward position is identity, which we’ve actually already seen. It’s the default position for our scatter plots. “Identity” means that the value in the data frame is exactly where the value will be positioned in the plot. This basically means, don’t do anything, just put the information where the data says to put the information.</p>
<p><strong>4. position = “identity” (default)</strong></p>
<p>We could have written it explicitly, but it’s not necessary. There is an issue with the precision in this data set. Our sepals were measured to the nearest millimeter. So although we only have 150 points, there is too much overplotting to distinguish them. To solve this, we need to add some random noise on both the x and y axes to see regions of high density - which is referred to as “jittering”.</p>
<p><strong>5. position = “jitter”</strong></p>
<p>“jitter” can be used as an argument, but each position type can also be accessed as a function. For example,</p>
<p><strong>6. position_jitter()</strong></p>
<p>position jitter can be defined in a function before we call our plot, as shown here. This has two advantages.</p>
<p><strong>7. position_jitter()</strong></p>
<p>Now we can set specific arguments for the position, such as the width, which defines how much random noise should be added, and it allows us to use this parameter throughout our plotting functions so that we can maintain consistency across plots. This is available for all position attributes.We’ll explore the other positions in the exercises.</p>
<p><strong>8. Scale functions</strong></p>
<p>Recall that each of the aesthetics is a scale which we mapped data onto, so color is just a scale, like x and y are scales. Appropriately enough, we can access all the scales with the scale underscore functions. The second part of the function defines which scale we want to modify. All the aesthetics we saw earlier have an associated scale function. The third part must match the type of data we are using. Here discrete means we are working with categorical data.</p>
<p><strong>9. Scale functions</strong></p>
<p>That means we have to choose our axis dependent on the type of data we have. Here, we’ll consider the continuous x aesthetic and the categorical color aesthetic.Just as an aside, before we move on - don’t let the naming conventions confuse you. Categorical variables are also called factors, discrete and qualitative depending on their context and who you’re talking to.</p>
<p>**10. scale_*_*()**</p>
<p>There are many arguments for the scale functions.The first argument is always the name of the scale, after that most common are limits, breaks, expand and labels.</p>
<p><strong>11. The limits argument</strong></p>
<p>limits describe the scale’s range.</p>
<p><strong>12. The breaks argument</strong></p>
<p>breaks control the tick mark positions.</p>
<p><strong>13. The expand argument</strong></p>
<p>expand is a numeric vector of length two, giving a multiplicative and additive constant used to expand the range of the scales so that there is a small gap between the data and the axes.</p>
<p><strong>14. The labels argument</strong></p>
<p>and labels adjust the category names.</p>
<p><strong>15. labs()</strong></p>
<p>Note that if we just want to quickly change the axis labels, we can do this with the labs function.</p>
<p><strong>16. Let’s try it out!</strong></p>
<p>Alright, now let’s try it out in the exercises.</p>
<section id="updating-aesthetic-labels" class="level3">
<h3 class="anchored" data-anchor-id="updating-aesthetic-labels">Updating aesthetic labels</h3>
<p>In this exercise, you’ll modify some aesthetics to make a bar plot of the number of cylinders for cars with different types of transmission.</p>
<p>You’ll also make use of some functions for improving the appearance of the plot.</p>
<ul>
<li><a href="https://www.rdocumentation.org/packages/ggplot2/topics/labs"><code>labs()</code></a> to set the x- and y-axis labels. It takes strings for each argument.</li>
<li><a href="https://www.rdocumentation.org/packages/ggplot2/topics/scale_manual"><code>scale_color_manual()</code></a> defines properties of the color scale (i.e.&nbsp;axis). The first argument sets the legend title. <code>values</code> is a named vector of colors to use. <strong>Steps</strong></li>
</ul>
<ol type="1">
<li>Set the x-axis label to <code>"Number of Cylinders"</code>, and the y-axis label to <code>"Count"</code> using the <code>x</code> and <code>y</code> arguments of <a href="https://www.rdocumentation.org/packages/ggplot2/topics/labs"><code>labs()</code></a>, respectively.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(fcyl, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb42-2"><a href="#cb42-2"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb42-3"><a href="#cb42-3"></a>  <span class="co"># Set the axis labels</span></span>
<span id="cb42-4"><a href="#cb42-4"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Number of Cylinders"</span>, <span class="at">y =</span> <span class="st">"Count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-35-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-31"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Implement a custom fill color scale using <a href="https://www.rdocumentation.org/packages/ggplot2/topics/scale_manual"><code>scale_fill_manual()</code></a>. Set the first argument to <code>"Transmission"</code>, and <code>values</code> to <code>palette</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a>palette <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">automatic =</span> <span class="st">"#377EB8"</span>, <span class="at">manual =</span> <span class="st">"#E41A1C"</span>)</span>
<span id="cb43-2"><a href="#cb43-2"></a></span>
<span id="cb43-3"><a href="#cb43-3"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(fcyl, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb43-4"><a href="#cb43-4"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb43-5"><a href="#cb43-5"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Number of Cylinders"</span>, <span class="at">y =</span> <span class="st">"Count"</span>) <span class="sc">+</span></span>
<span id="cb43-6"><a href="#cb43-6"></a>  <span class="co"># Set the fill color scale</span></span>
<span id="cb43-7"><a href="#cb43-7"></a>  <span class="fu">scale_fill_manual</span>(<span class="st">"Transmission"</span>, <span class="at">values =</span> palette)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-36-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-32"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Modify the code to set the <code>position</code> to <code>dodge</code> so that the bars for transmissions are displayed side by side.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>palette <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">automatic =</span> <span class="st">"#377EB8"</span>, <span class="at">manual =</span> <span class="st">"#E41A1C"</span>)</span>
<span id="cb44-2"><a href="#cb44-2"></a></span>
<span id="cb44-3"><a href="#cb44-3"></a><span class="co"># Set the position</span></span>
<span id="cb44-4"><a href="#cb44-4"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(fcyl, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb44-5"><a href="#cb44-5"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">'dodge'</span>) <span class="sc">+</span></span>
<span id="cb44-6"><a href="#cb44-6"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Number of Cylinders"</span>, <span class="at">y =</span> <span class="st">"Count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-37-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-33"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="st">"Transmission"</span>, <span class="at">values =</span> palette)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; &lt;ggproto object: Class ScaleDiscrete, Scale, gg&gt;
#&gt;     aesthetics: fill
#&gt;     axis_order: function
#&gt;     break_info: function
#&gt;     break_positions: function
#&gt;     breaks: waiver
#&gt;     call: call
#&gt;     clone: function
#&gt;     dimension: function
#&gt;     drop: TRUE
#&gt;     expand: waiver
#&gt;     get_breaks: function
#&gt;     get_breaks_minor: function
#&gt;     get_labels: function
#&gt;     get_limits: function
#&gt;     guide: legend
#&gt;     is_discrete: function
#&gt;     is_empty: function
#&gt;     labels: waiver
#&gt;     limits: function
#&gt;     make_sec_title: function
#&gt;     make_title: function
#&gt;     map: function
#&gt;     map_df: function
#&gt;     n.breaks.cache: NULL
#&gt;     na.translate: TRUE
#&gt;     na.value: grey50
#&gt;     name: Transmission
#&gt;     palette: function
#&gt;     palette.cache: NULL
#&gt;     position: left
#&gt;     range: &lt;ggproto object: Class RangeDiscrete, Range, gg&gt;
#&gt;         range: NULL
#&gt;         reset: function
#&gt;         train: function
#&gt;         super:  &lt;ggproto object: Class RangeDiscrete, Range, gg&gt;
#&gt;     rescale: function
#&gt;     reset: function
#&gt;     scale_name: manual
#&gt;     train: function
#&gt;     train_df: function
#&gt;     transform: function
#&gt;     transform_df: function
#&gt;     super:  &lt;ggproto object: Class ScaleDiscrete, Scale, gg&gt;</code></pre>
</div>
</div>
<p>Premier positioning! Choosing the right <code>position</code> argument is an important part of making a good plot.</p>
</section>
<section id="setting-a-dummy-aesthetic" class="level3">
<h3 class="anchored" data-anchor-id="setting-a-dummy-aesthetic">Setting a dummy aesthetic</h3>
<p>In the last chapter you saw that all the visible aesthetics can serve as attributes and aesthetics, but I very conveniently left out x and y. That’s because although you can make univariate plots (such as histograms, which you’ll get to in the next chapter), a y-axis will always be provided, even if you didn’t ask for it.</p>
<p>You can make univariate plots in <code>ggplot2</code>, but you will need to add a fake y axis by mapping <code>y</code> to zero.</p>
<p>When using setting y-axis limits, you can specify the limits as separate arguments, or as a single numeric vector. That is, <code>ylim(lo, hi)</code> or <code>ylim(c(lo, hi))</code>.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Using <code>mtcars</code>, plot <code>0</code> vs.&nbsp;<code>mpg</code>.</li>
<li>Make a scatter plot and add <code>"jitter"</code> to it.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="co"># Plot 0 vs. mpg</span></span>
<span id="cb47-2"><a href="#cb47-2"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(mpg, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb47-3"><a href="#cb47-3"></a>  <span class="co"># Add jitter</span></span>
<span id="cb47-4"><a href="#cb47-4"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="st">"jitter"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-38-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-34"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Use <code>ylim()</code> to set the limits on the y-axis from <code>-2</code> to <code>2</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(mpg, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb48-2"><a href="#cb48-2"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb48-3"><a href="#cb48-3"></a>  <span class="co"># Set the y-axis limits from -2 to 2</span></span>
<span id="cb48-4"><a href="#cb48-4"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-39-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-35"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Great work! The best way to make your plot depends on a lot of different factors and sometimes <code>ggplot2</code> might not be the best choice.</p>
</section>
</section>
<section id="aesthetics-best-practices" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="aesthetics-best-practices"><span class="header-section-number">2.6</span> Aesthetics best practices</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. Aesthetics best practices</strong></p>
<p>Now that we know what visual aesthetics are, how do we choose the right one?</p>
<p><strong>2. Which aesthetics?</strong></p>
<p>There is some creativity involved, but there are some helpful guidelines.This chapter is informed by the seminal work of cartographer Jacques Bertin, who published The Semiology of Graphics in 1967 and William Cleveland, whose research on perception was summarized in two books.</p>
<p><strong>3. Form follows function</strong></p>
<p>The best data viz serves a purpose - that is, form follows function. So what is the function in data viz?Well, it depends on your audience.You may just want to confirm expectations and begin analyzing your data, or you may want to inform a specific reader and persuade them with your results.</p>
<p><strong>4. Form follows function</strong></p>
<p>First and foremost, our function is the accurate and efficient representation of data. Beautiful is nice, but it’s a secondary priority here. If data is not accurately and efficiently presented, it’s junk.The function is never to misrepresent or obscure our data. We can avoid this by always considering the intended audience and purpose of our plots.So how do we do this?</p>
<p><strong>5. Calculating statistics</strong></p>
<p>Let’s look at a simple example. In this data set, I have two continuous variables, x &amp; y, y is a function of x. There are two groups, A and B.</p>
<p><strong>6. Calculating statistics</strong></p>
<p>It’s pretty difficult to obtain summary statistics just by looking at the data.</p>
<p><strong>7. Extracting information from Data</strong></p>
<p>So we have two choices, numeric summaries, which are precise but offer a poor overview, or data visualization, which is imprecise but is great for overviews.</p>
<p><strong>8. Encoding numbers into plots</strong></p>
<p>To make a plot, we encode data in numbers and text into a visual medium.That’s what we do with aesthetic mappings.</p>
<p><strong>9. Various aesthetic mappings</strong></p>
<p>These plots differ in their aesthetic mappings and other values that we’ll explore throughout the courses.</p>
<p><strong>10. Decoding to data</strong></p>
<p>These visuals are then decoded to form an image of the original data. It’s inherently imprecise - kind of like translating between two languages.</p>
<p><strong>11. The best choices for aesthetics</strong></p>
<p>We consider the best choices to be those which are both efficient, in that they are faster than numeric summaries, and accurate, in that they minimize this information loss.</p>
<p><strong>12. Aesthetics - continuous variables</strong></p>
<p>The choice of aesthetic mapping depends on the type of variable.The scatter plot is so easy to understand because it maps data as position on a common scale.</p>
<p><strong>13. Aesthetics - continuous variables</strong></p>
<p>Imagine if we switch the aesthetic mappings for x and color. This is possible, but is neither accurate nor efficient.In the worst case scenario, there is no way to see the relationship between these three variables, and in the best case, our reader will interpret the plot in an unintended way.</p>
<p><strong>14. Efficiency of decoding</strong></p>
<p>There are many choices for mapping continuous variables. For example, position on unaligned scales, as in having many plots with different scales but the same data type</p>
<p><strong>15. Three iris scatter plots</strong></p>
<p>like this example where we had three plots from the iris wide2 data frame, one for each of our iris species</p>
<p><strong>16. Three iris scatter plots, unaligned y-axes</strong></p>
<p>on unaligned y axes, is less efficient and makes it difficult to compare plots compared to</p>
<p><strong>17. Single faceted plot, common y-axis</strong></p>
<p>an aligned scale.</p>
<p><strong>18. Decoding categorical</strong></p>
<p>There are also a variety of choices for categorical data.</p>
<p><strong>19. Aesthetics - categorical variables</strong></p>
<p>Color is often used to good effect for a categorical variables.But efficiency and accuracy are not only functions of aesthetic mappings. This plot suffers from over-plotting since not every point is visible. Over-plotting is an issue whenever we have points, like in a scatter plot.</p>
<p><strong>20. Aesthetics - categorical variables</strong></p>
<p>We’ll see lots of examples of over-plotting and how to deal with it in the exercises. Here, we’ll want to adjust position to add some random noise, and attributes, which we’ve already seen.</p>
<p><strong>21. Now it’s your turn</strong></p>
<p>Let’s head over to the exercises and play around with these concepts further.</p>
<section id="appropriate-mappings" class="level3">
<h3 class="anchored">Appropriate mappings</h3>
<p>Incorrect aesthetic mapping causes confusion or misleads the audience.</p>
<p>Typically, the <strong>dependent</strong> variable is mapped onto the the <strong>y</strong>-axis and the <strong>independent</strong> variable is mapped onto the <strong>x</strong>-axis.</p>
<p>In the <code>ToothGrowth</code> data set, we have three variables:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>len</code></td>
<td style="text-align: left;">Tooth length</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>supp</code></td>
<td style="text-align: left;">Supplement type (VC or OJ)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>dose</code></td>
<td style="text-align: left;">Dose in milligrams/day</td>
</tr>
</tbody>
</table>
<p>From the six possible ways to map three variables, one solution is shown in the viewer. Which of the remaining five would actually be a better solution?</p>
<blockquote class="blockquote">
<h2 id="question-3" data-number="2.7" class="anchored" data-anchor-id="appropriate-mappings"><span class="header-section-number">2.7</span> <em>Question</em></h2>
<p>???<br> <br> ✅ <code>x = supp, y = len, color = dose</code><br> ⬜ <code>x = dose, y = supp, color = len</code><br> ⬜ <code>x = len, y = dose, color = supp</code><br> ⬜ <code>x = len, y = supp, color = dose</code><br> ⬜ <code>x = supp, y = dose, color = len</code><br></p>
</blockquote>
<p>That’s correct!</p>
</section>
</section>
</section>
<section id="geometries" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Geometries</h1>
<p>A plot’s geometry dictates what visual elements will be used. In this chapter, we’ll familiarize you with the geometries used in the three most common plot types you’ll encounter - scatter plots, bar charts and line plots. We’ll look at a variety of different ways to construct these plots.</p>
<section id="scatter-plots" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="scatter-plots"><span class="header-section-number">3.1</span> Scatter plots</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. Scatter plots</strong></p>
<p>The third essential layer is the geometry layer. This determines how the plot actually looks.We’ve already seen many geometries in action - so let’s take a closer look.</p>
<p><strong>2. 48 geometries</strong></p>
<p>At present there are almost 50 different geometries to choose from, although there are some redundancies. They can all be accessed using its own geom_ function.As the domain specialist, it’s your job to choose the best geom, but there are some useful guidelines.</p>
<p><strong>3. Common plot types</strong></p>
<p>Let’s begin with scatter plots.</p>
<p><strong>4. Scatter plots</strong></p>
<p>Each geom is associated with specific aesthetic mappings, some of which are essential. To use geom_point, we need the x and y aesthetics.</p>
<p><strong>5. Scatter plots</strong></p>
<p>In addition to the essential aesthetics, we can also choose optional aesthetics, like alpha, color, fill, shape, size or stroke. These are all also attribute settings, as we discussed earlier.</p>
<p><strong>6. Geom-specific aesthetic mappings</strong></p>
<p>We can specify both geom-specific data and aesthetics. This allows us to control the information for each layer independently.</p>
<p><strong>7. iris demo</strong></p>
<p>Imagine I have a data frame which contains summary statistics, such as the mean, for each of my variables. In this case it’s the average sepal width and length for each of the three iris species. ggplot2 can actually take care of the statistics for us, we don’t need to calculate it ourselves beforehand, but let’s see how to use it if we have.To show all the individual points and have the mean of the x and y plotted on top, I could add another geom_point layer accessing this data set.</p>
<p><strong>8. iris plot</strong></p>
<p>In this plot one geom_point layer inherits the data and aesthetics from the parent ggplot function, and in the other I specify a different data set. Note that the aesthetics are inherited, as per the first geom function. I’ve changed the shape and the size attributes of the points so that they are distinguishable from the background points.</p>
<p><strong>9. Shape attribute values</strong></p>
<p>The possible values are shown here.15 is a solid square.Numbers 21 - 25 are not simply repeats of earlier codes, these shapes have both fill and color, which can be controlled independently.</p>
<p><strong>10. Example</strong></p>
<p>For example, I can have a black fill and use a stroke of 2 for a thick outline. The color aesthetic is still inherited from the parental layer. Imagine I wanted to have crosshairs marking where each mean value appears on the plot.</p>
<p><strong>11. On-the-fly stats by ggplot2</strong></p>
<p>It’s not fair to plot the mean without some measure of spread, like the standard deviation. We’ll get into that in the next course when we discuss the stats layer.</p>
<p><strong>12. position = “jitter”</strong></p>
<p>Recall that in the last chapter we used the position argument to change the position from identity to jitter.</p>
<p><strong>13. geom_jitter()</strong></p>
<p>We could have also done this with the geom_jitter function directly. geom_jitter is just a wrapper for geom_points with position set to jitter.</p>
<p><strong>14. Don’t forget to adjust alpha</strong></p>
<p>On top of jittering, we would also need to deal with overplotting of points by adjusting the alpha-blending, which works great as an attribute. This helps us to see regions of high density.</p>
<p><strong>15. Hollow circles also help</strong></p>
<p>Yet another way to deal with overplotting is to change the symbol to a hollow circle, which is shape 1. Both of these options help with visual communication because they aid in perception. We can more accurately and quickly see what the data is actually showing, even if the jittering adds some random noise to both axes!It’s always recommended to optimize the shape, size and alpha blending of points in a scatter plot.</p>
<p><strong>16. Let’s practice!</strong></p>
<p>Let’s head over to the exercises to understand what overplotting is and how to deal with it.</p>
<section id="overplotting-1-large-datasets" class="level3">
<h3 class="anchored" data-anchor-id="overplotting-1-large-datasets">Overplotting 1: large datasets</h3>
<p>Scatter plots (using <code>geom_point()</code>) are intuitive, easily understood, and very common, but we must <em>always</em> consider <strong>overplotting</strong>, particularly in the following four situations:</p>
<ol type="1">
<li>Large datasets</li>
<li>Aligned values on a single axis</li>
<li>Low-precision data</li>
<li>Integer data</li>
</ol>
<p>Typically, <em>alpha</em> blending (i.e.&nbsp;adding transparency) is recommended when using solid shapes. Alternatively, you can use opaque, hollow shapes.</p>
<p>Small points are suitable for large datasets with regions of high density (lots of overlapping).</p>
<p>Let’s use the <code>diamonds</code> dataset to practice dealing with the large dataset case.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li><p>Add a points layer to the base plot.</p>
<ul>
<li>Set the point transparency to <code>0.5</code>.</li>
<li>Set <code>shape = "."</code>, the point size of 1 pixel.</li>
</ul></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="co"># Plot price vs. carat, colored by clarity</span></span>
<span id="cb49-2"><a href="#cb49-2"></a>plt_price_vs_carat_by_clarity <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(carat, price, <span class="at">color =</span> clarity))</span>
<span id="cb49-3"><a href="#cb49-3"></a></span>
<span id="cb49-4"><a href="#cb49-4"></a><span class="co"># Add a point layer with tiny points</span></span>
<span id="cb49-5"><a href="#cb49-5"></a>plt_price_vs_carat_by_clarity <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">shape =</span> <span class="st">"."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-40-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-36"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Update the point shape to remove the line outlines by setting <code>shape</code> to <code>16</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a><span class="co"># Plot price vs. carat, colored by clarity</span></span>
<span id="cb50-2"><a href="#cb50-2"></a>plt_price_vs_carat_by_clarity <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(carat, price, <span class="at">color =</span> clarity))</span>
<span id="cb50-3"><a href="#cb50-3"></a></span>
<span id="cb50-4"><a href="#cb50-4"></a><span class="co"># Set transparency to 0.5</span></span>
<span id="cb50-5"><a href="#cb50-5"></a>plt_price_vs_carat_by_clarity <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">shape =</span> <span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-41-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-37"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>NA</p>
</section>
<section id="overplotting-2-aligned-values" class="level3">
<h3 class="anchored" data-anchor-id="overplotting-2-aligned-values">Overplotting 2: Aligned values</h3>
<p>Let’s take a look at another case where we should be aware of overplotting: Aligning values on a single axis.</p>
<p>This occurs when one axis is continuous and the other is categorical, which can be overcome with some form of jittering.</p>
<p>In the <code>mtcars</code> data set, <code>fam</code> and <code>fcyl</code> are categorical variants of <code>cyl</code> and <code>am</code>.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Create a base plot <code>plt_mpg_vs_fcyl_by_fam</code> of <code>fcyl</code> by <code>mpg</code>, colored by <code>fam</code>.</li>
<li>Add a points layer to the base plot.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="co"># Plot base</span></span>
<span id="cb51-2"><a href="#cb51-2"></a>plt_mpg_vs_fcyl_by_fam <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(fcyl, mpg, <span class="at">color =</span> fam))</span>
<span id="cb51-3"><a href="#cb51-3"></a></span>
<span id="cb51-4"><a href="#cb51-4"></a><span class="co"># Default points are shown for comparison</span></span>
<span id="cb51-5"><a href="#cb51-5"></a>plt_mpg_vs_fcyl_by_fam <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-42-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-38"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Add some jittering by using <code>position_jitter()</code>, setting the <code>width</code> to <code>0.3</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a><span class="co"># Plot base</span></span>
<span id="cb52-2"><a href="#cb52-2"></a>plt_mpg_vs_fcyl_by_fam <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(fcyl, mpg, <span class="at">color =</span> fam))</span>
<span id="cb52-3"><a href="#cb52-3"></a></span>
<span id="cb52-4"><a href="#cb52-4"></a><span class="co"># Default points are shown for comparison</span></span>
<span id="cb52-5"><a href="#cb52-5"></a>plt_mpg_vs_fcyl_by_fam <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-43-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-39"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a><span class="co"># Alter the point positions by jittering, width 0.3</span></span>
<span id="cb53-2"><a href="#cb53-2"></a>plt_mpg_vs_fcyl_by_fam <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-43-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-40"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-43-2.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Alternatively, use <code>position_jitterdodge()</code>. Set <code>jitter.width</code> and <code>dodge.width</code> to <code>0.3</code> to separate subgroups further.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a><span class="co"># Plot base</span></span>
<span id="cb54-2"><a href="#cb54-2"></a>plt_mpg_vs_fcyl_by_fam <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(fcyl, mpg, <span class="at">color =</span> fam))</span>
<span id="cb54-3"><a href="#cb54-3"></a></span>
<span id="cb54-4"><a href="#cb54-4"></a><span class="co"># Default points are shown for comparison</span></span>
<span id="cb54-5"><a href="#cb54-5"></a>plt_mpg_vs_fcyl_by_fam <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-44-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-41"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a><span class="co"># Now jitter and dodge the point positions</span></span>
<span id="cb55-2"><a href="#cb55-2"></a>plt_mpg_vs_fcyl_by_fam <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitterdodge</span>(<span class="at">jitter.width =</span> <span class="fl">0.3</span>, <span class="at">dodge.width =</span> <span class="fl">0.3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-44-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-42"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-44-2.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Jubilant jitters! These are some simple ways of dealing with overplotting, but you’ll encounter more ideas througout the <code>ggplot2</code> courses when we encounter atypical geoms.</p>
</section>
<section id="overplotting-3-low-precision-data" class="level3">
<h3 class="anchored" data-anchor-id="overplotting-3-low-precision-data">Overplotting 3: Low-precision data</h3>
<p>You already saw how to deal with overplotting when using <a href="http://www.rdocumentation.org/packages/ggplot2/functions/geom_point"><code>geom_point()</code></a> in two cases:</p>
<ol type="1">
<li>Large datasets</li>
<li>Aligned values on a single axis</li>
<li>Low-precision data</li>
</ol>
<p>We used <code>position = 'jitter'</code> inside <a href="http://www.rdocumentation.org/packages/ggplot2/functions/geom_point"><code>geom_point()</code></a> or <a href="http://www.rdocumentation.org/packages/ggplot2/functions/geom_jitter"><code>geom_jitter()</code></a>.</p>
<p>Let’s take a look at another case:</p>
<ol start="3">
<ul>
<li>Low-precision data This results from low-resolution measurements like in the iris dataset, which is measured to 1mm precision (see viewer). It’s similar to case 2, but in this case we can jitter on both the x and y axis.</li>
</ul>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Change the points layer into a jitter layer.</li>
<li>Reduce the jitter layer’s width by setting the <code>width</code> argument to <code>0.1</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Sepal.Length, Sepal.Width, <span class="at">color =</span> Species)) <span class="sc">+</span></span>
<span id="cb56-2"><a href="#cb56-2"></a>  <span class="co"># Swap for jitter layer with width 0.1</span></span>
<span id="cb56-3"><a href="#cb56-3"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">width =</span> <span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-45-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-43"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li><p>Let’s use a different approach:</p>
<ul>
<li>Within <code>geom_point()</code>, set <code>position</code> to <code>"jitter"</code>.</li>
</ul></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Sepal.Length, Sepal.Width, <span class="at">color =</span> Species)) <span class="sc">+</span></span>
<span id="cb57-2"><a href="#cb57-2"></a>  <span class="co"># Set the position to jitter</span></span>
<span id="cb57-3"><a href="#cb57-3"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">position =</span> <span class="st">"jitter"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-46-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-44"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li><p>Provide an alternative specification:</p>
<ul>
<li>Have the <code>position</code> argument call <code>position_jitter()</code> with a <code>width</code> of <code>0.1</code>.</li>
</ul></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Sepal.Length, Sepal.Width, <span class="at">color =</span> Species)) <span class="sc">+</span></span>
<span id="cb58-2"><a href="#cb58-2"></a>  <span class="co"># Use a jitter position function with width 0.1</span></span>
<span id="cb58-3"><a href="#cb58-3"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-47-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-45"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Good job! Notice that <code>jitter</code> can be a geom itself (i.e.&nbsp;<code>geom_jitter()</code>), an argument in <code>geom_point()</code> (i.e.&nbsp;<code>position = "jitter"</code>), or a position function, (i.e.&nbsp;<code>position_jitter()</code>).</p>
</ol></section>
<section id="overplotting-4-integer-data" class="level3">
<h3 class="anchored" data-anchor-id="overplotting-4-integer-data">Overplotting 4: Integer data</h3>
<p>Let’s take a look at the last case of dealing with overplotting:</p>
<ol start="4">
<ul>
<li>Integer data This can be type <code>integer</code> (i.e.&nbsp;1 ,2, 3…) or categorical (i.e.&nbsp;class <code>factor</code>) variables. <code>factor</code> is just a special class of type <code>integer</code>.</li>
</ul>
<p>You’ll typically have a small, defined number of intersections between two variables, which is similar to case 3, but you may miss it if you don’t realize that integer and factor data are the same as low precision data.</p>
<p>The <code>Vocab</code> dataset provided contains the years of education and vocabulary test scores from respondents to US General Social Surveys from 1972-2004.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Examine the <code>Vocab</code> dataset using <code>str()</code>.</li>
<li>Using <code>Vocab</code>, draw a plot of <code>vocabulary</code> vs <code>education</code>.</li>
<li>Add a point layer.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a><span class="co"># data</span></span>
<span id="cb59-2"><a href="#cb59-2"></a><span class="fu">library</span>(car, <span class="at">warn.conflicts =</span> F, <span class="at">quietly =</span> T)</span>
<span id="cb59-3"><a href="#cb59-3"></a><span class="fu">data</span>(Vocab)</span>
<span id="cb59-4"><a href="#cb59-4"></a></span>
<span id="cb59-5"><a href="#cb59-5"></a><span class="co"># Examine the structure of Vocab</span></span>
<span id="cb59-6"><a href="#cb59-6"></a><span class="fu">str</span>(Vocab)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 'data.frame':    30351 obs. of  4 variables:
#&gt;  $ year      : num  1974 1974 1974 1974 1974 ...
#&gt;  $ sex       : Factor w/ 2 levels "Female","Male": 2 2 1 1 1 2 2 2 1 1 ...
#&gt;  $ education : num  14 16 10 10 12 16 17 10 12 11 ...
#&gt;  $ vocabulary: num  9 9 9 5 8 8 9 5 3 5 ...
#&gt;  - attr(*, "na.action")= 'omit' Named int [1:32115] 1 2 3 4 5 6 7 8 9 10 ...
#&gt;   ..- attr(*, "names")= chr [1:32115] "19720001" "19720002" "19720003" "19720004" ...</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a><span class="co"># Plot vocabulary vs. education</span></span>
<span id="cb61-2"><a href="#cb61-2"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(education, vocabulary)) <span class="sc">+</span></span>
<span id="cb61-3"><a href="#cb61-3"></a>  <span class="co"># Add a point layer</span></span>
<span id="cb61-4"><a href="#cb61-4"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-49-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-46"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Replace the point layer with a jitter layer.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(education, vocabulary)) <span class="sc">+</span></span>
<span id="cb62-2"><a href="#cb62-2"></a>  <span class="co"># Change to a jitter layer</span></span>
<span id="cb62-3"><a href="#cb62-3"></a>  <span class="fu">geom_jitter</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-50-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-47"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="5" type="1">
<li>Set the jitter transparency to <code>0.2</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(education, vocabulary)) <span class="sc">+</span></span>
<span id="cb63-2"><a href="#cb63-2"></a>  <span class="co"># Set the transparency to 0.2</span></span>
<span id="cb63-3"><a href="#cb63-3"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-51-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-48"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="6" type="1">
<li>Set the shape of the jittered points to hollow circles, (shape <code>1</code>).</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(education, vocabulary)) <span class="sc">+</span></span>
<span id="cb64-2"><a href="#cb64-2"></a>  <span class="co"># Set the shape to 1</span></span>
<span id="cb64-3"><a href="#cb64-3"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">shape =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-52-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-49"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Good job! Notice how jittering and alpha blending serves as a great solution to the overplotting problem here. Setting the <code>shape</code> to <code>1</code> didn’t really help, but it was useful in the previous exercises when you had less data. You need to consider each plot individually. You’ll encounter this dataset again when you look at bar plots.</p>
</ol></section>
</section>
<section id="histograms" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="histograms"><span class="header-section-number">3.2</span> Histograms</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. Histograms</strong></p>
<p>In this section we’ll take a look at the typical uses of bar plots and their associated geoms.</p>
<p><strong>2. Common plot types</strong></p>
<p>A histogram is a special type of bar plot that shows the binned distribution of a continuous variable.</p>
<p><strong>3. Histograms</strong></p>
<p>Here, we only need a single aesthetic: X, a continuous variable. geom_histogram plots a a binned version of our data.A message lets you know what happened. This geom is associated with a specific statistic, stat_bin. The bin argument took the default value of 30.</p>
<p><strong>4. Default of 30 even bins</strong></p>
<p>This is a good starting point, but we don’t need to settle for defaults! Let’s change it and see what happens.</p>
<p><strong>5. Intuitive and meaningful bin widths</strong></p>
<p>Changing the binwidth argument to 0-point-1 gives us a more intuitive impression of our data. Note that there is no space between the bars. That emphasizes that this is a representation of an underlying continuous distribution.</p>
<p><strong>6. Re-position tick marks</strong></p>
<p>That’s also why the labels on the x axis shouldn’t fall directly on the bars, but between the bars. They represent intervals and not actual values.Setting the center argument to half that of the binwidth does the trick.</p>
<p><strong>7. Different Species</strong></p>
<p>Remember that we have three species in our data set? We can fill the bars according to each species. This makes it clear that we have three histograms in the same plotting space.There is a perceptual problem here, because it is not immediately clear if the bars are overlapping or if they are stacked on top of each other.</p>
<p><strong>8. Default position is “stack”</strong></p>
<p>The default position is stack. In some cases, this may not be clear, so don’t risk confusing your viewer with stacked bars.We have some alternative positions we can use.</p>
<p><strong>9. position = “dodge”</strong></p>
<p>We can “dodge” our bars, which is a data viz term that simply means to off-set set each data point in a given category. That works but the number of categories really makes it difficult to see what’s happening. We’ll encounter dodging again in several situations throughout these courses where it can be used to good effect.</p>
<p><strong>10. position = “fill”</strong></p>
<p>The fill position normalizes each bin to represent the proportion of all observations in each bin. The y axis label didn’t change, but it should say proportion, not count.</p>
<p><strong>11. Final Slide</strong></p>
<p>Alright, let’s head over to the exercises and take a look at histograms in action.</p>
<section id="drawing-histograms" class="level3">
<h3 class="anchored" data-anchor-id="drawing-histograms">Drawing histograms</h3>
<p>Recall that histograms cut up a continuous variable into discrete bins and, by default, maps the internally calculated <code>count</code> variable (the number of observations in each bin) onto the y aesthetic. An internal variable called <code>density</code> can be accessed by using the <code>..</code> notation, i.e.&nbsp;<code>..density..</code>. Plotting this variable will show the relative frequency, which is the height times the width of each bin.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Using <code>mtcars</code>, map <code>mpg</code> onto the x aesthetic.</li>
<li>Add a histogram layer using <code>geom_histogram()</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a><span class="co"># Plot mpg</span></span>
<span id="cb65-2"><a href="#cb65-2"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(mpg)) <span class="sc">+</span></span>
<span id="cb65-3"><a href="#cb65-3"></a>  <span class="co"># Add a histogram layer</span></span>
<span id="cb65-4"><a href="#cb65-4"></a>  <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-53-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-50"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Set the histogram <code>binwidth</code> to <code>1</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(mpg)) <span class="sc">+</span></span>
<span id="cb66-2"><a href="#cb66-2"></a>  <span class="co"># Set the binwidth to 1</span></span>
<span id="cb66-3"><a href="#cb66-3"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-54-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-51"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Map <code>y</code> to the internal variable <code>..density..</code> to show frequency densities.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a><span class="co"># Map y to ..density..</span></span>
<span id="cb67-2"><a href="#cb67-2"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(mpg, ..density..)) <span class="sc">+</span></span>
<span id="cb67-3"><a href="#cb67-3"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: The dot-dot notation (`..density..`) was deprecated in ggplot2 3.4.0.
#&gt; ℹ Please use `after_stat(density)` instead.</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-55-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-52"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="5" type="1">
<li>Set the <code>fill</code> color of the histogram bars to <code>light_blue</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a>light_blue <span class="ot">&lt;-</span> <span class="st">"#51A8C9"</span></span>
<span id="cb69-2"><a href="#cb69-2"></a></span>
<span id="cb69-3"><a href="#cb69-3"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(mpg, ..density..)) <span class="sc">+</span></span>
<span id="cb69-4"><a href="#cb69-4"></a>  <span class="co"># Set the fill color to datacamp_light_blue</span></span>
<span id="cb69-5"><a href="#cb69-5"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">fill =</span> light_blue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-56-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-53"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Good job! Histograms are one of the most common exploratory plots for continuous data. If you want to use density on the y-axis be sure to set your binwidth to an intuitive value.</p>
</section>
<section id="positions-in-histograms" class="level3">
<h3 class="anchored" data-anchor-id="positions-in-histograms">Positions in histograms</h3>
<p>Here, we’ll examine the various ways of applying positions to histograms. <a href="http://www.rdocumentation.org/packages/ggplot2/functions/geom_histogram"><code>geom_histogram()</code></a>, a special case of <a href="http://www.rdocumentation.org/packages/ggplot2/functions/geom_bar"><code>geom_bar()</code></a>, has a <code>position</code> argument that can take on the following values:</p>
<ul>
<li><code>stack</code> (the default): Bars for different groups are stacked on top of each other.</li>
<li><code>dodge</code>: Bars for different groups are placed side by side.</li>
<li><code>fill</code>: Bars for different groups are shown as proportions.</li>
<li><code>identity</code>: Plot the values as they appear in the dataset. <strong>Steps</strong></li>
</ul>
<ol type="1">
<li>Update the aesthetics so that the fill color of the bars is determined by <code>fam</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a><span class="co"># Update the aesthetics so the fill color is by fam</span></span>
<span id="cb70-2"><a href="#cb70-2"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(mpg, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb70-3"><a href="#cb70-3"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-57-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-54"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Update the histogram layer to position the bars side-by-side, that is, <code>"dodge"</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(mpg, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb71-2"><a href="#cb71-2"></a>  <span class="co"># Change the position to dodge</span></span>
<span id="cb71-3"><a href="#cb71-3"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">position =</span> <span class="st">"dodge"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-58-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-55"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Update the histogram layer so the bars’ positions <code>"fill"</code> the y-axis.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(mpg, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb72-2"><a href="#cb72-2"></a>  <span class="co"># Change the position to fill</span></span>
<span id="cb72-3"><a href="#cb72-3"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">position =</span> <span class="st">"fill"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: Removed 16 rows containing missing values (`geom_bar()`).</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-59-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-56"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Update the histogram layer so bars are top of each other, using the <code>"identity"</code> position. So each bar can be seen, set <code>alpha</code> to <code>0.4</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(mpg, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb74-2"><a href="#cb74-2"></a>  <span class="co"># Change the position to identity, with transparency 0.4</span></span>
<span id="cb74-3"><a href="#cb74-3"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">position =</span> <span class="st">"identity"</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-60-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-57"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Good job! Now proceed with line plots!</p>
</section>
</section>
<section id="bar-plots" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="bar-plots"><span class="header-section-number">3.3</span> Bar plots</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. Bar plots</strong></p>
<p>In the last video, we saw that histograms are a specialized version of bar plots, where we have binned a continuous X-axis.</p>
<p><strong>2. Bar Plots, with a categorical X-axis</strong></p>
<p>Classic bar plots refer to a categorical X-axis. Here we need to use either geom_bar or geom_col.</p>
<p><strong>3. Bar Plots, with a categorical X-axis</strong></p>
<p>geom_bar will count the number of cases in each category of the variable mapped to the x-axis, whereas geom_col will just plot the actual value it finds in the data set.</p>
<p><strong>4. Bar Plots, with a categorical X-axis</strong></p>
<p>All the positions we just looked at are available in bar plots. You will encounter two types of bar plots in wide-spread use. Depicting either absolute counts or distributions. Let’s take a look at them in turn.</p>
<p><strong>5. Habits of mammals</strong></p>
<p>We’ll use a data set containing information on the REM sleep time and eating habits of a variety of mammals.</p>
<p><strong>6. Bar plot</strong></p>
<p>In this bar plot, we’ve split our data set according to eating behavior and simply asked how many observations we have in each category.Notice that something very similar to what happened with geom_histogram has happened here. The data was counted and that count was plotted, so once again there were some statistics which occurred under the hood, in this case there was a default value of “bin” set for the stat argument.These kind of plots are useful in getting a quick visual output, but we often see another type of bar plot, one which tries to depict the distribution of a data set. Let’s consider a scenario similar to what we saw with the point geom - that we have a data set with the summary values already calculated.</p>
<p><strong>7. Plotting distributions instead of absolute counts</strong></p>
<p>Often times this is the case - you will have descriptive statistics already calculated, but remember that we can make ggplot do this on the fly.</p>
<p><strong>8. Plotting distributions</strong></p>
<p>If we want to plot the average sepal width for each species, we can map the avg column in our dataset onto the y aesthetic. In this case we need to use geom_col.If we want to add error bars, there is another geom for that, appropriately called geom_errorbar. Here we again need to specify some aesthetics specific to this geom, namely ymin and ymax. On top of that I’ve set the width of the error bar tips to be narrow and I’ve made the fill of the bars themselves gray, so that we can see the error bars.This is the kind of plot that you’ll typically see in scientific publications, but it’s pretty terrible. There is a special name in the data vis community for these types of plots - they’re called dynamite plots, as in Wile E Coyote and the Roadrunner and a giant stick of Acme dynamite. They are strongly discouraged for many reasons, which we’ll explore in the data vis best practices chapter at the end of the second course.</p>
<p><strong>9. Let’s practice!</strong></p>
<p>Let’s head over to the exercises and take a look at bar plots in action</p>
<section id="position-in-bar-and-col-plots" class="level3">
<h3 class="anchored" data-anchor-id="position-in-bar-and-col-plots">Position in bar and col plots</h3>
<p>Let’s see how the <code>position</code> argument changes <a href="http://www.rdocumentation.org/packages/ggplot2/functions/geom_bar"><code>geom_bar()</code></a>.</p>
<p>We have three position options:</p>
<ul>
<li><code>stack</code>: The default</li>
<li><code>dodge</code>: Preferred</li>
<li><code>fill</code>: To show proportions While we will be using <code>geom_bar()</code> here, note that the function <a href="http://www.rdocumentation.org/packages/ggplot2/functions/geom_col"><code>geom_col()</code></a> is just <code>geom_bar()</code> where both the <code>position</code> and <code>stat</code> arguments are set to <code>"identity"</code>. It is used when we want the heights of the bars to represent the exact values in the data.</li>
</ul>
<p>In this exercise, you’ll draw the total count of cars having a given number of cylinders (<code>fcyl</code>), according to manual or automatic transmission type (<code>fam</code>).</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Using <code>mtcars</code>, plot <code>fcyl</code>, filled by <code>fam</code>.</li>
<li>Add a bar layer using <code>geom_bar()</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a><span class="co"># Plot fcyl, filled by fam</span></span>
<span id="cb75-2"><a href="#cb75-2"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(fcyl, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb75-3"><a href="#cb75-3"></a>  <span class="co"># Add a bar layer</span></span>
<span id="cb75-4"><a href="#cb75-4"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-61-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-58"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Set the bar <code>position</code> argument to <code>"fill"</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(fcyl, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb76-2"><a href="#cb76-2"></a>  <span class="co"># Set the position to "fill"</span></span>
<span id="cb76-3"><a href="#cb76-3"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-62-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-59"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Change the bar <code>position</code> argument to <code>"dodge"</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(fcyl, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb77-2"><a href="#cb77-2"></a>  <span class="co"># Change the position to "dodge"</span></span>
<span id="cb77-3"><a href="#cb77-3"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-63-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-60"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Good job! Different kinds of plots need different <code>position</code> arguments, so it’s important to be familiar with this attribute.</p>
</section>
<section id="overlapping-bar-plots" class="level3">
<h3 class="anchored" data-anchor-id="overlapping-bar-plots">Overlapping bar plots</h3>
<p>You can customize bar plots further by adjusting the dodging so that your bars partially overlap each other. Instead of using <code>position = "dodge"</code>, you’re going to use <code>position_dodge()</code>, like you did with <code>position_jitter()</code> in the the previous exercises. Here, you’ll save this as an object, <code>posn_d</code>, so that you can easily reuse it.</p>
<p>Remember, the reason you want to use <code>position_dodge()</code> (and <code>position_jitter()</code>) is to specify <em>how much</em> dodging (or jittering) you want.</p>
<p>For this example, you’ll use the <code>mtcars</code> dataset.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Use the functional form of the bar position: replace <code>"dodge"</code> with a call to <code>position_dodge()</code>.</li>
<li>Set its <code>width</code> to <code>0.2</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(cyl, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb78-2"><a href="#cb78-2"></a>  <span class="co"># Change position to use the functional form, with width 0.2</span></span>
<span id="cb78-3"><a href="#cb78-3"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-64-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-61"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-64-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Set the bar transparency level of the bars to <code>0.6</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(cyl, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb79-2"><a href="#cb79-2"></a>  <span class="co"># Set the transparency to 0.6</span></span>
<span id="cb79-3"><a href="#cb79-3"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.2</span>), <span class="at">alpha =</span> <span class="fl">0.6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-65-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-62"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Good job! By using these position functions, you can customize your plot to suit your needs.</p>
</section>
<section id="bar-plots-sequential-color-palette" class="level3">
<h3 class="anchored" data-anchor-id="bar-plots-sequential-color-palette">Bar plots: sequential color palette</h3>
<p>In this bar plot, we’ll fill each segment according to an ordinal variable. The best way to do that is with a sequential color palette.</p>
<p>Here’s an example of using a sequential color palette with the <code>mtcars</code> dataset:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(fcyl, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb80-2"><a href="#cb80-2"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb80-3"><a href="#cb80-3"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-66-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-63"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>In the exercise, you’ll use similar code on the the <code>Vocab</code> dataset. Both datasets are <strong>ordinal</strong>.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Plot the <code>Vocab</code> dataset, mapping <code>education</code> onto <code>x</code> and <code>vocabulary</code> onto <code>fill</code>.</li>
<li>Add a bar layer, setting <code>position</code> to <code>"fill"</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a><span class="co"># Preparation</span></span>
<span id="cb81-2"><a href="#cb81-2"></a>Vocab <span class="ot">&lt;-</span> Vocab <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">vocabulary =</span> <span class="fu">factor</span>(vocabulary),</span>
<span id="cb81-3"><a href="#cb81-3"></a>                          <span class="at">education  =</span> <span class="fu">factor</span>(education))</span>
<span id="cb81-4"><a href="#cb81-4"></a></span>
<span id="cb81-5"><a href="#cb81-5"></a><span class="co"># Plot education, filled by vocabulary</span></span>
<span id="cb81-6"><a href="#cb81-6"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(education, <span class="at">fill =</span> vocabulary)) <span class="sc">+</span></span>
<span id="cb81-7"><a href="#cb81-7"></a>  </span>
<span id="cb81-8"><a href="#cb81-8"></a>  <span class="co"># Change color scale because the tie theme allows for max of 8 colors</span></span>
<span id="cb81-9"><a href="#cb81-9"></a>  <span class="fu">scale_fill_hue</span>() <span class="sc">+</span></span>
<span id="cb81-10"><a href="#cb81-10"></a>  </span>
<span id="cb81-11"><a href="#cb81-11"></a>  <span class="co"># Add a bar layer with position "fill"</span></span>
<span id="cb81-12"><a href="#cb81-12"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-67-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-64"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-67-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Add a brewer fill scale, using the default palette (don’t pass any arguments). Notice how this generates a warning message and an incomplete plot.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1"></a><span class="co"># Plot education, filled by vocabulary</span></span>
<span id="cb82-2"><a href="#cb82-2"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(education, <span class="at">fill =</span> vocabulary)) <span class="sc">+</span></span>
<span id="cb82-3"><a href="#cb82-3"></a>  <span class="co"># Add a bar layer with position "fill"</span></span>
<span id="cb82-4"><a href="#cb82-4"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>) <span class="sc">+</span></span>
<span id="cb82-5"><a href="#cb82-5"></a>  <span class="co"># Add a brewer fill scale with default palette</span></span>
<span id="cb82-6"><a href="#cb82-6"></a>  <span class="fu">scale_fill_brewer</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Blues is 9
#&gt; Returning the palette you asked for with that many colors</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-68-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-65"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-68-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Good job! However, the plot is not complete! Let’s fix this in the next exercise.</p>
</section>
</section>
<section id="line-plots" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="line-plots"><span class="header-section-number">3.4</span> Line plots</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. Line plots</strong></p>
<p>Line plots are another very common plot type.</p>
<p><strong>2. Common plot types</strong></p>
<p>We’ll take a look at two examples of lines plots in situations in which they are very well-suited - time series.</p>
<p><strong>3. Beaver</strong></p>
<p>In this first example our data set contains temperature measurements of a beaver in 10 minute intervals over 16-point-5 hours. The time variable is in a proper time format, which can be handled very well with ggplot2.</p>
<p><strong>4. Beaver</strong></p>
<p>Our basic line plot follows the syntax we’ve see so far. This is the simplest case scenario. Let’s look at adding additional variables. In this case the transponder in our beaver also measured if the beaver was active or not.</p>
<p><strong>5. Beaver</strong></p>
<p>We can directly color each segment of our line according to another variable which is set as a color aesthetic.</p>
<p><strong>6. The fish catch dataset</strong></p>
<p>In the fish data set we have the global catch of 7 varieties of salmon over a 60 year period.</p>
<p><strong>7. Linetype aesthetic</strong></p>
<p>When we have multiple lines, we have to consider which aesthetic is more appropriate in allowing us to distinguish individual trends.Using linetype makes it difficult to distinguish individual species.</p>
<p><strong>8. Size aesthetic</strong></p>
<p>Using size is even worse! Don’t forget to use your common sense here.</p>
<p><strong>9. Color aesthetic</strong></p>
<p>Using color allows for easily distinguishable groups.There are a couple other ways of showing lines.</p>
<p><strong>10. Aesthetics for categorical variables</strong></p>
<p>The most salient choice is color, when available, since it allows the easiest way of distinguishing between each series.</p>
<p><strong>11. Fill aesthetic with geom_area()</strong></p>
<p>For example, we could have used an area fill, with geom_area, which defaults to position “stack”, so instead of overlapping time series, they are added together at each point.This kind of works in this situation, it really depends on how many time series you have and if that is what you want to communicate.</p>
<p><strong>12. Using position = “fill”</strong></p>
<p>If we use position”fill” we’ll get a proportion the total capture for each fish at each time-point. Note that we’d need to change the y axis label since these are no longer counts! This kind of plot is pretty popular in looking at proportional trends over time. A difficulty with this kind of plot is that only the bottom and top groups are actually drawn on a common scale, all the other ones are irregular shapes so they can be a bit difficult to decipher.</p>
<p><strong>13. geom_ribbon()</strong></p>
<p>The final type of plot we’ll look at is when we would want to have overlapping areas plots. In this case we’d have to use geom ribbon and force the y-min to be 0. We need to set the alpha level so that we can see the overlap. There is still a challenge in deciphering all the time series, in particularly at the bottom, where there are many overlapping series.</p>
<p><strong>14. Let’s practice!</strong></p>
<p>We’ll explore line plots in the following exercises, which will bring our discussion of the first three essential layers of ggplot2 to a close. By now you have a good core knowledge to build a wide variety of plots.I’ll see you in the next chapter where we’ll talk about making clean explanatory plots by using the themes layer!</p>
<section id="basic-line-plots" class="level3">
<h3 class="anchored" data-anchor-id="basic-line-plots">Basic line plots</h3>
<p>Here, we’ll use the <code>economics</code> dataset to make some line plots. The dataset contains a time series for unemployment and population statistics from the Federal Reserve Bank of St.&nbsp;Louis in the United States. The data is contained in the <code>ggplot2</code> package.</p>
<p>To begin with, you can look at how the median unemployment time and the unemployment rate (the number of unemployed people as a proportion of the population) change over time.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Print the head of the <code>economics</code> dataset.</li>
<li>Plot <code>unemploy</code> vs.&nbsp;<code>date</code> as a line plot.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1"></a><span class="co"># Print the head of economics</span></span>
<span id="cb84-2"><a href="#cb84-2"></a><span class="fu">head</span>(economics)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["date"],"name":[1],"type":["date"],"align":["right"]},{"label":["pce"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["pop"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["psavert"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["uempmed"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["unemploy"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"1967-07-01","2":"506.7","3":"198712","4":"12.6","5":"4.5","6":"2944"},{"1":"1967-08-01","2":"509.8","3":"198911","4":"12.6","5":"4.7","6":"2945"},{"1":"1967-09-01","2":"515.6","3":"199113","4":"11.9","5":"4.6","6":"2958"},{"1":"1967-10-01","2":"512.2","3":"199311","4":"12.9","5":"4.9","6":"3143"},{"1":"1967-11-01","2":"517.4","3":"199498","4":"12.8","5":"4.7","6":"3066"},{"1":"1967-12-01","2":"525.1","3":"199657","4":"11.8","5":"4.8","6":"3018"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1"></a><span class="co"># Using economics, plot unemploy vs. date</span></span>
<span id="cb85-2"><a href="#cb85-2"></a><span class="fu">ggplot</span>(economics, <span class="fu">aes</span>(date, unemploy)) <span class="sc">+</span></span>
<span id="cb85-3"><a href="#cb85-3"></a>  <span class="co"># Make it a line plot</span></span>
<span id="cb85-4"><a href="#cb85-4"></a>  <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-69-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-66"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Adjust the y-axis aesthetic of the plot so that it represents the proportion of the <code>pop</code>ulation that is <code>unemploy</code>ed.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1"></a><span class="co"># Change the y-axis to the proportion of the population that is unemployed</span></span>
<span id="cb86-2"><a href="#cb86-2"></a><span class="fu">ggplot</span>(economics, <span class="fu">aes</span>(date, unemploy <span class="sc">/</span> pop)) <span class="sc">+</span></span>
<span id="cb86-3"><a href="#cb86-3"></a>  <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-70-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-67"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-70-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Good job! In the next exercise, we’ll make more complicated line plots.</p>
</section>
<section id="multiple-time-series" class="level3">
<h3 class="anchored" data-anchor-id="multiple-time-series">Multiple time series</h3>
<p>We already saw how the form of your data affects how you can plot it. Let’s explore that further with multiple time series. Here, it’s important that all lines are on the same scale, and if possible, on the same plot.</p>
<p><code>fish.species</code> contains the global capture rates of seven salmon species from 1950-2010. Each variable (column) is a Salmon species and each observation (row) is one year. <code>fish.tidy</code> contains the same data, but in three columns: <code>Species</code>, <code>Year</code>, and <code>Capture</code> (i.e.&nbsp;one variable per column).</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Plot only the <code>Rainbow</code> salmon time series with <code>geom_line()</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1"></a><span class="co"># data</span></span>
<span id="cb87-2"><a href="#cb87-2"></a>fish.species <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"data/fish.species.rds"</span>)</span>
<span id="cb87-3"><a href="#cb87-3"></a>fish.tidy    <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"data/fish.tidy.rds"</span>)</span>
<span id="cb87-4"><a href="#cb87-4"></a></span>
<span id="cb87-5"><a href="#cb87-5"></a><span class="co"># Plot the Rainbow Salmon time series</span></span>
<span id="cb87-6"><a href="#cb87-6"></a><span class="fu">ggplot</span>(fish.species, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Rainbow)) <span class="sc">+</span></span>
<span id="cb87-7"><a href="#cb87-7"></a>  <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-71-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-68"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-71-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Plot only the <code>Pink</code> salmon time series with <code>geom_line()</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a><span class="co"># Plot the Pink Salmon time series</span></span>
<span id="cb88-2"><a href="#cb88-2"></a><span class="fu">ggplot</span>(fish.species, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Pink)) <span class="sc">+</span></span>
<span id="cb88-3"><a href="#cb88-3"></a>  <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-72-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-69"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-72-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li><p>Now try and plot all time series in a single plot.</p>
<ul>
<li>Plot the <code>fish.tidy</code> dataset, mapping <code>Year</code> to <code>x</code> and <code>Capture</code> to <code>y</code>.</li>
<li><code>group</code> by fish species within the aesthetics of <code>geom_line()</code>.</li>
</ul></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1"></a><span class="co"># Plot multiple time-series by grouping by species</span></span>
<span id="cb89-2"><a href="#cb89-2"></a><span class="fu">ggplot</span>(fish.tidy, <span class="fu">aes</span>(Year, Capture)) <span class="sc">+</span></span>
<span id="cb89-3"><a href="#cb89-3"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> Species))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-73-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-70"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-73-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="5" type="1">
<li><p>Let’s add color to the previous plot to distinguish between the different time series.</p>
<ul>
<li>Plot the <code>fish.tidy</code> dataset again, this time making sure to <code>color</code> by <code>Species</code>.</li>
</ul></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a><span class="co"># Plot multiple time-series by coloring by species</span></span>
<span id="cb90-2"><a href="#cb90-2"></a><span class="fu">ggplot</span>(fish.tidy, <span class="fu">aes</span>(Year, Capture, <span class="at">color =</span> Species)) <span class="sc">+</span></span>
<span id="cb90-3"><a href="#cb90-3"></a>  <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-74-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-71"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-74-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Good job! As you can see in the the last couple of plots, a grouping aesthetic was vital here. If you don’t specify <code>color = Species</code>, you’ll get a mess of lines.</p>
</section>
</section>
</section>
<section id="themes" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Themes</h1>
<p>In this chapter, we’ll explore how understanding the structure of your data makes data visualization much easier. Plus, it’s time to make our plots pretty. This is the last step in the data viz process. The Themes layer will enable you to make publication quality plots directly in R. In the next course we’ll look at some extra layers to add more variables to your plots.</p>
<section id="themes-from-scratch" class="level3">
<h3 class="anchored" data-anchor-id="themes-from-scratch">Themes from scratch</h3>
<p>Theory. Coming soon …</p>
<p><strong>1. Themes from scratch</strong></p>
<p>The themes layer controls all the non-data ink on your plot.</p>
<p><strong>2. The themes layer</strong></p>
<p>Which are all the visual elements that are not actually part of the data.</p>
<p><strong>3. The themes layer</strong></p>
<p>Visual elements can be classified as one of three different types - text, line or rectangle.</p>
<p><strong>4. The themes layer</strong></p>
<p>Each type can be modified by using the appropriate function, which all begin with element_ followed by text, line, or rect, respectively.</p>
<p><strong>5. A starting plot…</strong></p>
<p>For example, consider this plot that we’ve already encounter a few times. It’s composed out of a combination of data and lots of non-data embellishments. For example, these are all the text elements on our plot</p>
<p><strong>6. The text elements</strong></p>
<p>Each element has it’s own unique name. We can access all the text in general, all titles in general but also more and more specific items, such as the plot, legend and axis titles, or the text on specific axes. All these items are arguments of the theme function.</p>
<p><strong>7. The text elements</strong></p>
<p>This is used like all other layers in ggplot, by adding a plus to our plot.</p>
<p><strong>8. Adjusting theme elements</strong></p>
<p>To modify an element, just call its argument in the theme function and use the appropriate element_ function to specify what we want to change, in this case we need to use an element_text call. It’s within this function that we manipulate things like size, color, alignment and angle of the text.</p>
<p><strong>9. A starting plot…</strong></p>
<p>Lines include the tick marks on the axes, the axis lines themselves and all grid lines, both major and minor.</p>
<p><strong>10. Line elements</strong></p>
<p>These are also all just arguments within the theme function and are modified by the element_line argument.</p>
<p><strong>11. A starting plot…</strong></p>
<p>The remaining non-data ink on our plot are all rectangles of various sizes.</p>
<p><strong>12. Rect elements</strong></p>
<p>Access rectangles using arguments in the theme function and modify them using element_rect.</p>
<p><strong>13. Hierarchical naming reflects inheritance rules</strong></p>
<p>Although we have access to every item, we don’t need to modify them individually. They inherent from each other in a hierarchy. All text elements inherit from text, so if we changed that argument, all downstream arguments would be affected. The same goes for line and rectangle.The naming convention is pretty intuitive.In practice you will call a small combination of arguments that you want to change.</p>
<p><strong>14. element_blank()</strong></p>
<p>There is one other element function that we haven’t discussed yet: element_blank. We can use this in a plot to remove any item. That is, it won’t be drawn at all. In this example we set all lines, text and rectangles to blank, so we are left with just the data. Notice that the legend keys themselves are part of the data, if you want to modify these elements refer back to the chapter aesthetics and the exercises on scales.</p>
<p><strong>15. Let’s practice!</strong></p>
<p>Here, we saw how the theme layer allows us to modify visual attributes of non-data ink, including text lines and rectangles. But in addition to that, we can also modify a plot’s margins and legend position. Let’s head over to the exercises and see how this in action.</p>
</section>
<section id="moving-the-legend" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="moving-the-legend"><span class="header-section-number">4.1</span> Moving the legend</h2>
<p>Let’s wrap up this course by making a publication-ready plot communicating a clear message.</p>
<p>To change stylistic elements of a plot, call <a href="http://www.rdocumentation.org/packages/ggplot2/functions/theme"><code>theme()</code></a> and set plot properties to a new value. For example, the following changes the legend position.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1"></a>p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> new_value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here, the new value can be</p>
<ul>
<li><code>"top"</code>, <code>"bottom"</code>, <code>"left"</code>, or <code>"right'"</code>: place it at that side of the plot.</li>
<li><code>"none"</code>: don’t draw it.</li>
<li><code>c(x, y)</code>: <code>c(0, 0)</code> means the bottom-left and <code>c(1, 1)</code> means the top-right. Let’s revisit the recession period line plot (assigned to <code>plt_prop_unemployed_over_time</code>).</li>
</ul>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Update the plot to remove the legend.</li>
<li><em>Look at the changes in the plot.</em></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1"></a><span class="co"># View the default plot</span></span>
<span id="cb92-2"><a href="#cb92-2"></a>plt_prop_unemployed_over_time</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-77-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-72"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-77-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1"></a><span class="co"># Remove legend entirely</span></span>
<span id="cb93-2"><a href="#cb93-2"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb93-3"><a href="#cb93-3"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-77-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-73"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-77-2.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Update the plot to position the legend at the right of the plot.</li>
<li><em>Look at the changes in the plot.</em></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1"></a><span class="co"># Position the legend at the bottom of the plot</span></span>
<span id="cb94-2"><a href="#cb94-2"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb94-3"><a href="#cb94-3"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-78-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-74"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-78-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="5" type="1">
<li>Position the legend inside the plot, with x-position <code>0.6</code> and y-position <code>0.1</code>.</li>
<li><em>Look at the changes in the plot.</em></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1"></a><span class="co"># Position the legend inside the plot at (0.6, 0.1)</span></span>
<span id="cb95-2"><a href="#cb95-2"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb95-3"><a href="#cb95-3"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.6</span>, <span class="fl">0.1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-79-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-75"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-79-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Nice! But be careful when placing a legend inside your plotting space. You could end up obscuring data.</p>
</section>
<section id="modifying-theme-elements" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="modifying-theme-elements"><span class="header-section-number">4.2</span> Modifying theme elements</h2>
<p>Many plot elements have multiple properties that can be set. For example, line elements in the plot such as axes and gridlines have a color, a thickness (<code>size</code>), and a line type (solid line, dashed, or dotted). To set the style of a line, you use <a href="https://www.rdocumentation.org/packages/ggplot2/topics/margin"><code>element_line()</code></a>. For example, to make the axis lines into red, dashed lines, you would use the following.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1"></a>p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"red"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Similarly, <code>element_rect()</code> changes rectangles and <code>element_text()</code> changes text. You can remove a plot element using <code>element_blank()</code>.</p>
<p><code>plt_prop_unemployed_over_time</code> is available.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Give all rectangles in the plot, (the <code>rect</code> element) a <code>fill</code> color of <code>"grey92"</code> (very pale grey).</li>
<li>Remove the <code>legend.key</code>’s outline by setting its <code>color</code> to be missing.</li>
<li><em>Look at the changes in the plot.</em></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb97-2"><a href="#cb97-2"></a>  <span class="fu">theme</span>(</span>
<span id="cb97-3"><a href="#cb97-3"></a>    <span class="co"># For all rectangles, set the fill color to grey92</span></span>
<span id="cb97-4"><a href="#cb97-4"></a>    <span class="at">rect =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"grey92"</span>),</span>
<span id="cb97-5"><a href="#cb97-5"></a>    <span class="co"># For the legend key, turn off the outline</span></span>
<span id="cb97-6"><a href="#cb97-6"></a>    <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="cn">NA</span>)</span>
<span id="cb97-7"><a href="#cb97-7"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-81-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-76"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-81-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Remove the axis ticks, <code>axis.ticks</code> by making them a blank element.</li>
<li>Remove the panel gridlines, <code>panel.grid</code> in the same way.</li>
<li><em>Look at the changes in the plot.</em></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb98-2"><a href="#cb98-2"></a>  <span class="fu">theme</span>(</span>
<span id="cb98-3"><a href="#cb98-3"></a>    <span class="at">rect =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"grey92"</span>),</span>
<span id="cb98-4"><a href="#cb98-4"></a>    <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb98-5"><a href="#cb98-5"></a>    <span class="co"># Turn off axis ticks</span></span>
<span id="cb98-6"><a href="#cb98-6"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb98-7"><a href="#cb98-7"></a>    <span class="co"># Turn off the panel grid</span></span>
<span id="cb98-8"><a href="#cb98-8"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb98-9"><a href="#cb98-9"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-82-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-77"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-82-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="7" type="1">
<li>Add the major horizontal grid lines back to the plot using <code>panel.grid.major.y</code>.the line <code>color</code> to <code>"white"</code>, <code>size</code> to <code>0.5</code>, and <code>linetype</code> to <code>"dotted"</code>.</li>
<li>Set the line <code>color</code> to <code>"white"</code>, <code>size</code> to <code>0.5</code>, and <code>linetype</code> to <code>"dotted"</code>.</li>
<li><em>Look at the changes in the plot.</em></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb99-2"><a href="#cb99-2"></a>  <span class="fu">theme</span>(</span>
<span id="cb99-3"><a href="#cb99-3"></a>    <span class="at">rect =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"grey92"</span>),</span>
<span id="cb99-4"><a href="#cb99-4"></a>    <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb99-5"><a href="#cb99-5"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb99-6"><a href="#cb99-6"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb99-7"><a href="#cb99-7"></a>    <span class="co"># Add major y-axis panel grid lines back</span></span>
<span id="cb99-8"><a href="#cb99-8"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(</span>
<span id="cb99-9"><a href="#cb99-9"></a>      <span class="co"># Set the color to white</span></span>
<span id="cb99-10"><a href="#cb99-10"></a>      <span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb99-11"><a href="#cb99-11"></a>      <span class="co"># Set the size to 0.5</span></span>
<span id="cb99-12"><a href="#cb99-12"></a>      <span class="at">size =</span> <span class="fl">0.5</span>,</span>
<span id="cb99-13"><a href="#cb99-13"></a>      <span class="co"># Set the line type to dotted</span></span>
<span id="cb99-14"><a href="#cb99-14"></a>      <span class="at">linetype =</span> <span class="st">"dotted"</span></span>
<span id="cb99-15"><a href="#cb99-15"></a>    )</span>
<span id="cb99-16"><a href="#cb99-16"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: The `size` argument of `element_line()` is deprecated as of ggplot2 3.4.0.
#&gt; ℹ Please use the `linewidth` argument instead.</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-83-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-78"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-83-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="10" type="1">
<li>Make the axis tick labels’ text, <code>axis.text</code>, less prominent by changing the <code>color</code> to <code>"grey25"</code>.</li>
<li>Increase the <code>plot.title</code>’s, <code>size</code> to <code>16</code> and change its font <code>face</code> to <code>"italic"</code>.</li>
<li><em>Look at the changes in the plot.</em></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb101-2"><a href="#cb101-2"></a>  <span class="fu">theme</span>(</span>
<span id="cb101-3"><a href="#cb101-3"></a>    <span class="at">rect =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"grey92"</span>),</span>
<span id="cb101-4"><a href="#cb101-4"></a>    <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb101-5"><a href="#cb101-5"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb101-6"><a href="#cb101-6"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb101-7"><a href="#cb101-7"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(</span>
<span id="cb101-8"><a href="#cb101-8"></a>      <span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb101-9"><a href="#cb101-9"></a>      <span class="at">size =</span> <span class="fl">0.5</span>,</span>
<span id="cb101-10"><a href="#cb101-10"></a>      <span class="at">linetype =</span> <span class="st">"dotted"</span></span>
<span id="cb101-11"><a href="#cb101-11"></a>    ),</span>
<span id="cb101-12"><a href="#cb101-12"></a>    <span class="co"># Set the axis text color to grey25</span></span>
<span id="cb101-13"><a href="#cb101-13"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"grey25"</span>),</span>
<span id="cb101-14"><a href="#cb101-14"></a>    <span class="co"># Set the plot title font face to italic and font size to 16</span></span>
<span id="cb101-15"><a href="#cb101-15"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"italic"</span>, <span class="at">size =</span> <span class="dv">16</span>)</span>
<span id="cb101-16"><a href="#cb101-16"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-84-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-79"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-84-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Excellent Explanatory Plot! This plot is ready for prime time – it’s pretty AND informative. Make sure that all your text is legible for the context in which it will be viewed.</p>
<section id="modifying-whitespace" class="level3">
<h3 class="anchored" data-anchor-id="modifying-whitespace">Modifying whitespace</h3>
<p><strong>Whitespace</strong> means all the non-visible margins and spacing in the plot.</p>
<p>To set a single whitespace value, use <a href="https://www.rdocumentation.org/packages/grid/topics/unit"><code>unit(x, unit)</code></a>, where <code>x</code> is the amount and <code>unit</code> is the unit of measure.</p>
<p>Borders require you to set 4 positions, so use <a href="https://www.rdocumentation.org/packages/ggplot2/topics/margin"><code>margin(top, right, bottom, left, unit)</code></a>. To remember the margin order, think <strong>TRouBLe</strong>.</p>
<p>The default unit is <code>"pt"</code> (points), which scales well with text. Other options include “cm”, “in” (inches) and “lines” (of text).</p>
<p><code>plt_mpg_vs_wt_by_cyl</code> is available. The panel and legend are wrapped in blue boxes so you can see how they change.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Give the axis tick length, <code>axis.ticks.length</code>, a unit of <code>2</code> <code>"lines"</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1"></a>plt_mpg_vs_wt_by_cyl <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg, <span class="at">color =</span> fcyl)) <span class="sc">+</span></span>
<span id="cb102-2"><a href="#cb102-2"></a>  <span class="fu">ylab</span>(<span class="st">"Miels per gallon"</span>) <span class="sc">+</span> </span>
<span id="cb102-3"><a href="#cb102-3"></a>  <span class="fu">xlab</span>(<span class="st">"weight (1000/lbs)"</span>) <span class="sc">+</span></span>
<span id="cb102-4"><a href="#cb102-4"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1"></a><span class="co"># View the original plot</span></span>
<span id="cb103-2"><a href="#cb103-2"></a>plt_mpg_vs_wt_by_cyl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-86-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-80"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-86-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1"></a>plt_mpg_vs_wt_by_cyl <span class="sc">+</span></span>
<span id="cb104-2"><a href="#cb104-2"></a>  <span class="fu">theme</span>(</span>
<span id="cb104-3"><a href="#cb104-3"></a>    <span class="co"># Set the axis tick length to 2 lines</span></span>
<span id="cb104-4"><a href="#cb104-4"></a>    <span class="at">axis.ticks.length =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">"lines"</span>)</span>
<span id="cb104-5"><a href="#cb104-5"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-86-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-81"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-86-2.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Give the legend key size, <code>legend.key.size</code>, a unit of <code>3</code> centimeters (<code>"cm"</code>).</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1"></a>plt_mpg_vs_wt_by_cyl <span class="sc">+</span></span>
<span id="cb105-2"><a href="#cb105-2"></a>  <span class="fu">theme</span>(</span>
<span id="cb105-3"><a href="#cb105-3"></a>    <span class="co"># Set the legend key size to 3 centimeters</span></span>
<span id="cb105-4"><a href="#cb105-4"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">3</span>, <span class="st">"cm"</span>)</span>
<span id="cb105-5"><a href="#cb105-5"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-87-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-82"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-87-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Set the <code>legend.margin</code> to <code>20</code> points (<code>"pt"</code>) on the top, <code>30</code> pts on the right, <code>40</code> pts on the bottom, and <code>50</code> pts on the left.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1"></a>plt_mpg_vs_wt_by_cyl <span class="sc">+</span></span>
<span id="cb106-2"><a href="#cb106-2"></a>  <span class="fu">theme</span>(</span>
<span id="cb106-3"><a href="#cb106-3"></a>    <span class="co"># Set the legend margin to (20, 30, 40, 50) points</span></span>
<span id="cb106-4"><a href="#cb106-4"></a>    <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="st">"pt"</span>)</span>
<span id="cb106-5"><a href="#cb106-5"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-88-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-83"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-88-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Set the plot margin, <code>plot.margin</code>, to <code>10</code>, <code>30</code>, <code>50</code>, and <code>70</code> millimeters (<code>"mm"</code>).</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1"></a>plt_mpg_vs_wt_by_cyl <span class="sc">+</span></span>
<span id="cb107-2"><a href="#cb107-2"></a>  <span class="fu">theme</span>(</span>
<span id="cb107-3"><a href="#cb107-3"></a>    <span class="co"># Set the plot margin to (10, 30, 50, 70) millimeters</span></span>
<span id="cb107-4"><a href="#cb107-4"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">10</span>, <span class="dv">30</span>, <span class="dv">50</span>, <span class="dv">70</span>, <span class="st">"mm"</span>)</span>
<span id="cb107-5"><a href="#cb107-5"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-89-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-84"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-89-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Wonderful whitespace widening! Changing the whitespace can be useful if you need to make your plot more compact, or if you want to create more space to reduce “business”.</p>
</section>
<section id="theme-flexibility" class="level3">
<h3 class="anchored" data-anchor-id="theme-flexibility">Theme flexibility</h3>
<p>Theory. Coming soon …</p>
<p><strong>1. Theme flexibility</strong></p>
<p>In the last video and exercises</p>
<p><strong>2. Ways to use themes</strong></p>
<p>we saw how to fine-tune every part of our plot using the theme layer.</p>
<p><strong>3. Ways to use themes</strong></p>
<p>There are a few other ways of changing theme elements, so let’s take a look. We’ll begin with defining our own theme layer object.</p>
<p><strong>4. Defining theme objects</strong></p>
<p>If you’re using many plots within a presentation or publication, you’ll want to have consistency in your style. So, once you settle on a a specific theme, you’ll want to apply it to all plots of the same type.Creating a theme from scratch is a detailed process, that we don’t want to repeat for every plot we make. That’s where defining a theme layer object comes into play.</p>
<p><strong>5. Defining theme objects</strong></p>
<p>To see how this works let’s return to a plot we’ve already seen in the last video.For convenience, we’re going to save this plot as an object called Z.</p>
<p><strong>6. Defining theme objects</strong></p>
<p>We can adjust specific theme arguments to get the desired plot style. Here, I’ve changed the font family, size and title color.</p>
<p><strong>7. Defining theme objects</strong></p>
<p>The first method in automating this process is to save our layer as an object. Here we’re just going to call it theme iris.</p>
<p><strong>8. Reusing theme objects</strong></p>
<p>Just as we’ve seen throughout the course, we can add individual layers to any ggplot object.This means we can reuse this style over and over. Let’s see what happens when we try to apply our new theme object on another plot.</p>
<p><strong>9. Reusing theme objects</strong></p>
<p>Remember this histogram of the iris Sepal widths?</p>
<p><strong>10. Reusing theme objects</strong></p>
<p>Now it has the same style as our scatter plot, without having to retype the whole theme layer.</p>
<p><strong>11. Reusing theme objects</strong></p>
<p>But let’s say that on occasion I wanted to modify some other specific elements of a plot. Not a problem, we can just add a another theme layer which will override any previous settings. In this example, I’ve removed the x axis line.</p>
<p><strong>12. Ways to use themes</strong></p>
<p>So far we just used our theme as an object itself. This is a pretty flexible way of working with theme, but a third way of working with themes is accessing the built-in theme templates.</p>
<p><strong>13. Using built-in themes</strong></p>
<p>Built-in theme functions begin with theme_*. theme classic is my go-to template for great publication-quality plots.</p>
<p><strong>14. Using built-in themes</strong></p>
<p>Of course we can always modify any specific element, as we’ve already seen.</p>
<p><strong>15. Ways to use themes</strong></p>
<p>There are also packages with pre-defined themes, like the ggthemes package.</p>
<p><strong>16. The ggthemes package</strong></p>
<p>The tufte theme mimics Tufte’s classic style, which removes all non-data ink and sets the font to a serif typeface.</p>
<p><strong>17. Ways to use themes</strong></p>
<p>Finally, we can update and set the default theme</p>
<p><strong>18. Updating themes</strong></p>
<p>Updating is done with the theme_update function.This function behaves differently from a typical function. This command updates the default theme and saves the current default to the object “original”.</p>
<p><strong>19. Updating themes</strong></p>
<p>Now, all plots will automatically have the same theme.</p>
<p><strong>20. Setting themes</strong></p>
<p>We can set a complete theme object, like original, using the theme_set function.</p>
<p><strong>21. Let’s practice!</strong></p>
<p>Alright, let’s try out these concepts in the exercises. In the next video will bring everything together in a simple case study.</p>
</section>
</section>
<section id="built-in-themes" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="built-in-themes"><span class="header-section-number">4.3</span> Built-in themes</h2>
<p>In addition to making your own themes, there are several <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">out-of-the-box solutions</a> that may save you lots of time.</p>
<ul>
<li><a href="http://www.rdocumentation.org/packages/ggplot2/functions/ggtheme"><code>theme_gray()</code></a> is the default.</li>
<li><a href="http://www.rdocumentation.org/packages/ggplot2/functions/ggtheme"><code>theme_bw()</code></a> is useful when you use transparency.</li>
<li><a href="http://www.rdocumentation.org/packages/ggplot2/functions/ggtheme"><code>theme_classic()</code></a> is more traditional.</li>
<li><a href="http://www.rdocumentation.org/packages/ggplot2/functions/ggtheme"><code>theme_void()</code></a> removes everything but the data. <code>plt_prop_unemployed_over_time</code> is available.</li>
</ul>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Add a black and white theme, <code>theme_bw()</code>, to the plot.</li>
<li><em>What changed in the plot?</em></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1"></a><span class="co"># Add a black and white theme</span></span>
<span id="cb108-2"><a href="#cb108-2"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb108-3"><a href="#cb108-3"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-90-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-85"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-90-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Add a classic theme, <code>theme_classic()</code>, to the plot.</li>
<li><em>What changed in the plot?</em></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1"></a><span class="co"># Add a classic theme</span></span>
<span id="cb109-2"><a href="#cb109-2"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb109-3"><a href="#cb109-3"></a>  <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-91-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-86"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-91-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="5" type="1">
<li>Add a void theme, <code>theme_void()</code>, to the plot.</li>
<li><em>What changed in the plot?</em></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1"></a><span class="co"># Add a void theme</span></span>
<span id="cb110-2"><a href="#cb110-2"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb110-3"><a href="#cb110-3"></a>  <span class="fu">theme_void</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-92-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-87"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-92-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Thrilling theming! the black and white theme works really well if you use transparency in your plot.</p>
</section>
<section id="exploring-ggthemes" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="exploring-ggthemes"><span class="header-section-number">4.4</span> Exploring ggthemes</h2>
<p>Outside of <code>ggplot2</code>, another source of built-in themes is the <code>ggthemes</code> package. The workspace already contains the <code>plt_prop_unemployed_over_time</code>, the line plot from before. Let’s explore some of the ready-made <code>ggthemes</code> themes.</p>
<p><code>plt_prop_unemployed_over_time</code> is available.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Add a fivethirtyeight.com theme, <code>theme_fivethirtyeight()</code>, to the plot.</li>
<li><em>What changed in the plot?</em></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1"></a><span class="co"># Package</span></span>
<span id="cb111-2"><a href="#cb111-2"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb111-3"><a href="#cb111-3"></a></span>
<span id="cb111-4"><a href="#cb111-4"></a><span class="co"># Use the fivethirtyeight theme</span></span>
<span id="cb111-5"><a href="#cb111-5"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb111-6"><a href="#cb111-6"></a>  <span class="fu">theme_fivethirtyeight</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-93-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-88"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-93-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Add an Edward Tufte theme, <code>theme_tufte()</code>, to the plot.</li>
<li><em>What changed in the plot?</em></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1"></a><span class="co"># Use Tufte's theme</span></span>
<span id="cb112-2"><a href="#cb112-2"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb112-3"><a href="#cb112-3"></a>  <span class="fu">theme_tufte</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-94-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-89"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-94-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="5" type="1">
<li>Add a Wall Street Journal theme, <code>theme_wsj()</code>, to the plot.</li>
<li><em>What changed in the plot?</em></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1"></a><span class="co"># Use the Wall Street Journal theme</span></span>
<span id="cb113-2"><a href="#cb113-2"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb113-3"><a href="#cb113-3"></a>  <span class="fu">theme_wsj</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-95-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-90"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-95-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Excellent use of extra themes! <code>ggthemes</code> has over 20 themes for you to try.</p>
<section id="setting-themes" class="level3">
<h3 class="anchored" data-anchor-id="setting-themes">Setting themes</h3>
<p>Reusing a theme across many plots helps to provide a consistent style. You have several options for this.</p>
<ol type="1">
<li>Assign the theme to a variable, and add it to each plot.</li>
<li>Set your theme as the default using theme_set().</li>
</ol>
<p>A good strategy that you’ll use here is to begin with a built-in theme then modify it.</p>
<p><code>plt_prop_unemployed_over_time</code> is available. The theme you made earlier is shown in the sample code.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Assign the theme to <code>theme_recession</code>.</li>
<li>Add the Tufte theme and <code>theme_recession</code> together.</li>
<li>Use the Tufte recession theme by adding it to the plot.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1"></a><span class="co"># Theme layer saved as an object, theme_recession</span></span>
<span id="cb114-2"><a href="#cb114-2"></a>theme_recession <span class="ot">&lt;-</span> <span class="fu">theme</span>(</span>
<span id="cb114-3"><a href="#cb114-3"></a>  <span class="at">rect =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"grey92"</span>),</span>
<span id="cb114-4"><a href="#cb114-4"></a>  <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb114-5"><a href="#cb114-5"></a>  <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb114-6"><a href="#cb114-6"></a>  <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb114-7"><a href="#cb114-7"></a>  <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>),</span>
<span id="cb114-8"><a href="#cb114-8"></a>  <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"grey25"</span>),</span>
<span id="cb114-9"><a href="#cb114-9"></a>  <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"italic"</span>, <span class="at">size =</span> <span class="dv">16</span>),</span>
<span id="cb114-10"><a href="#cb114-10"></a>  <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.6</span>, <span class="fl">0.1</span>)</span>
<span id="cb114-11"><a href="#cb114-11"></a>)</span>
<span id="cb114-12"><a href="#cb114-12"></a></span>
<span id="cb114-13"><a href="#cb114-13"></a><span class="co"># Combine the Tufte theme with theme_recession</span></span>
<span id="cb114-14"><a href="#cb114-14"></a>theme_tufte_recession <span class="ot">&lt;-</span> <span class="fu">theme_tufte</span>() <span class="sc">+</span> theme_recession</span>
<span id="cb114-15"><a href="#cb114-15"></a></span>
<span id="cb114-16"><a href="#cb114-16"></a><span class="co"># Add the recession theme to the plot</span></span>
<span id="cb114-17"><a href="#cb114-17"></a>plt_prop_unemployed_over_time <span class="sc">+</span> theme_tufte_recession</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-96-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-91"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-96-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Use <code>theme_set()</code> to set <code>theme_tufte_recession</code> as the default theme.</li>
<li>Draw the plot, <code>plt_prop_unemployed_over_time</code>, without explicitly adding a theme.</li>
<li>*Look at the plot. Was it styled with the default theme or the new theme?**</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1"></a>theme_recession <span class="ot">&lt;-</span> <span class="fu">theme</span>(</span>
<span id="cb115-2"><a href="#cb115-2"></a>  <span class="at">rect =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"grey92"</span>),</span>
<span id="cb115-3"><a href="#cb115-3"></a>  <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb115-4"><a href="#cb115-4"></a>  <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb115-5"><a href="#cb115-5"></a>  <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb115-6"><a href="#cb115-6"></a>  <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>),</span>
<span id="cb115-7"><a href="#cb115-7"></a>  <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"grey25"</span>),</span>
<span id="cb115-8"><a href="#cb115-8"></a>  <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"italic"</span>, <span class="at">size =</span> <span class="dv">16</span>),</span>
<span id="cb115-9"><a href="#cb115-9"></a>  <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.6</span>, <span class="fl">0.1</span>)</span>
<span id="cb115-10"><a href="#cb115-10"></a>)</span>
<span id="cb115-11"><a href="#cb115-11"></a>theme_tufte_recession <span class="ot">&lt;-</span> <span class="fu">theme_tufte</span>() <span class="sc">+</span> theme_recession</span>
<span id="cb115-12"><a href="#cb115-12"></a></span>
<span id="cb115-13"><a href="#cb115-13"></a><span class="co"># Set theme_tufte_recession as the default theme</span></span>
<span id="cb115-14"><a href="#cb115-14"></a><span class="fu">theme_set</span>(theme_tufte_recession)</span>
<span id="cb115-15"><a href="#cb115-15"></a></span>
<span id="cb115-16"><a href="#cb115-16"></a><span class="co"># Draw the plot (without explicitly adding a theme)</span></span>
<span id="cb115-17"><a href="#cb115-17"></a>plt_prop_unemployed_over_time</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-97-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-92"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-97-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>NA</p>
</section>
<section id="publication-quality-plots" class="level3">
<h3 class="anchored" data-anchor-id="publication-quality-plots">Publication-quality plots</h3>
<p>We’ve seen many examples of beautiful, publication-quality plots. Let’s take a final look and put all the pieces together.</p>
<p><code>plt_prop_unemployed_over_time</code> is available.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li>Add Tufte’s theme.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb116-2"><a href="#cb116-2"></a>  <span class="co"># Add Tufte's theme</span></span>
<span id="cb116-3"><a href="#cb116-3"></a>  <span class="fu">theme_tufte</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-98-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-93"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-98-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Call the function to add individual theme elements. Turn off the legend and the axis ticks.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb117-2"><a href="#cb117-2"></a>  <span class="fu">theme_tufte</span>() <span class="sc">+</span></span>
<span id="cb117-3"><a href="#cb117-3"></a>  <span class="co"># Add individual theme elements</span></span>
<span id="cb117-4"><a href="#cb117-4"></a>  <span class="fu">theme</span>(</span>
<span id="cb117-5"><a href="#cb117-5"></a>    <span class="co"># Turn off the legend</span></span>
<span id="cb117-6"><a href="#cb117-6"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb117-7"><a href="#cb117-7"></a>    <span class="co"># Turn off the axis ticks</span></span>
<span id="cb117-8"><a href="#cb117-8"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb117-9"><a href="#cb117-9"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-99-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-94"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-99-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Set the axis title and axis text’s text color to <code>grey60</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb118-2"><a href="#cb118-2"></a>  <span class="fu">theme_tufte</span>() <span class="sc">+</span></span>
<span id="cb118-3"><a href="#cb118-3"></a>  <span class="fu">theme</span>(</span>
<span id="cb118-4"><a href="#cb118-4"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb118-5"><a href="#cb118-5"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb118-6"><a href="#cb118-6"></a>    <span class="co"># Set the axis title's text color to grey60</span></span>
<span id="cb118-7"><a href="#cb118-7"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"grey60"</span>),</span>
<span id="cb118-8"><a href="#cb118-8"></a>    <span class="co"># Set the axis text's text color to grey60</span></span>
<span id="cb118-9"><a href="#cb118-9"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"grey60"</span>)</span>
<span id="cb118-10"><a href="#cb118-10"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-100-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-95"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-100-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Set the panel gridlines major y values. Set the color to <code>grey60</code>, the size to <code>0.25</code>, and the line type to <code>dotted</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1"></a>plt_prop_unemployed_over_time <span class="sc">+</span></span>
<span id="cb119-2"><a href="#cb119-2"></a>  <span class="fu">theme_tufte</span>() <span class="sc">+</span></span>
<span id="cb119-3"><a href="#cb119-3"></a>  <span class="fu">theme</span>(</span>
<span id="cb119-4"><a href="#cb119-4"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb119-5"><a href="#cb119-5"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb119-6"><a href="#cb119-6"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"grey60"</span>),</span>
<span id="cb119-7"><a href="#cb119-7"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"grey60"</span>),</span>
<span id="cb119-8"><a href="#cb119-8"></a>    <span class="co"># Set the panel gridlines major y values</span></span>
<span id="cb119-9"><a href="#cb119-9"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(</span>
<span id="cb119-10"><a href="#cb119-10"></a>      <span class="co"># Set the color to grey60</span></span>
<span id="cb119-11"><a href="#cb119-11"></a>      <span class="at">color =</span> <span class="st">"grey60"</span>,</span>
<span id="cb119-12"><a href="#cb119-12"></a>      <span class="co"># Set the size to 0.25</span></span>
<span id="cb119-13"><a href="#cb119-13"></a>      <span class="at">size =</span> <span class="fl">0.25</span>,</span>
<span id="cb119-14"><a href="#cb119-14"></a>      <span class="co"># Set the linetype to dotted</span></span>
<span id="cb119-15"><a href="#cb119-15"></a>      <span class="at">linetype =</span> <span class="st">"dotted"</span></span>
<span id="cb119-16"><a href="#cb119-16"></a>    )</span>
<span id="cb119-17"><a href="#cb119-17"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-101-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-96"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-101-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Perfect plotting! That will look great in a publication!</p>
</section>
</section>
<section id="effective-explanatory-plots" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="effective-explanatory-plots"><span class="header-section-number">4.5</span> Effective explanatory plots</h2>
<p>Theory. Coming soon …</p>
<p><strong>1. Effective explanatory plots</strong></p>
<p>For our last exercises, I want to go through an example of producing explanatory plots in an info viz style, something that you’d see in a magazine or website for a mostly lay audience.</p>
<p><strong>2. Our goal, an effective explanatory plot</strong></p>
<p>These plots tend to have both a small number of observations and variables, have embellishments and typically make a clear or dramatic statement.Our example comes from the gapminder data set and plots the countries with the highest and lowest life expectancies in 2007. The global mean is plotted for comparison. Here we focus on the large gap between the highest and lowest life expectancies, which is about 40 years!</p>
<p><strong>3. Complete data</strong></p>
<p><strong>4. First exploratory plots - distributions</strong></p>
<p>Our first exploratory plot would probably be a histogram, which isn’t a bad choice. Recall that we have already applied a binning statistic here.</p>
<p><strong>5. First exploratory plots - distributions</strong></p>
<p>An alternative would be to arrange the data according life expectancy and plot that as an index, which allows us to see each point individually, without first binning the variable.</p>
<p><strong>6. First exploratory plots - distributions</strong></p>
<p>This has the advantage that we can color each point according to continent. This is already a quite informative plot. We can see differences in the distribution between continents. After getting familiar with our data, we need to reduce it to a compact and understandable format for a lay audience.</p>
<p><strong>7. Our data</strong></p>
<p>In this form we only have 20 observations, the top 10 and bottom 10 observations.</p>
<p><strong>8. life expectancy plot</strong></p>
<p>Here, I’d map the country to the y axis, so that it’s easy to read, I mapped life expectancy onto both color and the x axis, which is redundant, but helps a lay audience.</p>
<p><strong>9. Use intuitive and attractive geoms</strong></p>
<p>The line segments add some perspective and is sometimes referred to as a lollipop plot when used with points.</p>
<p><strong>10. Add text labels to your plot</strong></p>
<p>Typically, we’re happy to just read a value from the axis, but adding the actual value using a geom_text layer makes it immediately more intuitive for unexperienced viewers. You can already see that there are many things happening that we wouldn’t typically do for a scientific audience.</p>
<p><strong>11. Use appropriate scales</strong></p>
<p>Next, I’d clean up the scales, using an intuitive color palette, removing unnecessary buffering, and changing the x axis location to the top of the plot.</p>
<p><strong>12. Add useful titles and citations</strong></p>
<p>Titles and captions help to make the plot complete, if it will be viewed alone.</p>
<p><strong>13. Remove non-data ink</strong></p>
<p>And of course, removing non-data ink makes for a great looking plot. Notice that I removed the x and y axis labels as well as the legend. None of them are actually necessary.</p>
<p><strong>14. Add threshold lines</strong></p>
<p>Adding a threshold line helps to orientate the viewer. Here, it’s the global mean from 2007.</p>
<p><strong>15. Add informative text</strong></p>
<p>Of course, it’s also helpful to label the threshold line. We’ll do this with the annotate function, which allows us to access any geom and place it manually on a plot.</p>
<p><strong>16. Add embellishments</strong></p>
<p>For example, another geom we haven’t seen yet is geom_curve, for drawing curved lines. This is really great for adding handy little arrows anywhere on our plot.</p>
<p><strong>17. Let’s practice!</strong></p>
<p>By now you have the ggplot2 core competencies that will allow you to make beautiful and effective exploratory plots, but there is a lot more to data visualization and ggplot2. After you’re finished the exercises, head over to the next course to learn about the remaining layers and round out your knowledge.</p>
<section id="using-geoms-for-explanatory-plots" class="level3">
<h3 class="anchored" data-anchor-id="using-geoms-for-explanatory-plots">Using geoms for explanatory plots</h3>
<p>Let’s focus on producing beautiful and effective explanatory plots. In the next couple of exercises, you’ll create a plot that is similar to the one shown in the video using <code>gm2007</code>, a filtered subset of the <code>gapminder</code> dataset.</p>
<p>This type of plot will be in an info-viz style, meaning that it would be similar to something you’d see in a magazine or website for a mostly lay audience.</p>
<p>A scatterplot of <code>lifeExp</code> by <code>country</code>, colored by <code>lifeExp</code>, with points of size <code>4</code>, is provided.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li><code>geom_segment()</code> adds line segments and requires two additional aesthetics: <code>xend</code> and <code>yend</code>. To draw a horizontal line for each point, map <code>30</code> onto <code>xend</code> and <code>country</code> onto <code>yend</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1"></a><span class="co"># data</span></span>
<span id="cb120-2"><a href="#cb120-2"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb120-3"><a href="#cb120-3"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb120-4"><a href="#cb120-4"></a></span>
<span id="cb120-5"><a href="#cb120-5"></a>gm2007 <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb120-6"><a href="#cb120-6"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> </span>
<span id="cb120-7"><a href="#cb120-7"></a>  <span class="fu">select</span>(country, lifeExp, continent) <span class="sc">|&gt;</span> </span>
<span id="cb120-8"><a href="#cb120-8"></a><span class="fu">filter</span>(lifeExp <span class="sc">&gt;</span> <span class="fl">80.6</span> <span class="sc">|</span> lifeExp <span class="sc">&lt;</span> <span class="dv">46</span>) <span class="sc">|&gt;</span> </span>
<span id="cb120-9"><a href="#cb120-9"></a>  <span class="fu">arrange</span>(lifeExp)</span>
<span id="cb120-10"><a href="#cb120-10"></a></span>
<span id="cb120-11"><a href="#cb120-11"></a><span class="co"># Add a geom_segment() layer</span></span>
<span id="cb120-12"><a href="#cb120-12"></a><span class="fu">ggplot</span>(gm2007, <span class="fu">aes</span>(<span class="at">x =</span> lifeExp, <span class="at">y =</span> country, <span class="at">color =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb120-13"><a href="#cb120-13"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb120-14"><a href="#cb120-14"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">xend =</span> <span class="dv">30</span>, <span class="at">yend =</span> country), <span class="at">linewidth =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-103-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-97"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-103-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li><code>geom_text</code> also needs an additional aesthetic: <code>label</code>. Map <code>lifeExp</code> onto <code>label</code>, and set the attributes <code>color</code> to <code>"white"</code> and <code>size</code> to <code>1.5</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1"></a><span class="co"># Add a geom_text() layer</span></span>
<span id="cb121-2"><a href="#cb121-2"></a><span class="fu">ggplot</span>(gm2007, <span class="fu">aes</span>(<span class="at">x =</span> lifeExp, <span class="at">y =</span> country, <span class="at">color =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb121-3"><a href="#cb121-3"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb121-4"><a href="#cb121-4"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">xend =</span> <span class="dv">30</span>, <span class="at">yend =</span> country), <span class="at">linewidth =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb121-5"><a href="#cb121-5"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> lifeExp), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-104-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-98"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-104-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>The color scale has been set for you, but you need to clean up the scales. For the x scale:<code>expand</code> to <code>c(0, 0)</code> and <code>limits</code> to <code>c(30, 90)</code>.the axis on the top of the plot with the <code>position</code> argument.</li>
<li>Set <code>expand</code> to <code>c(0, 0)</code> and <code>limits</code> to <code>c(30, 90)</code>.</li>
<li>Place the axis on the top of the plot with the <code>position</code> argument.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1"></a><span class="co"># Package</span></span>
<span id="cb122-2"><a href="#cb122-2"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb122-3"><a href="#cb122-3"></a></span>
<span id="cb122-4"><a href="#cb122-4"></a><span class="co"># Set the color scale</span></span>
<span id="cb122-5"><a href="#cb122-5"></a>palette <span class="ot">&lt;-</span> <span class="fu">brewer.pal</span>(<span class="dv">5</span>, <span class="st">"RdYlBu"</span>)[<span class="sc">-</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>)]</span>
<span id="cb122-6"><a href="#cb122-6"></a></span>
<span id="cb122-7"><a href="#cb122-7"></a><span class="co"># Modify the scales</span></span>
<span id="cb122-8"><a href="#cb122-8"></a><span class="fu">ggplot</span>(gm2007, <span class="fu">aes</span>(<span class="at">x =</span> lifeExp, <span class="at">y =</span> country, <span class="at">color =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb122-9"><a href="#cb122-9"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb122-10"><a href="#cb122-10"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">xend =</span> <span class="dv">30</span>, <span class="at">yend =</span> country), <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb122-11"><a href="#cb122-11"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(lifeExp,<span class="dv">1</span>)), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb122-12"><a href="#cb122-12"></a>  <span class="fu">scale_x_continuous</span>(<span class="st">""</span>, <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">90</span>), <span class="at">position =</span> <span class="st">"top"</span>) <span class="sc">+</span></span>
<span id="cb122-13"><a href="#cb122-13"></a>  <span class="fu">scale_color_gradientn</span>(<span class="at">colors =</span> palette)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
#&gt; ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-105-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-99"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-105-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="6" type="1">
<li><p>Make sure to label the plot appropriately using <code>labs()</code>:</p>
<ul>
<li>Make the title <code>"Highest and lowest life expectancies, 2007"</code>.</li>
<li>Add a reference by setting <code>caption</code> to <code>"Source: gapminder"</code>.</li>
</ul></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1"></a><span class="co"># Set the color scale</span></span>
<span id="cb124-2"><a href="#cb124-2"></a>palette <span class="ot">&lt;-</span> <span class="fu">brewer.pal</span>(<span class="dv">5</span>, <span class="st">"RdYlBu"</span>)[<span class="sc">-</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>)]</span>
<span id="cb124-3"><a href="#cb124-3"></a></span>
<span id="cb124-4"><a href="#cb124-4"></a><span class="co"># Add a title and caption</span></span>
<span id="cb124-5"><a href="#cb124-5"></a>plt_country_vs_lifeExp <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(gm2007, <span class="fu">aes</span>(<span class="at">x =</span> lifeExp, <span class="at">y =</span> country, <span class="at">color =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb124-6"><a href="#cb124-6"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb124-7"><a href="#cb124-7"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">xend =</span> <span class="dv">30</span>, <span class="at">yend =</span> country), <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb124-8"><a href="#cb124-8"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(lifeExp,<span class="dv">1</span>)), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb124-9"><a href="#cb124-9"></a>  <span class="fu">scale_x_continuous</span>(<span class="st">""</span>, <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">90</span>), <span class="at">position =</span> <span class="st">"top"</span>) <span class="sc">+</span></span>
<span id="cb124-10"><a href="#cb124-10"></a>  <span class="fu">scale_color_gradientn</span>(<span class="at">colors =</span> palette) <span class="sc">+</span></span>
<span id="cb124-11"><a href="#cb124-11"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Highest and lowest life expectancies, 2007"</span>, <span class="at">caption =</span> <span class="st">"Source: gapminder"</span>)</span>
<span id="cb124-12"><a href="#cb124-12"></a>plt_country_vs_lifeExp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-106-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-100"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-106-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Great job! Let’s continue adding to this plot in the next exercise.</p>
</section>
<section id="using-annotate-for-embellishments" class="level3">
<h3 class="anchored" data-anchor-id="using-annotate-for-embellishments">Using annotate() for embellishments</h3>
<p>In the previous exercise, we completed our basic plot. Now let’s polish it by playing with the theme and adding annotations. In this exercise, you’ll use <code>annotate()</code> to add text and a curve to the plot.</p>
<p>The following values have been calculated for you to assist with adding embellishments to the plot:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1"></a>gm2007_full <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb125-2"><a href="#cb125-2"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb125-3"><a href="#cb125-3"></a>  <span class="fu">select</span>(country, lifeExp, continent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1"></a>global_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(gm2007_full<span class="sc">$</span>lifeExp)</span>
<span id="cb126-2"><a href="#cb126-2"></a>x_start <span class="ot">&lt;-</span> global_mean <span class="sc">+</span> <span class="dv">4</span></span>
<span id="cb126-3"><a href="#cb126-3"></a>y_start <span class="ot">&lt;-</span> <span class="fl">5.5</span></span>
<span id="cb126-4"><a href="#cb126-4"></a>x_end <span class="ot">&lt;-</span> global_mean</span>
<span id="cb126-5"><a href="#cb126-5"></a>y_end <span class="ot">&lt;-</span> <span class="fl">7.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Our previous plot has been assigned to <code>plt_country_vs_lifeExp</code>.</p>
<p><strong>Steps</strong></p>
<ol type="1">
<li><p>Clean up the theme:</p>
<ul>
<li>Add a classic theme to the plot with <code>theme_classic()</code>.</li>
<li>Set <code>axis.line.y</code>, <code>axis.ticks.y</code>, and <code>axis.title</code> to <code>element_blank()</code>.</li>
<li>Set the <code>axis.text</code> color to <code>"black"</code>.</li>
<li>Remove the legend by setting <code>legend.position</code> to <code>"none"</code>.</li>
</ul></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1"></a><span class="co"># Define the theme</span></span>
<span id="cb127-2"><a href="#cb127-2"></a>plt_country_vs_lifeExp <span class="sc">+</span></span>
<span id="cb127-3"><a href="#cb127-3"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb127-4"><a href="#cb127-4"></a>  <span class="fu">theme</span>(<span class="at">axis.line.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb127-5"><a href="#cb127-5"></a>        <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb127-6"><a href="#cb127-6"></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"black"</span>),</span>
<span id="cb127-7"><a href="#cb127-7"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb127-8"><a href="#cb127-8"></a>        <span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-109-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-101"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-109-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Use <code>geom_vline()</code> to add a vertical line. Set <code>xintercept</code> to <code>global_mean</code>, specify the color to be <code>"grey40"</code>, and set <code>linetype</code> to <code>3</code>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1"></a><span class="co"># Add a vertical line</span></span>
<span id="cb128-2"><a href="#cb128-2"></a>plt_country_vs_lifeExp <span class="ot">&lt;-</span> plt_country_vs_lifeExp <span class="sc">+</span></span>
<span id="cb128-3"><a href="#cb128-3"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> global_mean, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>, <span class="at">linewidth =</span> <span class="dv">1</span>)</span>
<span id="cb128-4"><a href="#cb128-4"></a>plt_country_vs_lifeExp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-110-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-102"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-110-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li><p><code>x_start</code> and <code>y_start</code> will be used as positions to place text and have been calculated for you.</p>
<ul>
<li>Add a <code>"text"</code> geom as an annotation.</li>
<li>For the annotation, set <code>x</code> to <code>x_start</code>, <code>y</code> to <code>y_start</code>, and <code>label</code> to <code>"The\\nglobal\\naverage"</code>.</li>
</ul></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1"></a><span class="co"># Add text</span></span>
<span id="cb129-2"><a href="#cb129-2"></a>plt_country_vs_lifeExp <span class="ot">&lt;-</span> plt_country_vs_lifeExp  <span class="sc">+</span></span>
<span id="cb129-3"><a href="#cb129-3"></a>  <span class="fu">annotate</span>(</span>
<span id="cb129-4"><a href="#cb129-4"></a>    <span class="st">"label"</span>, <span class="co"># instead of text</span></span>
<span id="cb129-5"><a href="#cb129-5"></a>    <span class="at">x =</span> x_start, <span class="at">y =</span> y_start,</span>
<span id="cb129-6"><a href="#cb129-6"></a>    <span class="at">label =</span> <span class="st">"The</span><span class="sc">\n</span><span class="st">global</span><span class="sc">\n</span><span class="st">average"</span>,</span>
<span id="cb129-7"><a href="#cb129-7"></a>    <span class="at">fill =</span> <span class="st">"#2b2b2b"</span>,</span>
<span id="cb129-8"><a href="#cb129-8"></a>    <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"white"</span></span>
<span id="cb129-9"><a href="#cb129-9"></a>  )</span>
<span id="cb129-10"><a href="#cb129-10"></a>plt_country_vs_lifeExp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-111-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-103"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-111-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li><p>Annotate the plot with an arrow connecting your text to the line.</p>
<ul>
<li>Use a <code>"curve"</code> geom.</li>
<li>Set the arrow ends <code>xend</code> to <code>x_end</code> and <code>yend</code> to <code>y_end</code>.</li>
<li>Set the <code>length</code> of the arrowhead to 0.2 cm and the <code>type</code> to <code>"closed"</code>.</li>
</ul></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1"></a><span class="co"># Add a curve</span></span>
<span id="cb130-2"><a href="#cb130-2"></a>plt_country_vs_lifeExp <span class="ot">&lt;-</span> plt_country_vs_lifeExp  <span class="sc">+</span></span>
<span id="cb130-3"><a href="#cb130-3"></a>  <span class="fu">annotate</span>(</span>
<span id="cb130-4"><a href="#cb130-4"></a>    <span class="st">"curve"</span>,</span>
<span id="cb130-5"><a href="#cb130-5"></a>    <span class="at">x =</span> x_start, <span class="at">y =</span> y_start,</span>
<span id="cb130-6"><a href="#cb130-6"></a>    <span class="at">xend =</span> x_end, <span class="at">yend =</span> y_end,</span>
<span id="cb130-7"><a href="#cb130-7"></a>    <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.2</span>, <span class="st">"cm"</span>), <span class="at">type =</span> <span class="st">"closed"</span>),</span>
<span id="cb130-8"><a href="#cb130-8"></a>    <span class="at">color =</span> <span class="st">"white"</span></span>
<span id="cb130-9"><a href="#cb130-9"></a>  )</span>
<span id="cb130-10"><a href="#cb130-10"></a>plt_country_vs_lifeExp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ggplot2_intro_files/figure-html/unnamed-chunk-112-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-104"><img src="ggplot2_intro_files/figure-html/unnamed-chunk-112-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Awesome! Your explanatory plot clearly shows the countries with the highest and lowest life expectancy and would be great for a lay audience.<br><br>on finishing the course! Continue learning more in Intermediate Data Visualization with ggplot2!</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../../../../content/R/topics/04_data_visualization/data_visualization_with_ggplot2_intermediate/ggplot2_intermediate.html" class="pagination-link">
        <span class="nav-page-text">4.2: Intermediate Data Visualization with ggplot2</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Content 2022 by <a href="https://www.startupengineer.io/authors/schwarz/">Joschka Schwarz</a> <br> All content licensed under a <a href="https://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International license (CC BY-NC 4.0)</a></div>   
    <div class="nav-footer-right">Made with and <a href="https://quarto.org/">Quarto</a><br> <a href="https://www.github.com/jwarz/jwarz.github.io">View the source at GitHub</a></div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","selector":".lightbox","loop":true,"descPosition":"bottom","openEffect":"zoom"});</script>



<script src="../../../../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>